!function(e,t){e.getElementById("livereloadscript")||((t=e.createElement("script")).async=1,t.src="//"+(window.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",t.id="livereloadscript",e.getElementsByTagName("head")[0].appendChild(t))}(window.document);var ZegoRecorderEngine=function(){"use strict";var commonjsGlobal$1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var check=function(e){return e&&e.Math==Math&&e},global$E=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof commonjsGlobal$1&&commonjsGlobal$1)||function(){return this}()||Function("return this")(),objectGetOwnPropertyDescriptor={},fails$z=function(e){try{return!!e()}catch(e){return!0}},fails$y=fails$z,descriptors=!fails$y((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),objectPropertyIsEnumerable={},$propertyIsEnumerable$1={}.propertyIsEnumerable,getOwnPropertyDescriptor$3=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$3&&!$propertyIsEnumerable$1.call({1:2},1);objectPropertyIsEnumerable.f=NASHORN_BUG?function(e){var t=getOwnPropertyDescriptor$3(this,e);return!!t&&t.enumerable}:$propertyIsEnumerable$1;var createPropertyDescriptor$7=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},toString$2={}.toString,classofRaw$1=function(e){return toString$2.call(e).slice(8,-1)},fails$x=fails$z,classof$c=classofRaw$1,split="".split,indexedObject=fails$x((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==classof$c(e)?split.call(e,""):Object(e)}:Object,requireObjectCoercible$b=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},IndexedObject$4=indexedObject,requireObjectCoercible$a=requireObjectCoercible$b,toIndexedObject$9=function(e){return IndexedObject$4(requireObjectCoercible$a(e))},isObject$l=function(e){return"object"==typeof e?null!==e:"function"==typeof e},isObject$k=isObject$l,toPrimitive$6=function(e,t){if(!isObject$k(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!isObject$k(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!isObject$k(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!isObject$k(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")},requireObjectCoercible$9=requireObjectCoercible$b,toObject$h=function(e){return Object(requireObjectCoercible$9(e))},toObject$g=toObject$h,hasOwnProperty={}.hasOwnProperty,has$h=Object.hasOwn||function(e,t){return hasOwnProperty.call(toObject$g(e),t)},global$D=global$E,isObject$j=isObject$l,document$3=global$D.document,EXISTS=isObject$j(document$3)&&isObject$j(document$3.createElement),documentCreateElement$1=function(e){return EXISTS?document$3.createElement(e):{}},DESCRIPTORS$j=descriptors,fails$w=fails$z,createElement$1=documentCreateElement$1,ie8DomDefine=!DESCRIPTORS$j&&!fails$w((function(){return 7!=Object.defineProperty(createElement$1("div"),"a",{get:function(){return 7}}).a})),DESCRIPTORS$i=descriptors,propertyIsEnumerableModule$2=objectPropertyIsEnumerable,createPropertyDescriptor$6=createPropertyDescriptor$7,toIndexedObject$8=toIndexedObject$9,toPrimitive$5=toPrimitive$6,has$g=has$h,IE8_DOM_DEFINE$1=ie8DomDefine,$getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor;objectGetOwnPropertyDescriptor.f=DESCRIPTORS$i?$getOwnPropertyDescriptor$1:function(e,t){if(e=toIndexedObject$8(e),t=toPrimitive$5(t,!0),IE8_DOM_DEFINE$1)try{return $getOwnPropertyDescriptor$1(e,t)}catch(e){}if(has$g(e,t))return createPropertyDescriptor$6(!propertyIsEnumerableModule$2.f.call(e,t),e[t])};var objectDefineProperty={},isObject$i=isObject$l,anObject$j=function(e){if(!isObject$i(e))throw TypeError(String(e)+" is not an object");return e},DESCRIPTORS$h=descriptors,IE8_DOM_DEFINE=ie8DomDefine,anObject$i=anObject$j,toPrimitive$4=toPrimitive$6,$defineProperty$1=Object.defineProperty;objectDefineProperty.f=DESCRIPTORS$h?$defineProperty$1:function(e,t,r){if(anObject$i(e),t=toPrimitive$4(t,!0),anObject$i(r),IE8_DOM_DEFINE)try{return $defineProperty$1(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var DESCRIPTORS$g=descriptors,definePropertyModule$7=objectDefineProperty,createPropertyDescriptor$5=createPropertyDescriptor$7,createNonEnumerableProperty$d=DESCRIPTORS$g?function(e,t,r){return definePropertyModule$7.f(e,t,createPropertyDescriptor$5(1,r))}:function(e,t,r){return e[t]=r,e},redefine$f={exports:{}},global$C=global$E,createNonEnumerableProperty$c=createNonEnumerableProperty$d,setGlobal$3=function(e,t){try{createNonEnumerableProperty$c(global$C,e,t)}catch(r){global$C[e]=t}return t},global$B=global$E,setGlobal$2=setGlobal$3,SHARED="__core-js_shared__",store$3=global$B[SHARED]||setGlobal$2(SHARED,{}),sharedStore=store$3,store$2=sharedStore,functionToString=Function.toString;"function"!=typeof store$2.inspectSource&&(store$2.inspectSource=function(e){return functionToString.call(e)});var inspectSource$3=store$2.inspectSource,global$A=global$E,inspectSource$2=inspectSource$3,WeakMap$1=global$A.WeakMap,nativeWeakMap="function"==typeof WeakMap$1&&/native code/.test(inspectSource$2(WeakMap$1)),shared$5={exports:{}},isPure=!1,store$1=sharedStore;(shared$5.exports=function(e,t){return store$1[e]||(store$1[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.14.0",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"});var id$1=0,postfix=Math.random(),uid$5=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++id$1+postfix).toString(36)},shared$4=shared$5.exports,uid$4=uid$5,keys$3=shared$4("keys"),sharedKey$4=function(e){return keys$3[e]||(keys$3[e]=uid$4(e))},hiddenKeys$6={},NATIVE_WEAK_MAP=nativeWeakMap,global$z=global$E,isObject$h=isObject$l,createNonEnumerableProperty$b=createNonEnumerableProperty$d,objectHas=has$h,shared$3=sharedStore,sharedKey$3=sharedKey$4,hiddenKeys$5=hiddenKeys$6,OBJECT_ALREADY_INITIALIZED="Object already initialized",WeakMap=global$z.WeakMap,set$2,get$1,has$f,enforce=function(e){return has$f(e)?get$1(e):set$2(e,{})},getterFor=function(e){return function(t){var r;if(!isObject$h(t)||(r=get$1(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}};if(NATIVE_WEAK_MAP||shared$3.state){var store=shared$3.state||(shared$3.state=new WeakMap),wmget=store.get,wmhas=store.has,wmset=store.set;set$2=function(e,t){if(wmhas.call(store,e))throw new TypeError(OBJECT_ALREADY_INITIALIZED);return t.facade=e,wmset.call(store,e,t),t},get$1=function(e){return wmget.call(store,e)||{}},has$f=function(e){return wmhas.call(store,e)}}else{var STATE=sharedKey$3("state");hiddenKeys$5[STATE]=!0,set$2=function(e,t){if(objectHas(e,STATE))throw new TypeError(OBJECT_ALREADY_INITIALIZED);return t.facade=e,createNonEnumerableProperty$b(e,STATE,t),t},get$1=function(e){return objectHas(e,STATE)?e[STATE]:{}},has$f=function(e){return objectHas(e,STATE)}}var internalState={set:set$2,get:get$1,has:has$f,enforce:enforce,getterFor:getterFor},global$y=global$E,createNonEnumerableProperty$a=createNonEnumerableProperty$d,has$e=has$h,setGlobal$1=setGlobal$3,inspectSource$1=inspectSource$3,InternalStateModule$8=internalState,getInternalState$6=InternalStateModule$8.get,enforceInternalState$1=InternalStateModule$8.enforce,TEMPLATE=String(String).split("String");(redefine$f.exports=function(e,t,r,i){var n,o=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,s=!!i&&!!i.noTargetGet;"function"==typeof r&&("string"!=typeof t||has$e(r,"name")||createNonEnumerableProperty$a(r,"name",t),(n=enforceInternalState$1(r)).source||(n.source=TEMPLATE.join("string"==typeof t?t:""))),e!==global$y?(o?!s&&e[t]&&(a=!0):delete e[t],a?e[t]=r:createNonEnumerableProperty$a(e,t,r)):a?e[t]=r:setGlobal$1(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&getInternalState$6(this).source||inspectSource$1(this)}));var global$x=global$E,path$2=global$x,path$1=path$2,global$w=global$E,aFunction$9=function(e){return"function"==typeof e?e:void 0},getBuiltIn$8=function(e,t){return arguments.length<2?aFunction$9(path$1[e])||aFunction$9(global$w[e]):path$1[e]&&path$1[e][t]||global$w[e]&&global$w[e][t]},objectGetOwnPropertyNames={},ceil$1=Math.ceil,floor$8=Math.floor,toInteger$b=function(e){return isNaN(e=+e)?0:(e>0?floor$8:ceil$1)(e)},toInteger$a=toInteger$b,min$6=Math.min,toLength$p=function(e){return e>0?min$6(toInteger$a(e),9007199254740991):0},toInteger$9=toInteger$b,max$3=Math.max,min$5=Math.min,toAbsoluteIndex$7=function(e,t){var r=toInteger$9(e);return r<0?max$3(r+t,0):min$5(r,t)},toIndexedObject$7=toIndexedObject$9,toLength$o=toLength$p,toAbsoluteIndex$6=toAbsoluteIndex$7,createMethod$5=function(e){return function(t,r,i){var n,o=toIndexedObject$7(t),a=toLength$o(o.length),s=toAbsoluteIndex$6(i,a);if(e&&r!=r){for(;a>s;)if((n=o[s++])!=n)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},arrayIncludes={includes:createMethod$5(!0),indexOf:createMethod$5(!1)},has$d=has$h,toIndexedObject$6=toIndexedObject$9,indexOf=arrayIncludes.indexOf,hiddenKeys$4=hiddenKeys$6,objectKeysInternal=function(e,t){var r,i=toIndexedObject$6(e),n=0,o=[];for(r in i)!has$d(hiddenKeys$4,r)&&has$d(i,r)&&o.push(r);for(;t.length>n;)has$d(i,r=t[n++])&&(~indexOf(o,r)||o.push(r));return o},enumBugKeys$3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,enumBugKeys$2=enumBugKeys$3,hiddenKeys$3=enumBugKeys$2.concat("length","prototype");objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function(e){return internalObjectKeys$1(e,hiddenKeys$3)};var objectGetOwnPropertySymbols={};objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols;var getBuiltIn$7=getBuiltIn$8,getOwnPropertyNamesModule$1=objectGetOwnPropertyNames,getOwnPropertySymbolsModule$2=objectGetOwnPropertySymbols,anObject$h=anObject$j,ownKeys$1=getBuiltIn$7("Reflect","ownKeys")||function(e){var t=getOwnPropertyNamesModule$1.f(anObject$h(e)),r=getOwnPropertySymbolsModule$2.f;return r?t.concat(r(e)):t},has$c=has$h,ownKeys=ownKeys$1,getOwnPropertyDescriptorModule$2=objectGetOwnPropertyDescriptor,definePropertyModule$6=objectDefineProperty,copyConstructorProperties$2=function(e,t){for(var r=ownKeys(t),i=definePropertyModule$6.f,n=getOwnPropertyDescriptorModule$2.f,o=0;o<r.length;o++){var a=r[o];has$c(e,a)||i(e,a,n(t,a))}},fails$v=fails$z,replacement=/#|\.prototype\./,isForced$4=function(e,t){var r=data[normalize(e)];return r==POLYFILL||r!=NATIVE&&("function"==typeof t?fails$v(t):!!t)},normalize=isForced$4.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced$4.data={},NATIVE=isForced$4.NATIVE="N",POLYFILL=isForced$4.POLYFILL="P",isForced_1=isForced$4,global$v=global$E,getOwnPropertyDescriptor$2=objectGetOwnPropertyDescriptor.f,createNonEnumerableProperty$9=createNonEnumerableProperty$d,redefine$e=redefine$f.exports,setGlobal=setGlobal$3,copyConstructorProperties$1=copyConstructorProperties$2,isForced$3=isForced_1,_export=function(e,t){var r,i,n,o,a,s=e.target,l=e.global,u=e.stat;if(r=l?global$v:u?global$v[s]||setGlobal(s,{}):(global$v[s]||{}).prototype)for(i in t){if(o=t[i],n=e.noTargetGet?(a=getOwnPropertyDescriptor$2(r,i))&&a.value:r[i],!isForced$3(l?i:s+(u?".":"#")+i,e.forced)&&void 0!==n){if(typeof o==typeof n)continue;copyConstructorProperties$1(o,n)}(e.sham||n&&n.sham)&&createNonEnumerableProperty$9(o,"sham",!0),redefine$e(r,i,o,e)}},aFunction$8=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},aFunction$7=aFunction$8,functionBindContext=function(e,t,r){if(aFunction$7(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,i){return e.call(t,r,i)};case 3:return function(r,i,n){return e.call(t,r,i,n)}}return function(){return e.apply(t,arguments)}},classof$b=classofRaw$1,isArray$6=Array.isArray||function(e){return"Array"==classof$b(e)},getBuiltIn$6=getBuiltIn$8,engineUserAgent=getBuiltIn$6("navigator","userAgent")||"",global$u=global$E,userAgent$6=engineUserAgent,process$3=global$u.process,versions=process$3&&process$3.versions,v8=versions&&versions.v8,match,version$1;v8?(match=v8.split("."),version$1=match[0]<4?1:match[0]+match[1]):userAgent$6&&(match=userAgent$6.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=userAgent$6.match(/Chrome\/(\d+)/),match&&(version$1=match[1])));var engineV8Version=version$1&&+version$1,V8_VERSION$3=engineV8Version,fails$u=fails$z,nativeSymbol=!!Object.getOwnPropertySymbols&&!fails$u((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&V8_VERSION$3&&V8_VERSION$3<41})),NATIVE_SYMBOL$2=nativeSymbol,useSymbolAsUid=NATIVE_SYMBOL$2&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,global$t=global$E,shared$2=shared$5.exports,has$b=has$h,uid$3=uid$5,NATIVE_SYMBOL$1=nativeSymbol,USE_SYMBOL_AS_UID$1=useSymbolAsUid,WellKnownSymbolsStore$1=shared$2("wks"),Symbol$1=global$t.Symbol,createWellKnownSymbol=USE_SYMBOL_AS_UID$1?Symbol$1:Symbol$1&&Symbol$1.withoutSetter||uid$3,wellKnownSymbol$r=function(e){return has$b(WellKnownSymbolsStore$1,e)&&(NATIVE_SYMBOL$1||"string"==typeof WellKnownSymbolsStore$1[e])||(NATIVE_SYMBOL$1&&has$b(Symbol$1,e)?WellKnownSymbolsStore$1[e]=Symbol$1[e]:WellKnownSymbolsStore$1[e]=createWellKnownSymbol("Symbol."+e)),WellKnownSymbolsStore$1[e]},isObject$g=isObject$l,isArray$5=isArray$6,wellKnownSymbol$q=wellKnownSymbol$r,SPECIES$6=wellKnownSymbol$q("species"),arraySpeciesCreate$3=function(e,t){var r;return isArray$5(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!isArray$5(r.prototype)?isObject$g(r)&&null===(r=r[SPECIES$6])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)},bind$7=functionBindContext,IndexedObject$3=indexedObject,toObject$f=toObject$h,toLength$n=toLength$p,arraySpeciesCreate$2=arraySpeciesCreate$3,push=[].push,createMethod$4=function(e){var t=1==e,r=2==e,i=3==e,n=4==e,o=6==e,a=7==e,s=5==e||o;return function(l,u,c,d){for(var p,h,f=toObject$f(l),y=IndexedObject$3(f),m=bind$7(u,c,3),_=toLength$n(y.length),g=0,b=d||arraySpeciesCreate$2,v=t?b(l,_):r||a?b(l,0):void 0;_>g;g++)if((s||g in y)&&(h=m(p=y[g],g,f),e))if(t)v[g]=h;else if(h)switch(e){case 3:return!0;case 5:return p;case 6:return g;case 2:push.call(v,p)}else switch(e){case 4:return!1;case 7:push.call(v,p)}return o?-1:i||n?n:v}},arrayIteration={forEach:createMethod$4(0),map:createMethod$4(1),filter:createMethod$4(2),some:createMethod$4(3),every:createMethod$4(4),find:createMethod$4(5),findIndex:createMethod$4(6),filterOut:createMethod$4(7)},internalObjectKeys=objectKeysInternal,enumBugKeys$1=enumBugKeys$3,objectKeys$3=Object.keys||function(e){return internalObjectKeys(e,enumBugKeys$1)},DESCRIPTORS$f=descriptors,definePropertyModule$5=objectDefineProperty,anObject$g=anObject$j,objectKeys$2=objectKeys$3,objectDefineProperties=DESCRIPTORS$f?Object.defineProperties:function(e,t){anObject$g(e);for(var r,i=objectKeys$2(t),n=i.length,o=0;n>o;)definePropertyModule$5.f(e,r=i[o++],t[r]);return e},getBuiltIn$5=getBuiltIn$8,html$2=getBuiltIn$5("document","documentElement"),anObject$f=anObject$j,defineProperties$1=objectDefineProperties,enumBugKeys=enumBugKeys$3,hiddenKeys$2=hiddenKeys$6,html$1=html$2,documentCreateElement=documentCreateElement$1,sharedKey$2=sharedKey$4,GT=">",LT="<",PROTOTYPE$2="prototype",SCRIPT="script",IE_PROTO$1=sharedKey$2("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(e){return LT+SCRIPT+GT+e+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(e){e.write(scriptTag("")),e.close();var t=e.parentWindow.Object;return e=null,t},NullProtoObjectViaIFrame=function(){var e,t=documentCreateElement("iframe"),r="java"+SCRIPT+":";return t.style.display="none",html$1.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(scriptTag("document.F=Object")),e.close(),e.F},activeXDocument,NullProtoObject=function(){try{activeXDocument=document.domain&&new ActiveXObject("htmlfile")}catch(e){}NullProtoObject=activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame();for(var e=enumBugKeys.length;e--;)delete NullProtoObject[PROTOTYPE$2][enumBugKeys[e]];return NullProtoObject()};hiddenKeys$2[IE_PROTO$1]=!0;var objectCreate=Object.create||function(e,t){var r;return null!==e?(EmptyConstructor[PROTOTYPE$2]=anObject$f(e),r=new EmptyConstructor,EmptyConstructor[PROTOTYPE$2]=null,r[IE_PROTO$1]=e):r=NullProtoObject(),void 0===t?r:defineProperties$1(r,t)},wellKnownSymbol$p=wellKnownSymbol$r,create$7=objectCreate,definePropertyModule$4=objectDefineProperty,UNSCOPABLES=wellKnownSymbol$p("unscopables"),ArrayPrototype$1=Array.prototype;null==ArrayPrototype$1[UNSCOPABLES]&&definePropertyModule$4.f(ArrayPrototype$1,UNSCOPABLES,{configurable:!0,value:create$7(null)});var addToUnscopables$5=function(e){ArrayPrototype$1[UNSCOPABLES][e]=!0},$$P=_export,$find$1=arrayIteration.find,addToUnscopables$4=addToUnscopables$5,FIND="find",SKIPS_HOLES$1=!0;FIND in[]&&Array(1)[FIND]((function(){SKIPS_HOLES$1=!1})),$$P({target:"Array",proto:!0,forced:SKIPS_HOLES$1},{find:function(e){return $find$1(this,e,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables$4(FIND);
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */
var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function __awaiter(e,t,r,i){return new(r||(r=Promise))((function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?n(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(a,s)}l((i=i.apply(e,t||[])).next())}))}function __generator(e,t){var r,i,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function __spreadArray(e,t){for(var r=0,i=t.length,n=e.length;r<i;r++,n++)e[n]=t[r];return e}var anObject$e=anObject$j,regexpFlags$1=function(){var e=anObject$e(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},regexpStickyHelpers={},fails$t=fails$z;function RE(e,t){return RegExp(e,t)}regexpStickyHelpers.UNSUPPORTED_Y=fails$t((function(){var e=RE("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),regexpStickyHelpers.BROKEN_CARET=fails$t((function(){var e=RE("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));var regexpFlags=regexpFlags$1,stickyHelpers$2=regexpStickyHelpers,shared$1=shared$5.exports,nativeExec=RegExp.prototype.exec,nativeReplace=shared$1("native-string-replace",String.prototype.replace),patchedExec=nativeExec,UPDATES_LAST_INDEX_WRONG=function(){var e=/a/,t=/b*/g;return nativeExec.call(e,"a"),nativeExec.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),UNSUPPORTED_Y$3=stickyHelpers$2.UNSUPPORTED_Y||stickyHelpers$2.BROKEN_CARET,NPCG_INCLUDED=void 0!==/()??/.exec("")[1],PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y$3;PATCH&&(patchedExec=function(e){var t,r,i,n,o=this,a=UNSUPPORTED_Y$3&&o.sticky,s=regexpFlags.call(o),l=o.source,u=0,c=e;return a&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),c=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(l="(?: "+l+")",c=" "+c,u++),r=new RegExp("^(?:"+l+")",s)),NPCG_INCLUDED&&(r=new RegExp("^"+l+"$(?!\\s)",s)),UPDATES_LAST_INDEX_WRONG&&(t=o.lastIndex),i=nativeExec.call(a?r:o,c),a?i?(i.input=i.input.slice(u),i[0]=i[0].slice(u),i.index=o.lastIndex,o.lastIndex+=i[0].length):o.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&i&&(o.lastIndex=o.global?i.index+i[0].length:t),NPCG_INCLUDED&&i&&i.length>1&&nativeReplace.call(i[0],r,(function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(i[n]=void 0)})),i});var regexpExec$3=patchedExec,$$O=_export,exec=regexpExec$3;$$O({target:"RegExp",proto:!0,forced:/./.exec!==exec},{exec:exec});var redefine$d=redefine$f.exports,regexpExec$2=regexpExec$3,fails$s=fails$z,wellKnownSymbol$o=wellKnownSymbol$r,createNonEnumerableProperty$8=createNonEnumerableProperty$d,SPECIES$5=wellKnownSymbol$o("species"),RegExpPrototype$2=RegExp.prototype,REPLACE_SUPPORTS_NAMED_GROUPS=!fails$s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),REPLACE_KEEPS_$0="$0"==="a".replace(/./,"$0"),REPLACE=wellKnownSymbol$o("replace"),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=!!/./[REPLACE]&&""===/./[REPLACE]("a","$0"),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!fails$s((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),fixRegexpWellKnownSymbolLogic=function(e,t,r,i){var n=wellKnownSymbol$o(e),o=!fails$s((function(){var t={};return t[n]=function(){return 7},7!=""[e](t)})),a=o&&!fails$s((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[SPECIES$5]=function(){return r},r.flags="",r[n]=/./[n]),r.exec=function(){return t=!0,null},r[n](""),!t}));if(!o||!a||"replace"===e&&(!REPLACE_SUPPORTS_NAMED_GROUPS||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE)||"split"===e&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC){var s=/./[n],l=r(n,""[e],(function(e,t,r,i,n){var a=t.exec;return a===regexpExec$2||a===RegExpPrototype$2.exec?o&&!n?{done:!0,value:s.call(t,r,i)}:{done:!0,value:e.call(r,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:REPLACE_KEEPS_$0,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE}),u=l[0],c=l[1];redefine$d(String.prototype,e,u),redefine$d(RegExpPrototype$2,n,2==t?function(e,t){return c.call(e,this,t)}:function(e){return c.call(e,this)})}i&&createNonEnumerableProperty$8(RegExpPrototype$2[n],"sham",!0)},isObject$f=isObject$l,classof$a=classofRaw$1,wellKnownSymbol$n=wellKnownSymbol$r,MATCH$2=wellKnownSymbol$n("match"),isRegexp=function(e){var t;return isObject$f(e)&&(void 0!==(t=e[MATCH$2])?!!t:"RegExp"==classof$a(e))},anObject$d=anObject$j,aFunction$6=aFunction$8,wellKnownSymbol$m=wellKnownSymbol$r,SPECIES$4=wellKnownSymbol$m("species"),speciesConstructor$8=function(e,t){var r,i=anObject$d(e).constructor;return void 0===i||null==(r=anObject$d(i)[SPECIES$4])?t:aFunction$6(r)},toInteger$8=toInteger$b,requireObjectCoercible$8=requireObjectCoercible$b,createMethod$3=function(e){return function(t,r){var i,n,o=String(requireObjectCoercible$8(t)),a=toInteger$8(r),s=o.length;return a<0||a>=s?e?"":void 0:(i=o.charCodeAt(a))<55296||i>56319||a+1===s||(n=o.charCodeAt(a+1))<56320||n>57343?e?o.charAt(a):i:e?o.slice(a,a+2):n-56320+(i-55296<<10)+65536}},stringMultibyte={codeAt:createMethod$3(!1),charAt:createMethod$3(!0)},charAt$1=stringMultibyte.charAt,advanceStringIndex$3=function(e,t,r){return t+(r?charAt$1(e,t).length:1)},classof$9=classofRaw$1,regexpExec$1=regexpExec$3,regexpExecAbstract=function(e,t){var r=e.exec;if("function"==typeof r){var i=r.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==classof$9(e))throw TypeError("RegExp#exec called on incompatible receiver");return regexpExec$1.call(e,t)},fixRegExpWellKnownSymbolLogic$2=fixRegexpWellKnownSymbolLogic,isRegExp$2=isRegexp,anObject$c=anObject$j,requireObjectCoercible$7=requireObjectCoercible$b,speciesConstructor$7=speciesConstructor$8,advanceStringIndex$2=advanceStringIndex$3,toLength$m=toLength$p,callRegExpExec=regexpExecAbstract,regexpExec=regexpExec$3,stickyHelpers$1=regexpStickyHelpers,UNSUPPORTED_Y$2=stickyHelpers$1.UNSUPPORTED_Y,arrayPush=[].push,min$4=Math.min,MAX_UINT32=4294967295,_a$1,ZegoPlaybackError;fixRegExpWellKnownSymbolLogic$2("split",2,(function(e,t,r){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var i=String(requireObjectCoercible$7(this)),n=void 0===r?MAX_UINT32:r>>>0;if(0===n)return[];if(void 0===e)return[i];if(!isRegExp$2(e))return t.call(i,e,n);for(var o,a,s,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,d=new RegExp(e.source,u+"g");(o=regexpExec.call(d,i))&&!((a=d.lastIndex)>c&&(l.push(i.slice(c,o.index)),o.length>1&&o.index<i.length&&arrayPush.apply(l,o.slice(1)),s=o[0].length,c=a,l.length>=n));)d.lastIndex===o.index&&d.lastIndex++;return c===i.length?!s&&d.test("")||l.push(""):l.push(i.slice(c)),l.length>n?l.slice(0,n):l}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var n=requireObjectCoercible$7(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,n,r):i.call(String(n),t,r)},function(e,n){var o=r(i,e,this,n,i!==t);if(o.done)return o.value;var a=anObject$c(e),s=String(this),l=speciesConstructor$7(a,RegExp),u=a.unicode,c=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(UNSUPPORTED_Y$2?"g":"y"),d=new l(UNSUPPORTED_Y$2?"^(?:"+a.source+")":a,c),p=void 0===n?MAX_UINT32:n>>>0;if(0===p)return[];if(0===s.length)return null===callRegExpExec(d,s)?[s]:[];for(var h=0,f=0,y=[];f<s.length;){d.lastIndex=UNSUPPORTED_Y$2?0:f;var m,_=callRegExpExec(d,UNSUPPORTED_Y$2?s.slice(f):s);if(null===_||(m=min$4(toLength$m(d.lastIndex+(UNSUPPORTED_Y$2?f:0)),s.length))===h)f=advanceStringIndex$2(s,f,u);else{if(y.push(s.slice(h,f)),y.length===p)return y;for(var g=1;g<=_.length-1;g++)if(y.push(_[g]),y.length===p)return y;f=h=m}}return y.push(s.slice(h)),y}]}),UNSUPPORTED_Y$2),function(e){e[e.ZegoPlaybackSuccess=0]="ZegoPlaybackSuccess",e[e.ZegoPlaybackError=9001e3]="ZegoPlaybackError",e[e.ZegoPlaybackInitErrorInternal=9001001]="ZegoPlaybackInitErrorInternal",e[e.ZegoPlaybackErrorLoaded=9001002]="ZegoPlaybackErrorLoaded",e[e.ZegoPlaybackErrorNotLoad=9001003]="ZegoPlaybackErrorNotLoad",e[e.ZegoPlaybackErrorNoHaveSEI=9002001]="ZegoPlaybackErrorNoHaveSEI",e[e.ZegoPlaybackErrorGetMeta=9002002]="ZegoPlaybackErrorGetMeta",e[e.ZegoPlaybackErrorGetWbCmd=9002003]="ZegoPlaybackErrorGetWbCmd",e[e.ZegoPlaybackErrorGetCustomCmd=9002004]="ZegoPlaybackErrorGetCustomCmd",e[e.ZegoPlaybackErrorGetSelfCmd=9002005]="ZegoPlaybackErrorGetSelfCmd",e[e.ZegoPlaybackErrorGetIMCmd=9002006]="ZegoPlaybackErrorGetIMCmd",e[e.ZegoPlaybackErrorOnPlaying=9003001]="ZegoPlaybackErrorOnPlaying",e[e.ZegoPlaybackErrorSeek=9003002]="ZegoPlaybackErrorSeek",e[e.ZegoPlaybackErrorSeekMore=9003003]="ZegoPlaybackErrorSeekMore",e[e.ZegoPlaybackErrorNoPlaySeek=9003004]="ZegoPlaybackErrorNoPlaySeek"}(ZegoPlaybackError||(ZegoPlaybackError={}));var ErrorCodeData=(_a$1={},_a$1[ZegoPlaybackError.ZegoPlaybackSuccess]="æ§è¡æå",_a$1[ZegoPlaybackError.ZegoPlaybackInitErrorInternal]="åå§åå¤±è´¥",_a$1[ZegoPlaybackError.ZegoPlaybackErrorLoaded]="å è½½å½å¶æ°æ®å¤±è´¥",_a$1[ZegoPlaybackError.ZegoPlaybackErrorNotLoad]="è¿æªå è½½å½å¶æ°æ®",_a$1[ZegoPlaybackError.ZegoPlaybackErrorNoHaveSEI]="å­å¨æ²¡æSEIçæµ",_a$1[ZegoPlaybackError.ZegoPlaybackErrorGetMeta]="è·åmetaæä»¶å¤±è´¥",_a$1[ZegoPlaybackError.ZegoPlaybackErrorGetWbCmd]="è·åç½æ¿ä¿¡ä»¤å¤±è´¥",_a$1[ZegoPlaybackError.ZegoPlaybackErrorGetCustomCmd]="è·åå®¢æ·èªå®ä¹ä¿¡ä»¤å¤±è´¥",_a$1[ZegoPlaybackError.ZegoPlaybackErrorGetSelfCmd]="è·ååé¨ä¿¡ä»¤å¤±è´¥",_a$1[ZegoPlaybackError.ZegoPlaybackErrorGetIMCmd]="è·åIMä¿¡ä»¤å¤±è´¥",_a$1[ZegoPlaybackError.ZegoPlaybackErrorOnPlaying]="æ­£å¨æ­æ¾ä¸­ï¼è¯·å¿å è½½",_a$1[ZegoPlaybackError.ZegoPlaybackErrorSeek]="è·³è½¬å°éæ³æ¶é´å¼",_a$1[ZegoPlaybackError.ZegoPlaybackErrorSeekMore]="è·³è½¬å¤ªé¢ç¹",_a$1[ZegoPlaybackError.ZegoPlaybackErrorNoPlaySeek]="æªå¼å§æ­æ¾ï¼æèæ­æ¾ç»æï¼è·³è½¬æ æ",_a$1),transError=function(e,t,r){return{code:e,message:t=ErrorCodeData[e]&&r&&t?t:ErrorCodeData[e]||t||ErrorCodeData[ZegoPlaybackError.ZegoPlaybackInitErrorInternal]}},ZegoEventName,PlayState,LayoutMode,ChangeType,MediaStatus,PushCommand,ModAction,ZegoPrefixName,LayoutSuffixName,LayoutEvent;!function(e){e.loadComplete="loadComplete",e.mediaStreamStart="mediaStreamStart",e.mediaStreamStop="mediaStreamStop",e.whiteboardStreamStart="whiteboardStreamStart",e.whiteboardStreamStop="whiteboardStreamStop",e.whiteboardSwitch="whiteboardSwitch",e.layoutChange="layoutChange",e.playStateUpdate="playStateUpdate",e.playingProcess="playingProcess",e.customCommandUpdate="customCommandUpdate",e.error="error"}(ZegoEventName||(ZegoEventName={})),function(e){e[e.NoPlay=0]="NoPlay",e[e.Playing=1]="Playing",e[e.Pausing=2]="Pausing",e[e.PlayEnded=3]="PlayEnded"}(PlayState||(PlayState={})),function(e){e[e.custom=1]="custom",e[e.split=2]="split",e[e.horizontal=3]="horizontal",e[e.vertical=4]="vertical",e[e.float=5]="float"}(LayoutMode||(LayoutMode={})),function(e){e[e.whiteboard=1]="whiteboard",e[e.layout=2]="layout"}(ChangeType||(ChangeType={})),function(e){e[e.start=1]="start",e[e.playing=2]="playing",e[e.end=3]="end"}(MediaStatus||(MediaStatus={})),function(e){e[e.None=0]="None",e[e.setRoom=291001]="setRoom",e[e.SetUser=291002]="SetUser",e[e.JoinLive=291003]="JoinLive",e[e.SetMod=291101]="SetMod",e[e.DrawGraphics=291201]="DrawGraphics",e[e.ClearGraphics=291202]="ClearGraphics",e[e.DrawPageGraphics=291203]="DrawPageGraphics",e[e.ClearPageGraphics=291204]="ClearPageGraphics",e[e.Qaa=291401]="Qaa",e[e.SetRoomAuth=291502]="SetRoomAuth",e[e.setUserAuth=291501]="setUserAuth"}(PushCommand||(PushCommand={})),function(e){e[e.Add=1]="Add",e[e.Removed=2]="Removed",e[e.Modify=3]="Modify"}(ModAction||(ModAction={})),function(e){e.Media="zego-playback-media",e.Layout="zego-playback-content",e.Whiteboard="zego-playback-whiteboard"}(ZegoPrefixName||(ZegoPrefixName={})),function(e){e.Layout="layout",e.Main="main",e.Ele="ele",e.Item="item"}(LayoutSuffixName||(LayoutSuffixName={})),function(e){e.whiteboardChange="whiteboardChange"}(LayoutEvent||(LayoutEvent={}));var wellKnownSymbol$l=wellKnownSymbol$r,TO_STRING_TAG$4=wellKnownSymbol$l("toStringTag"),test$2={};test$2[TO_STRING_TAG$4]="z";var toStringTagSupport="[object z]"===String(test$2),TO_STRING_TAG_SUPPORT$2=toStringTagSupport,classofRaw=classofRaw$1,wellKnownSymbol$k=wellKnownSymbol$r,TO_STRING_TAG$3=wellKnownSymbol$k("toStringTag"),CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}()),tryGet=function(e,t){try{return e[t]}catch(e){}},classof$8=TO_STRING_TAG_SUPPORT$2?classofRaw:function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=tryGet(t=Object(e),TO_STRING_TAG$3))?r:CORRECT_ARGUMENTS?classofRaw(t):"Object"==(i=classofRaw(t))&&"function"==typeof t.callee?"Arguments":i},TO_STRING_TAG_SUPPORT$1=toStringTagSupport,classof$7=classof$8,objectToString=TO_STRING_TAG_SUPPORT$1?{}.toString:function(){return"[object "+classof$7(this)+"]"},TO_STRING_TAG_SUPPORT=toStringTagSupport,redefine$c=redefine$f.exports,toString$1=objectToString;TO_STRING_TAG_SUPPORT||redefine$c(Object.prototype,"toString",toString$1,{unsafe:!0});var global$s=global$E,nativePromiseConstructor=global$s.Promise,redefine$b=redefine$f.exports,redefineAll$3=function(e,t,r){for(var i in t)redefine$b(e,i,t[i],r);return e},isObject$e=isObject$l,aPossiblePrototype$1=function(e){if(!isObject$e(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e},anObject$b=anObject$j,aPossiblePrototype=aPossiblePrototype$1,objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,i){return anObject$b(r),aPossiblePrototype(i),t?e.call(r,i):r.__proto__=i,r}}():void 0),defineProperty$a=objectDefineProperty.f,has$a=has$h,wellKnownSymbol$j=wellKnownSymbol$r,TO_STRING_TAG$2=wellKnownSymbol$j("toStringTag"),setToStringTag$9=function(e,t,r){e&&!has$a(e=r?e:e.prototype,TO_STRING_TAG$2)&&defineProperty$a(e,TO_STRING_TAG$2,{configurable:!0,value:t})},getBuiltIn$4=getBuiltIn$8,definePropertyModule$3=objectDefineProperty,wellKnownSymbol$i=wellKnownSymbol$r,DESCRIPTORS$e=descriptors,SPECIES$3=wellKnownSymbol$i("species"),setSpecies$4=function(e){var t=getBuiltIn$4(e),r=definePropertyModule$3.f;DESCRIPTORS$e&&t&&!t[SPECIES$3]&&r(t,SPECIES$3,{configurable:!0,get:function(){return this}})},anInstance$5=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e},iterators={},wellKnownSymbol$h=wellKnownSymbol$r,Iterators$4=iterators,ITERATOR$8=wellKnownSymbol$h("iterator"),ArrayPrototype=Array.prototype,isArrayIteratorMethod$3=function(e){return void 0!==e&&(Iterators$4.Array===e||ArrayPrototype[ITERATOR$8]===e)},classof$6=classof$8,Iterators$3=iterators,wellKnownSymbol$g=wellKnownSymbol$r,ITERATOR$7=wellKnownSymbol$g("iterator"),getIteratorMethod$5=function(e){if(null!=e)return e[ITERATOR$7]||e["@@iterator"]||Iterators$3[classof$6(e)]},anObject$a=anObject$j,iteratorClose$2=function(e){var t=e.return;if(void 0!==t)return anObject$a(t.call(e)).value},anObject$9=anObject$j,isArrayIteratorMethod$2=isArrayIteratorMethod$3,toLength$l=toLength$p,bind$6=functionBindContext,getIteratorMethod$4=getIteratorMethod$5,iteratorClose$1=iteratorClose$2,Result=function(e,t){this.stopped=e,this.result=t},iterate$1=function(e,t,r){var i,n,o,a,s,l,u,c=r&&r.that,d=!(!r||!r.AS_ENTRIES),p=!(!r||!r.IS_ITERATOR),h=!(!r||!r.INTERRUPTED),f=bind$6(t,c,1+d+h),y=function(e){return i&&iteratorClose$1(i),new Result(!0,e)},m=function(e){return d?(anObject$9(e),h?f(e[0],e[1],y):f(e[0],e[1])):h?f(e,y):f(e)};if(p)i=e;else{if("function"!=typeof(n=getIteratorMethod$4(e)))throw TypeError("Target is not iterable");if(isArrayIteratorMethod$2(n)){for(o=0,a=toLength$l(e.length);a>o;o++)if((s=m(e[o]))&&s instanceof Result)return s;return new Result(!1)}i=n.call(e)}for(l=i.next;!(u=l.call(i)).done;){try{s=m(u.value)}catch(e){throw iteratorClose$1(i),e}if("object"==typeof s&&s&&s instanceof Result)return s}return new Result(!1)},wellKnownSymbol$f=wellKnownSymbol$r,ITERATOR$6=wellKnownSymbol$f("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$6]=function(){return this},Array.from(iteratorWithReturn,(function(){throw 2}))}catch(e){}var checkCorrectnessOfIteration$3=function(e,t){if(!t&&!SAFE_CLOSING)return!1;var r=!1;try{var i={};i[ITERATOR$6]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r},userAgent$5=engineUserAgent,engineIsIos=/(?:iphone|ipod|ipad).*applewebkit/i.test(userAgent$5),classof$5=classofRaw$1,global$r=global$E,engineIsNode="process"==classof$5(global$r.process),global$q=global$E,fails$r=fails$z,bind$5=functionBindContext,html=html$2,createElement=documentCreateElement$1,IS_IOS$1=engineIsIos,IS_NODE$3=engineIsNode,location=global$q.location,set$1=global$q.setImmediate,clear=global$q.clearImmediate,process$2=global$q.process,MessageChannel$1=global$q.MessageChannel,Dispatch=global$q.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port,run=function(e){if(queue.hasOwnProperty(e)){var t=queue[e];delete queue[e],t()}},runner=function(e){return function(){run(e)}},listener=function(e){run(e.data)},post=function(e){global$q.postMessage(e+"",location.protocol+"//"+location.host)};set$1&&clear||(set$1=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return queue[++counter]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},defer(counter),counter},clear=function(e){delete queue[e]},IS_NODE$3?defer=function(e){process$2.nextTick(runner(e))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(runner(e))}:MessageChannel$1&&!IS_IOS$1?(channel=new MessageChannel$1,port=channel.port2,channel.port1.onmessage=listener,defer=bind$5(port.postMessage,port,1)):global$q.addEventListener&&"function"==typeof postMessage&&!global$q.importScripts&&location&&"file:"!==location.protocol&&!fails$r(post)?(defer=post,global$q.addEventListener("message",listener,!1)):defer=ONREADYSTATECHANGE in createElement("script")?function(e){html.appendChild(createElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(e)}}:function(e){setTimeout(runner(e),0)});var task$1={set:set$1,clear:clear},userAgent$4=engineUserAgent,engineIsWebosWebkit=/web0s(?!.*chrome)/i.test(userAgent$4),global$p=global$E,getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,macrotask=task$1.set,IS_IOS=engineIsIos,IS_WEBOS_WEBKIT=engineIsWebosWebkit,IS_NODE$2=engineIsNode,MutationObserver=global$p.MutationObserver||global$p.WebKitMutationObserver,document$2=global$p.document,process$1=global$p.process,Promise$1=global$p.Promise,queueMicrotaskDescriptor=getOwnPropertyDescriptor$1(global$p,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value,flush,head,last,notify$1,toggle,node,promise,then;queueMicrotask||(flush=function(){var e,t;for(IS_NODE$2&&(e=process$1.domain)&&e.exit();head;){t=head.fn,head=head.next;try{t()}catch(e){throw head?notify$1():last=void 0,e}}last=void 0,e&&e.enter()},IS_IOS||IS_NODE$2||IS_WEBOS_WEBKIT||!MutationObserver||!document$2?Promise$1&&Promise$1.resolve?(promise=Promise$1.resolve(void 0),promise.constructor=Promise$1,then=promise.then,notify$1=function(){then.call(promise,flush)}):notify$1=IS_NODE$2?function(){process$1.nextTick(flush)}:function(){macrotask.call(global$p,flush)}:(toggle=!0,node=document$2.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),notify$1=function(){node.data=toggle=!toggle}));var microtask$1=queueMicrotask||function(e){var t={fn:e,next:void 0};last&&(last.next=t),head||(head=t,notify$1()),last=t},newPromiseCapability$2={},aFunction$5=aFunction$8,PromiseCapability=function(e){var t,r;this.promise=new e((function(e,i){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=i})),this.resolve=aFunction$5(t),this.reject=aFunction$5(r)};newPromiseCapability$2.f=function(e){return new PromiseCapability(e)};var anObject$8=anObject$j,isObject$d=isObject$l,newPromiseCapability$1=newPromiseCapability$2,promiseResolve$2=function(e,t){if(anObject$8(e),isObject$d(t)&&t.constructor===e)return t;var r=newPromiseCapability$1.f(e);return(0,r.resolve)(t),r.promise},global$o=global$E,hostReportErrors$1=function(e,t){var r=global$o.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))},perform$1=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},engineIsBrowser="object"==typeof window,$$N=_export,global$n=global$E,getBuiltIn$3=getBuiltIn$8,NativePromise$1=nativePromiseConstructor,redefine$a=redefine$f.exports,redefineAll$2=redefineAll$3,setPrototypeOf$6=objectSetPrototypeOf,setToStringTag$8=setToStringTag$9,setSpecies$3=setSpecies$4,isObject$c=isObject$l,aFunction$4=aFunction$8,anInstance$4=anInstance$5,inspectSource=inspectSource$3,iterate=iterate$1,checkCorrectnessOfIteration$2=checkCorrectnessOfIteration$3,speciesConstructor$6=speciesConstructor$8,task=task$1.set,microtask=microtask$1,promiseResolve$1=promiseResolve$2,hostReportErrors=hostReportErrors$1,newPromiseCapabilityModule=newPromiseCapability$2,perform=perform$1,InternalStateModule$7=internalState,isForced$2=isForced_1,wellKnownSymbol$e=wellKnownSymbol$r,IS_BROWSER=engineIsBrowser,IS_NODE$1=engineIsNode,V8_VERSION$2=engineV8Version,SPECIES$2=wellKnownSymbol$e("species"),PROMISE="Promise",getInternalState$5=InternalStateModule$7.get,setInternalState$7=InternalStateModule$7.set,getInternalPromiseState=InternalStateModule$7.getterFor(PROMISE),NativePromisePrototype=NativePromise$1&&NativePromise$1.prototype,PromiseConstructor=NativePromise$1,PromiseConstructorPrototype=NativePromisePrototype,TypeError$1=global$n.TypeError,document$1=global$n.document,process=global$n.process,newPromiseCapability=newPromiseCapabilityModule.f,newGenericPromiseCapability=newPromiseCapability,DISPATCH_EVENT=!!(document$1&&document$1.createEvent&&global$n.dispatchEvent),NATIVE_REJECTION_EVENT="function"==typeof PromiseRejectionEvent,UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,SUBCLASSING=!1,Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,FORCED$a=isForced$2(PROMISE,(function(){var e=inspectSource(PromiseConstructor)!==String(PromiseConstructor);if(!e&&66===V8_VERSION$2)return!0;if(V8_VERSION$2>=51&&/native code/.test(PromiseConstructor))return!1;var t=new PromiseConstructor((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(t.constructor={})[SPECIES$2]=r,!(SUBCLASSING=t.then((function(){}))instanceof r)||!e&&IS_BROWSER&&!NATIVE_REJECTION_EVENT})),INCORRECT_ITERATION$1=FORCED$a||!checkCorrectnessOfIteration$2((function(e){PromiseConstructor.all(e).catch((function(){}))})),isThenable=function(e){var t;return!(!isObject$c(e)||"function"!=typeof(t=e.then))&&t},notify=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;microtask((function(){for(var i=e.value,n=e.state==FULFILLED,o=0;r.length>o;){var a,s,l,u=r[o++],c=n?u.ok:u.fail,d=u.resolve,p=u.reject,h=u.domain;try{c?(n||(e.rejection===UNHANDLED&&onHandleUnhandled(e),e.rejection=HANDLED),!0===c?a=i:(h&&h.enter(),a=c(i),h&&(h.exit(),l=!0)),a===u.promise?p(TypeError$1("Promise-chain cycle")):(s=isThenable(a))?s.call(a,d,p):d(a)):p(i)}catch(e){h&&!l&&h.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&onUnhandled(e)}))}},dispatchEvent=function(e,t,r){var i,n;DISPATCH_EVENT?((i=document$1.createEvent("Event")).promise=t,i.reason=r,i.initEvent(e,!1,!0),global$n.dispatchEvent(i)):i={promise:t,reason:r},!NATIVE_REJECTION_EVENT&&(n=global$n["on"+e])?n(i):e===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",r)},onUnhandled=function(e){task.call(global$n,(function(){var t,r=e.facade,i=e.value;if(isUnhandled(e)&&(t=perform((function(){IS_NODE$1?process.emit("unhandledRejection",i,r):dispatchEvent(UNHANDLED_REJECTION,r,i)})),e.rejection=IS_NODE$1||isUnhandled(e)?UNHANDLED:HANDLED,t.error))throw t.value}))},isUnhandled=function(e){return e.rejection!==HANDLED&&!e.parent},onHandleUnhandled=function(e){task.call(global$n,(function(){var t=e.facade;IS_NODE$1?process.emit("rejectionHandled",t):dispatchEvent(REJECTION_HANDLED,t,e.value)}))},bind$4=function(e,t,r){return function(i){e(t,i,r)}},internalReject=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=REJECTED,notify(e,!0))},internalResolve=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw TypeError$1("Promise can't be resolved itself");var i=isThenable(t);i?microtask((function(){var r={done:!1};try{i.call(t,bind$4(internalResolve,r,e),bind$4(internalReject,r,e))}catch(t){internalReject(r,t,e)}})):(e.value=t,e.state=FULFILLED,notify(e,!1))}catch(t){internalReject({done:!1},t,e)}}};if(FORCED$a&&(PromiseConstructor=function(e){anInstance$4(this,PromiseConstructor,PROMISE),aFunction$4(e),Internal.call(this);var t=getInternalState$5(this);try{e(bind$4(internalResolve,t),bind$4(internalReject,t))}catch(e){internalReject(t,e)}},PromiseConstructorPrototype=PromiseConstructor.prototype,Internal=function(e){setInternalState$7(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:PENDING,value:void 0})},Internal.prototype=redefineAll$2(PromiseConstructorPrototype,{then:function(e,t){var r=getInternalPromiseState(this),i=newPromiseCapability(speciesConstructor$6(this,PromiseConstructor));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=IS_NODE$1?process.domain:void 0,r.parent=!0,r.reactions.push(i),r.state!=PENDING&&notify(r,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),OwnPromiseCapability=function(){var e=new Internal,t=getInternalState$5(e);this.promise=e,this.resolve=bind$4(internalResolve,t),this.reject=bind$4(internalReject,t)},newPromiseCapabilityModule.f=newPromiseCapability=function(e){return e===PromiseConstructor||e===PromiseWrapper?new OwnPromiseCapability(e):newGenericPromiseCapability(e)},"function"==typeof NativePromise$1&&NativePromisePrototype!==Object.prototype)){nativeThen=NativePromisePrototype.then,SUBCLASSING||(redefine$a(NativePromisePrototype,"then",(function(e,t){var r=this;return new PromiseConstructor((function(e,t){nativeThen.call(r,e,t)})).then(e,t)}),{unsafe:!0}),redefine$a(NativePromisePrototype,"catch",PromiseConstructorPrototype.catch,{unsafe:!0}));try{delete NativePromisePrototype.constructor}catch(e){}setPrototypeOf$6&&setPrototypeOf$6(NativePromisePrototype,PromiseConstructorPrototype)}$$N({global:!0,wrap:!0,forced:FORCED$a},{Promise:PromiseConstructor}),setToStringTag$8(PromiseConstructor,PROMISE,!1),setSpecies$3(PROMISE),PromiseWrapper=getBuiltIn$3(PROMISE),$$N({target:PROMISE,stat:!0,forced:FORCED$a},{reject:function(e){var t=newPromiseCapability(this);return t.reject.call(void 0,e),t.promise}}),$$N({target:PROMISE,stat:!0,forced:FORCED$a},{resolve:function(e){return promiseResolve$1(this,e)}}),$$N({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION$1},{all:function(e){var t=this,r=newPromiseCapability(t),i=r.resolve,n=r.reject,o=perform((function(){var r=aFunction$4(t.resolve),o=[],a=0,s=1;iterate(e,(function(e){var l=a++,u=!1;o.push(void 0),s++,r.call(t,e).then((function(e){u||(u=!0,o[l]=e,--s||i(o))}),n)})),--s||i(o)}));return o.error&&n(o.value),r.promise},race:function(e){var t=this,r=newPromiseCapability(t),i=r.reject,n=perform((function(){var n=aFunction$4(t.resolve);iterate(e,(function(e){n.call(t,e).then(r.resolve,i)}))}));return n.error&&i(n.value),r.promise}});var fails$q=fails$z,wellKnownSymbol$d=wellKnownSymbol$r,V8_VERSION$1=engineV8Version,SPECIES$1=wellKnownSymbol$d("species"),arrayMethodHasSpeciesSupport$5=function(e){return V8_VERSION$1>=51||!fails$q((function(){var t=[];return(t.constructor={})[SPECIES$1]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},$$M=_export,$filter$1=arrayIteration.filter,arrayMethodHasSpeciesSupport$4=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT$3=arrayMethodHasSpeciesSupport$4("filter");$$M({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$3},{filter:function(e){return $filter$1(this,e,arguments.length>1?arguments[1]:void 0)}});var $$L=_export,$map$1=arrayIteration.map,arrayMethodHasSpeciesSupport$3=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT$2=arrayMethodHasSpeciesSupport$3("map");$$L({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$2},{map:function(e){return $map$1(this,e,arguments.length>1?arguments[1]:void 0)}});var fails$p=fails$z,arrayMethodIsStrict$8=function(e,t){var r=[][e];return!!r&&fails$p((function(){r.call(null,t||function(){throw 1},1)}))},$forEach$2=arrayIteration.forEach,arrayMethodIsStrict$7=arrayMethodIsStrict$8,STRICT_METHOD$7=arrayMethodIsStrict$7("forEach"),arrayForEach=STRICT_METHOD$7?[].forEach:function(e){return $forEach$2(this,e,arguments.length>1?arguments[1]:void 0)},$$K=_export,forEach$2=arrayForEach;$$K({target:"Array",proto:!0,forced:[].forEach!=forEach$2},{forEach:forEach$2});var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},global$m=global$E,DOMIterables$1=domIterables,forEach$1=arrayForEach,createNonEnumerableProperty$7=createNonEnumerableProperty$d;for(var COLLECTION_NAME$1 in DOMIterables$1){var Collection$1=global$m[COLLECTION_NAME$1],CollectionPrototype$1=Collection$1&&Collection$1.prototype;if(CollectionPrototype$1&&CollectionPrototype$1.forEach!==forEach$1)try{createNonEnumerableProperty$7(CollectionPrototype$1,"forEach",forEach$1)}catch(e){CollectionPrototype$1.forEach=forEach$1}}var floor$7=Math.floor,mergeSort=function(e,t){var r=e.length,i=floor$7(r/2);return r<8?insertionSort(e,t):merge(mergeSort(e.slice(0,i),t),mergeSort(e.slice(i),t),t)},insertionSort=function(e,t){for(var r,i,n=e.length,o=1;o<n;){for(i=o,r=e[o];i&&t(e[i-1],r)>0;)e[i]=e[--i];i!==o++&&(e[i]=r)}return e},merge=function(e,t,r){for(var i=e.length,n=t.length,o=0,a=0,s=[];o<i||a<n;)o<i&&a<n?s.push(r(e[o],t[a])<=0?e[o++]:t[a++]):s.push(o<i?e[o++]:t[a++]);return s},arraySort=mergeSort,userAgent$3=engineUserAgent,firefox=userAgent$3.match(/firefox\/(\d+)/i),engineFfVersion=!!firefox&&+firefox[1],UA=engineUserAgent,engineIsIeOrEdge=/MSIE|Trident/.test(UA),userAgent$2=engineUserAgent,webkit=userAgent$2.match(/AppleWebKit\/(\d+)\./),engineWebkitVersion=!!webkit&&+webkit[1],$$J=_export,aFunction$3=aFunction$8,toObject$e=toObject$h,toLength$k=toLength$p,fails$o=fails$z,internalSort$1=arraySort,arrayMethodIsStrict$6=arrayMethodIsStrict$8,FF$1=engineFfVersion,IE_OR_EDGE$1=engineIsIeOrEdge,V8$1=engineV8Version,WEBKIT$1=engineWebkitVersion,test$1=[],nativeSort$1=test$1.sort,FAILS_ON_UNDEFINED=fails$o((function(){test$1.sort(void 0)})),FAILS_ON_NULL=fails$o((function(){test$1.sort(null)})),STRICT_METHOD$6=arrayMethodIsStrict$6("sort"),STABLE_SORT$1=!fails$o((function(){if(V8$1)return V8$1<70;if(!(FF$1&&FF$1>3)){if(IE_OR_EDGE$1)return!0;if(WEBKIT$1)return WEBKIT$1<603;var e,t,r,i,n="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(i=0;i<47;i++)test$1.push({k:t+i,v:r})}for(test$1.sort((function(e,t){return t.v-e.v})),i=0;i<test$1.length;i++)t=test$1[i].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}})),FORCED$9=FAILS_ON_UNDEFINED||!FAILS_ON_NULL||!STRICT_METHOD$6||!STABLE_SORT$1,getSortCompare$1=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:String(t)>String(r)?1:-1}};$$J({target:"Array",proto:!0,forced:FORCED$9},{sort:function(e){void 0!==e&&aFunction$3(e);var t=toObject$e(this);if(STABLE_SORT$1)return void 0===e?nativeSort$1.call(t):nativeSort$1.call(t,e);var r,i,n=[],o=toLength$k(t.length);for(i=0;i<o;i++)i in t&&n.push(t[i]);for(r=(n=internalSort$1(n,getSortCompare$1(e))).length,i=0;i<r;)t[i]=n[i++];for(;i<o;)delete t[i++];return t}});var fails$n=fails$z,correctPrototypeGetter=!fails$n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),has$9=has$h,toObject$d=toObject$h,sharedKey$1=sharedKey$4,CORRECT_PROTOTYPE_GETTER=correctPrototypeGetter,IE_PROTO=sharedKey$1("IE_PROTO"),ObjectPrototype$3=Object.prototype,objectGetPrototypeOf=CORRECT_PROTOTYPE_GETTER?Object.getPrototypeOf:function(e){return e=toObject$d(e),has$9(e,IE_PROTO)?e[IE_PROTO]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ObjectPrototype$3:null},fails$m=fails$z,getPrototypeOf$3=objectGetPrototypeOf,createNonEnumerableProperty$6=createNonEnumerableProperty$d,has$8=has$h,wellKnownSymbol$c=wellKnownSymbol$r,ITERATOR$5=wellKnownSymbol$c("iterator"),BUGGY_SAFARI_ITERATORS$1=!1,returnThis$2=function(){return this},IteratorPrototype$2,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=getPrototypeOf$3(getPrototypeOf$3(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype$2=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS$1=!0);var NEW_ITERATOR_PROTOTYPE=null==IteratorPrototype$2||fails$m((function(){var e={};return IteratorPrototype$2[ITERATOR$5].call(e)!==e}));NEW_ITERATOR_PROTOTYPE&&(IteratorPrototype$2={}),has$8(IteratorPrototype$2,ITERATOR$5)||createNonEnumerableProperty$6(IteratorPrototype$2,ITERATOR$5,returnThis$2);var iteratorsCore={IteratorPrototype:IteratorPrototype$2,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$1},IteratorPrototype$1=iteratorsCore.IteratorPrototype,create$6=objectCreate,createPropertyDescriptor$4=createPropertyDescriptor$7,setToStringTag$7=setToStringTag$9,Iterators$2=iterators,returnThis$1=function(){return this},createIteratorConstructor$2=function(e,t,r){var i=t+" Iterator";return e.prototype=create$6(IteratorPrototype$1,{next:createPropertyDescriptor$4(1,r)}),setToStringTag$7(e,i,!1),Iterators$2[i]=returnThis$1,e},$$I=_export,createIteratorConstructor$1=createIteratorConstructor$2,getPrototypeOf$2=objectGetPrototypeOf,setPrototypeOf$5=objectSetPrototypeOf,setToStringTag$6=setToStringTag$9,createNonEnumerableProperty$5=createNonEnumerableProperty$d,redefine$9=redefine$f.exports,wellKnownSymbol$b=wellKnownSymbol$r,Iterators$1=iterators,IteratorsCore=iteratorsCore,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$4=wellKnownSymbol$b("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this},defineIterator$2=function(e,t,r,i,n,o,a){createIteratorConstructor$1(r,t,i);var s,l,u,c=function(e){if(e===n&&y)return y;if(!BUGGY_SAFARI_ITERATORS&&e in h)return h[e];switch(e){case KEYS:case VALUES:case ENTRIES:return function(){return new r(this,e)}}return function(){return new r(this)}},d=t+" Iterator",p=!1,h=e.prototype,f=h[ITERATOR$4]||h["@@iterator"]||n&&h[n],y=!BUGGY_SAFARI_ITERATORS&&f||c(n),m="Array"==t&&h.entries||f;if(m&&(s=getPrototypeOf$2(m.call(new e)),IteratorPrototype!==Object.prototype&&s.next&&(getPrototypeOf$2(s)!==IteratorPrototype&&(setPrototypeOf$5?setPrototypeOf$5(s,IteratorPrototype):"function"!=typeof s[ITERATOR$4]&&createNonEnumerableProperty$5(s,ITERATOR$4,returnThis)),setToStringTag$6(s,d,!0))),n==VALUES&&f&&f.name!==VALUES&&(p=!0,y=function(){return f.call(this)}),h[ITERATOR$4]!==y&&createNonEnumerableProperty$5(h,ITERATOR$4,y),Iterators$1[t]=y,n)if(l={values:c(VALUES),keys:o?y:c(KEYS),entries:c(ENTRIES)},a)for(u in l)(BUGGY_SAFARI_ITERATORS||p||!(u in h))&&redefine$9(h,u,l[u]);else $$I({target:t,proto:!0,forced:BUGGY_SAFARI_ITERATORS||p},l);return l},toIndexedObject$5=toIndexedObject$9,addToUnscopables$3=addToUnscopables$5,Iterators=iterators,InternalStateModule$6=internalState,defineIterator$1=defineIterator$2,ARRAY_ITERATOR="Array Iterator",setInternalState$6=InternalStateModule$6.set,getInternalState$4=InternalStateModule$6.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator$1(Array,"Array",(function(e,t){setInternalState$6(this,{type:ARRAY_ITERATOR,target:toIndexedObject$5(e),index:0,kind:t})}),(function(){var e=getInternalState$4(this),t=e.target,r=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:i,done:!1}:"values"==r?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values");Iterators.Arguments=Iterators.Array,addToUnscopables$3("keys"),addToUnscopables$3("values"),addToUnscopables$3("entries");var charAt=stringMultibyte.charAt,InternalStateModule$5=internalState,defineIterator=defineIterator$2,STRING_ITERATOR="String Iterator",setInternalState$5=InternalStateModule$5.set,getInternalState$3=InternalStateModule$5.getterFor(STRING_ITERATOR);defineIterator(String,"String",(function(e){setInternalState$5(this,{type:STRING_ITERATOR,string:String(e),index:0})}),(function(){var e,t=getInternalState$3(this),r=t.string,i=t.index;return i>=r.length?{value:void 0,done:!0}:(e=charAt(r,i),t.index+=e.length,{value:e,done:!1})}));var global$l=global$E,DOMIterables=domIterables,ArrayIteratorMethods=es_array_iterator,createNonEnumerableProperty$4=createNonEnumerableProperty$d,wellKnownSymbol$a=wellKnownSymbol$r,ITERATOR$3=wellKnownSymbol$a("iterator"),TO_STRING_TAG$1=wellKnownSymbol$a("toStringTag"),ArrayValues=ArrayIteratorMethods.values;for(var COLLECTION_NAME in DOMIterables){var Collection=global$l[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype){if(CollectionPrototype[ITERATOR$3]!==ArrayValues)try{createNonEnumerableProperty$4(CollectionPrototype,ITERATOR$3,ArrayValues)}catch(e){CollectionPrototype[ITERATOR$3]=ArrayValues}if(CollectionPrototype[TO_STRING_TAG$1]||createNonEnumerableProperty$4(CollectionPrototype,TO_STRING_TAG$1,COLLECTION_NAME),DOMIterables[COLLECTION_NAME])for(var METHOD_NAME in ArrayIteratorMethods)if(CollectionPrototype[METHOD_NAME]!==ArrayIteratorMethods[METHOD_NAME])try{createNonEnumerableProperty$4(CollectionPrototype,METHOD_NAME,ArrayIteratorMethods[METHOD_NAME])}catch(e){CollectionPrototype[METHOD_NAME]=ArrayIteratorMethods[METHOD_NAME]}}}const version="3.6.1",VERSION=version,_hasatob="function"==typeof atob,_hasbtoa="function"==typeof btoa,_hasBuffer="function"==typeof Buffer,_TD="function"==typeof TextDecoder?new TextDecoder:void 0,_TE="function"==typeof TextEncoder?new TextEncoder:void 0,b64ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64chs=[...b64ch],b64tab=(e=>{let t={};return e.forEach(((e,r)=>t[e]=r)),t})(b64chs),b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_fromCC=String.fromCharCode.bind(String),_U8Afrom="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),_mkUriSafe=e=>e.replace(/[+\/]/g,(e=>"+"==e?"-":"_")).replace(/=+$/m,""),_tidyB64=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),btoaPolyfill=e=>{let t,r,i,n,o="";const a=e.length%3;for(let a=0;a<e.length;){if((r=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=r<<16|i<<8|n,o+=b64chs[t>>18&63]+b64chs[t>>12&63]+b64chs[t>>6&63]+b64chs[63&t]}return a?o.slice(0,a-3)+"===".substring(a):o},_btoa=_hasbtoa?e=>btoa(e):_hasBuffer?e=>Buffer.from(e,"binary").toString("base64"):btoaPolyfill,_fromUint8Array=_hasBuffer?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,i=e.length;r<i;r+=4096)t.push(_fromCC.apply(null,e.subarray(r,r+4096)));return _btoa(t.join(""))},fromUint8Array=(e,t=!1)=>t?_mkUriSafe(_fromUint8Array(e)):_fromUint8Array(e),cb_utob=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?_fromCC(192|t>>>6)+_fromCC(128|63&t):_fromCC(224|t>>>12&15)+_fromCC(128|t>>>6&63)+_fromCC(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return _fromCC(240|t>>>18&7)+_fromCC(128|t>>>12&63)+_fromCC(128|t>>>6&63)+_fromCC(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=e=>e.replace(re_utob,cb_utob),_encode=_hasBuffer?e=>Buffer.from(e,"utf8").toString("base64"):_TE?e=>_fromUint8Array(_TE.encode(e)):e=>_btoa(utob(e)),encode$1=(e,t=!1)=>t?_mkUriSafe(_encode(e)):_encode(e),encodeURI=e=>encode$1(e,!0),re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return _fromCC(55296+(t>>>10))+_fromCC(56320+(1023&t));case 3:return _fromCC((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return _fromCC((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=e=>e.replace(re_btou,cb_btou),atobPolyfill=e=>{if(e=e.replace(/\s+/g,""),!b64re.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,i,n="";for(let o=0;o<e.length;)t=b64tab[e.charAt(o++)]<<18|b64tab[e.charAt(o++)]<<12|(r=b64tab[e.charAt(o++)])<<6|(i=b64tab[e.charAt(o++)]),n+=64===r?_fromCC(t>>16&255):64===i?_fromCC(t>>16&255,t>>8&255):_fromCC(t>>16&255,t>>8&255,255&t);return n},_atob=_hasatob?e=>atob(_tidyB64(e)):_hasBuffer?e=>Buffer.from(e,"base64").toString("binary"):atobPolyfill,_toUint8Array=_hasBuffer?e=>_U8Afrom(Buffer.from(e,"base64")):e=>_U8Afrom(_atob(e),(e=>e.charCodeAt(0))),toUint8Array=e=>_toUint8Array(_unURI(e)),_decode=_hasBuffer?e=>Buffer.from(e,"base64").toString("utf8"):_TD?e=>_TD.decode(_toUint8Array(e)):e=>btou(_atob(e)),_unURI=e=>_tidyB64(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),decode=e=>_decode(_unURI(e)),isValid=e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/=+$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},_noEnum=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),extendString=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,_noEnum(t));e("fromBase64",(function(){return decode(this)})),e("toBase64",(function(e){return encode$1(this,e)})),e("toBase64URI",(function(){return encode$1(this,!0)})),e("toBase64URL",(function(){return encode$1(this,!0)})),e("toUint8Array",(function(){return toUint8Array(this)}))},extendUint8Array=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,_noEnum(t));e("toBase64",(function(e){return fromUint8Array(this,e)})),e("toBase64URI",(function(){return fromUint8Array(this,!0)})),e("toBase64URL",(function(){return fromUint8Array(this,!0)}))},extendBuiltins=()=>{extendString(),extendUint8Array()},gBase64={version:version,VERSION:VERSION,atob:_atob,atobPolyfill:atobPolyfill,btoa:_btoa,btoaPolyfill:btoaPolyfill,fromBase64:decode,toBase64:encode$1,encode:encode$1,encodeURI:encodeURI,encodeURL:encodeURI,utob:utob,btou:btou,decode:decode,isValid:isValid,fromUint8Array:fromUint8Array,toUint8Array:toUint8Array,extendString:extendString,extendUint8Array:extendUint8Array,extendBuiltins:extendBuiltins};var $$H=_export,$indexOf$1=arrayIncludes.indexOf,arrayMethodIsStrict$5=arrayMethodIsStrict$8,nativeIndexOf=[].indexOf,NEGATIVE_ZERO$1=!!nativeIndexOf&&1/[1].indexOf(1,-0)<0,STRICT_METHOD$5=arrayMethodIsStrict$5("indexOf");$$H({target:"Array",proto:!0,forced:NEGATIVE_ZERO$1||!STRICT_METHOD$5},{indexOf:function(e){return NEGATIVE_ZERO$1?nativeIndexOf.apply(this,arguments)||0:$indexOf$1(this,e,arguments.length>1?arguments[1]:void 0)}});var toPrimitive$3=toPrimitive$6,definePropertyModule$2=objectDefineProperty,createPropertyDescriptor$3=createPropertyDescriptor$7,createProperty$4=function(e,t,r){var i=toPrimitive$3(t);i in e?definePropertyModule$2.f(e,i,createPropertyDescriptor$3(0,r)):e[i]=r},$$G=_export,toAbsoluteIndex$5=toAbsoluteIndex$7,toInteger$7=toInteger$b,toLength$j=toLength$p,toObject$c=toObject$h,arraySpeciesCreate$1=arraySpeciesCreate$3,createProperty$3=createProperty$4,arrayMethodHasSpeciesSupport$2=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT$1=arrayMethodHasSpeciesSupport$2("splice"),max$2=Math.max,min$3=Math.min,MAX_SAFE_INTEGER$1=9007199254740991,MAXIMUM_ALLOWED_LENGTH_EXCEEDED="Maximum allowed length exceeded";$$G({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$1},{splice:function(e,t){var r,i,n,o,a,s,l=toObject$c(this),u=toLength$j(l.length),c=toAbsoluteIndex$5(e,u),d=arguments.length;if(0===d?r=i=0:1===d?(r=0,i=u-c):(r=d-2,i=min$3(max$2(toInteger$7(t),0),u-c)),u+r-i>MAX_SAFE_INTEGER$1)throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);for(n=arraySpeciesCreate$1(l,i),o=0;o<i;o++)(a=c+o)in l&&createProperty$3(n,o,l[a]);if(n.length=i,r<i){for(o=c;o<u-i;o++)s=o+r,(a=o+i)in l?l[s]=l[a]:delete l[s];for(o=u;o>u-i+r;o--)delete l[o-1]}else if(r>i)for(o=u-i;o>c;o--)s=o+r-1,(a=o+i-1)in l?l[s]=l[a]:delete l[s];for(o=0;o<r;o++)l[o+c]=arguments[o+2];return l.length=u-i+r,n}});var _eventemitter3_4_0_7_eventemitter3={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,i,o,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new n(i,o||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,i,n=[];if(0===this._eventsCount)return n;for(i in e=this._events)t.call(e,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,o=i.length,a=new Array(o);n<o;n++)a[n]=i[n].fn;return a},s.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},s.prototype.emit=function(e,t,i,n,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,n),!0;case 5:return c.fn.call(c.context,t,i,n,o),!0;case 6:return c.fn.call(c.context,t,i,n,o,a),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var p,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,i);break;case 4:c[u].fn.call(c[u].context,t,i,n);break;default:if(!l)for(p=1,l=new Array(d-1);p<d;p++)l[p-1]=arguments[p];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,i,n){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||n&&!s.once||i&&s.context!==i||a(this,o);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||n&&!s[l].once||i&&s[l].context!==i)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s}(_eventemitter3_4_0_7_eventemitter3);var EventEmitter$1=_eventemitter3_4_0_7_eventemitter3.exports,PlaybackEvent=function(e){function t(){var t,r=null!==e&&e.apply(this,arguments)||this;return r.customListenerList=((t={})[ZegoEventName.loadComplete]=[],t[ZegoEventName.mediaStreamStart]=[],t[ZegoEventName.mediaStreamStop]=[],t[ZegoEventName.whiteboardStreamStart]=[],t[ZegoEventName.whiteboardStreamStop]=[],t[ZegoEventName.whiteboardSwitch]=[],t[ZegoEventName.layoutChange]=[],t[ZegoEventName.playStateUpdate]=[],t[ZegoEventName.playingProcess]=[],t[ZegoEventName.customCommandUpdate]=[],t[ZegoEventName.error]=[],t),r}return __extends(t,e),t.prototype.bindCustomListener=function(e,t){return!!this.customListenerList[e]&&("function"==typeof t&&(-1==this.customListenerList[e].indexOf(t)&&this.customListenerList[e].push(t),!0))},t.prototype.deleteCustomListener=function(e,t){if(!this.customListenerList[e])return!1;var r=this.customListenerList[e];return t?r.splice(r.indexOf(t),1):this.customListenerList[e]=[],!0},t.prototype.actionCustomListener=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.customListenerList[e]&&this.customListenerList[e].forEach((function(e){e.apply(void 0,t)}))},t}(EventEmitter$1),playbackEvent=new PlaybackEvent,Parse=function(){function e(e,t){void 0===e&&(e=e),void 0===t&&(t=t),this.$store=e,this.$proto=t,this.playbackEvent=playbackEvent}return e.prototype.readFile=function(e){return e?new Promise((function(t,r){var i=new XMLHttpRequest;i.overrideMimeType("application/json"),i.open("GET",e,!0),i.onreadystatechange=function(){if(4===i.readyState)if(200==i.status){var e=i.responseText.split("\n").map((function(e){return e&&JSON.parse(e)})).filter((function(e){return!!e}));console.warn({text:i.responseText,v:e}),t(e)}else r()},i.send(null)})):Promise.resolve([])},e.prototype.parseWbData=function(){var e=this,t=this.$store.recordInfo.whiteboardInfo.whiteboard;try{t.forEach((function(t){var r=gBase64.toUint8Array(t.payload),i=e.$store.wbProtoMap[t.sub_cmd];t.payload=e.$proto.proto_edu_v1[i].decode(r)})),t.sort((function(e,t){return e.timestamp-t.timestamp}))}catch(e){var r=transError(ZegoPlaybackError.ZegoPlaybackErrorGetWbCmd);this.playbackEvent.actionCustomListener(ZegoEventName.error,r)}},e.prototype.load=function(e){return __awaiter(this,void 0,void 0,(function(){var t,r,i,n=this;return __generator(this,(function(o){switch(o.label){case 0:if(!e)return[2,!1];t=[e.whiteboard.url,e.internal_cmd.url,e.custom_cmd.url],o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Promise.all(t.map((function(e){return n.readFile(e)})))];case 2:return(r=o.sent())[0].map((function(e){e.timestamp=e.timestamp/1e6})),this.$store.metaInfo=e,this.$store.recordInfo.whiteboardInfo={whiteboard:r[0]},this.$store.recordInfo.layoutInfo=r[1],this.$store.recordInfo.customInfo=r[2],this.parseWbData(),[2,!0];case 3:return o.sent(),i=transError(ZegoPlaybackError.ZegoPlaybackErrorLoaded),this.playbackEvent.actionCustomListener(ZegoEventName.error,i),[2,i];case 4:return[2]}}))}))},e}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $$F=_export,global$k=global$E,userAgent$1=engineUserAgent,slice$1=[].slice,MSIE=/MSIE .\./.test(userAgent$1),wrap$1=function(e){return function(t,r){var i=arguments.length>2,n=i?slice$1.call(arguments,2):void 0;return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,n)}:t,r)}};$$F({global:!0,bind:!0,forced:MSIE},{setTimeout:wrap$1(global$k.setTimeout),setInterval:wrap$1(global$k.setInterval)});var $$E=_export,$findIndex$1=arrayIteration.findIndex,addToUnscopables$2=addToUnscopables$5,FIND_INDEX="findIndex",SKIPS_HOLES=!0;FIND_INDEX in[]&&Array(1)[FIND_INDEX]((function(){SKIPS_HOLES=!1})),$$E({target:"Array",proto:!0,forced:SKIPS_HOLES},{findIndex:function(e){return $findIndex$1(this,e,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables$2(FIND_INDEX);var $$D=_export,isObject$b=isObject$l,isArray$4=isArray$6,toAbsoluteIndex$4=toAbsoluteIndex$7,toLength$i=toLength$p,toIndexedObject$4=toIndexedObject$9,createProperty$2=createProperty$4,wellKnownSymbol$9=wellKnownSymbol$r,arrayMethodHasSpeciesSupport$1=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport$1("slice"),SPECIES=wellKnownSymbol$9("species"),nativeSlice=[].slice,max$1=Math.max;$$D({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT},{slice:function(e,t){var r,i,n,o=toIndexedObject$4(this),a=toLength$i(o.length),s=toAbsoluteIndex$4(e,a),l=toAbsoluteIndex$4(void 0===t?a:t,a);if(isArray$4(o)&&("function"!=typeof(r=o.constructor)||r!==Array&&!isArray$4(r.prototype)?isObject$b(r)&&null===(r=r[SPECIES])&&(r=void 0):r=void 0,r===Array||void 0===r))return nativeSlice.call(o,s,l);for(i=new(void 0===r?Array:r)(max$1(l-s,0)),n=0;s<l;s++,n++)s in o&&createProperty$2(i,n,o[s]);return i.length=n,i}});var DESCRIPTORS$d=descriptors,fails$l=fails$z,objectKeys$1=objectKeys$3,getOwnPropertySymbolsModule$1=objectGetOwnPropertySymbols,propertyIsEnumerableModule$1=objectPropertyIsEnumerable,toObject$b=toObject$h,IndexedObject$2=indexedObject,$assign=Object.assign,defineProperty$9=Object.defineProperty,objectAssign=!$assign||fails$l((function(){if(DESCRIPTORS$d&&1!==$assign({b:1},$assign(defineProperty$9({},"a",{enumerable:!0,get:function(){defineProperty$9(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!=$assign({},e)[r]||objectKeys$1($assign({},t)).join("")!=i}))?function(e,t){for(var r=toObject$b(e),i=arguments.length,n=1,o=getOwnPropertySymbolsModule$1.f,a=propertyIsEnumerableModule$1.f;i>n;)for(var s,l=IndexedObject$2(arguments[n++]),u=o?objectKeys$1(l).concat(o(l)):objectKeys$1(l),c=u.length,d=0;c>d;)s=u[d++],DESCRIPTORS$d&&!a.call(l,s)||(r[s]=l[s]);return r}:$assign,$$C=_export,assign$1=objectAssign;$$C({target:"Object",stat:!0,forced:Object.assign!==assign$1},{assign:assign$1});var $$B=_export,$includes$1=arrayIncludes.includes,addToUnscopables$1=addToUnscopables$5;$$B({target:"Array",proto:!0},{includes:function(e){return $includes$1(this,e,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables$1("includes");var isRegExp$1=isRegexp,notARegexp=function(e){if(isRegExp$1(e))throw TypeError("The method doesn't accept regular expressions");return e},wellKnownSymbol$8=wellKnownSymbol$r,MATCH$1=wellKnownSymbol$8("match"),correctIsRegexpLogic=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[MATCH$1]=!1,"/./"[e](t)}catch(e){}}return!1},$$A=_export,notARegExp=notARegexp,requireObjectCoercible$6=requireObjectCoercible$b,correctIsRegExpLogic=correctIsRegexpLogic;$$A({target:"String",proto:!0,forced:!correctIsRegExpLogic("includes")},{includes:function(e){return!!~String(requireObjectCoercible$6(this)).indexOf(notARegExp(e),arguments.length>1?arguments[1]:void 0)}});var $$z=_export,$some$1=arrayIteration.some,arrayMethodIsStrict$4=arrayMethodIsStrict$8,STRICT_METHOD$4=arrayMethodIsStrict$4("some");$$z({target:"Array",proto:!0,forced:!STRICT_METHOD$4},{some:function(e){return $some$1(this,e,arguments.length>1?arguments[1]:void 0)}});var $$y=_export,toObject$a=toObject$h,nativeKeys=objectKeys$3,fails$k=fails$z,FAILS_ON_PRIMITIVES$1=fails$k((function(){nativeKeys(1)}));$$y({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$1},{keys:function(e){return nativeKeys(toObject$a(e))}});var redefine$8=redefine$f.exports,DatePrototype=Date.prototype,INVALID_DATE="Invalid Date",TO_STRING$1="toString",nativeDateToString=DatePrototype[TO_STRING$1],getTime=DatePrototype.getTime;new Date(NaN)+""!=INVALID_DATE&&redefine$8(DatePrototype,TO_STRING$1,(function(){var e=getTime.call(this);return e==e?nativeDateToString.call(this):INVALID_DATE}));var $$x=_export,isArray$3=isArray$6,nativeReverse=[].reverse,test=[1,2];$$x({target:"Array",proto:!0,forced:String(test)===String(test.reverse())},{reverse:function(){return isArray$3(this)&&(this.length=this.length),nativeReverse.call(this)}});var whitespaces$4="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",requireObjectCoercible$5=requireObjectCoercible$b,whitespaces$3=whitespaces$4,whitespace="["+whitespaces$3+"]",ltrim=RegExp("^"+whitespace+whitespace+"*"),rtrim=RegExp(whitespace+whitespace+"*$"),createMethod$2=function(e){return function(t){var r=String(requireObjectCoercible$5(t));return 1&e&&(r=r.replace(ltrim,"")),2&e&&(r=r.replace(rtrim,"")),r}},stringTrim={start:createMethod$2(1),end:createMethod$2(2),trim:createMethod$2(3)},global$j=global$E,trim$2=stringTrim.trim,whitespaces$2=whitespaces$4,$parseInt=global$j.parseInt,hex=/^[+-]?0[Xx]/,FORCED$8=8!==$parseInt(whitespaces$2+"08")||22!==$parseInt(whitespaces$2+"0x16"),numberParseInt=FORCED$8?function(e,t){var r=trim$2(String(e));return $parseInt(r,t>>>0||(hex.test(r)?16:10))}:$parseInt,$$w=_export,parseIntImplementation=numberParseInt;$$w({global:!0,forced:parseInt!=parseIntImplementation},{parseInt:parseIntImplementation});var redefine$7=redefine$f.exports,anObject$7=anObject$j,fails$j=fails$z,flags=regexpFlags$1,TO_STRING="toString",RegExpPrototype$1=RegExp.prototype,nativeToString=RegExpPrototype$1[TO_STRING],NOT_GENERIC=fails$j((function(){return"/a/b"!=nativeToString.call({source:"a",flags:"b"})})),INCORRECT_NAME=nativeToString.name!=TO_STRING;(NOT_GENERIC||INCORRECT_NAME)&&redefine$7(RegExp.prototype,TO_STRING,(function(){var e=anObject$7(this),t=String(e.source),r=e.flags;return"/"+t+"/"+String(void 0===r&&e instanceof RegExp&&!("flags"in RegExpPrototype$1)?flags.call(e):r)}),{unsafe:!0});var classof$4=classofRaw$1,thisNumberValue$1=function(e){if("number"!=typeof e&&"Number"!=classof$4(e))throw TypeError("Incorrect invocation");return+e},toInteger$6=toInteger$b,requireObjectCoercible$4=requireObjectCoercible$b,stringRepeat=function(e){var t=String(requireObjectCoercible$4(this)),r="",i=toInteger$6(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(r+=t);return r},$$v=_export,toInteger$5=toInteger$b,thisNumberValue=thisNumberValue$1,repeat$1=stringRepeat,fails$i=fails$z,nativeToFixed=1..toFixed,floor$6=Math.floor,pow$2=function(e,t,r){return 0===t?r:t%2==1?pow$2(e,t-1,r*e):pow$2(e*e,t/2,r)},log$1=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t},multiply=function(e,t,r){for(var i=-1,n=r;++i<6;)n+=t*e[i],e[i]=n%1e7,n=floor$6(n/1e7)},divide=function(e,t){for(var r=6,i=0;--r>=0;)i+=e[r],e[r]=floor$6(i/t),i=i%t*1e7},dataToString=function(e){for(var t=6,r="";--t>=0;)if(""!==r||0===t||0!==e[t]){var i=String(e[t]);r=""===r?i:r+repeat$1.call("0",7-i.length)+i}return r},FORCED$7=nativeToFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!fails$i((function(){nativeToFixed.call({})}));function defaultEquals(e,t){return e===t}$$v({target:"Number",proto:!0,forced:FORCED$7},{toFixed:function(e){var t,r,i,n,o=thisNumberValue(this),a=toInteger$5(e),s=[0,0,0,0,0,0],l="",u="0";if(a<0||a>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(l="-",o=-o),o>1e-21)if(r=(t=log$1(o*pow$2(2,69,1))-69)<0?o*pow$2(2,-t,1):o/pow$2(2,t,1),r*=4503599627370496,(t=52-t)>0){for(multiply(s,0,r),i=a;i>=7;)multiply(s,1e7,0),i-=7;for(multiply(s,pow$2(10,i,1),0),i=t-1;i>=23;)divide(s,1<<23),i-=23;divide(s,1<<i),multiply(s,1,1),divide(s,2),u=dataToString(s)}else multiply(s,0,r),multiply(s,1<<-t,0),u=dataToString(s)+repeat$1.call("0",a);return u=a>0?l+((n=u.length)<=a?"0."+repeat$1.call("0",a-n)+u:u.slice(0,n-a)+"."+u.slice(n-a)):l+u}});var Node=function(e,t){this.element=e,this.next=t},DoublyNode=function(e){function t(t,r,i){var n=e.call(this,t,r)||this;return n.element=t,n.next=r,n.prev=i,n}return __extends(t,e),t}(Node),LinkedList=function(){function e(e){void 0===e&&(e=defaultEquals),this.equalsFn=e,this.count=0}return e.prototype.push=function(e){var t,r=new Node(e);null==this.head?this.head=r:(t=this.getNodeAt(this.size()-1))&&(t.next=r),this.count++},e.prototype.getNodeAt=function(e){if(e>=0&&e<=this.count){for(var t=this.head,r=0;r<e&&null!=t;r++)t=t.next;return t}},e.prototype.getElementAt=function(e){var t;return null===(t=this.getNodeAt(e))||void 0===t?void 0:t.element},e.prototype.insert=function(e,t){if(t>=0&&t<=this.count){var r=new Node(e);if(0===t){var i=this.head;r.next=i,this.head=r}else{var n=this.getNodeAt(t-1);r.next=null==n?void 0:n.next,n&&(n.next=r)}return this.count++,!0}return!1},e.prototype.removeAt=function(e){if(e>=0&&e<this.count){var t=this.head;if(0===e)this.head=null==t?void 0:t.next;else{var r=this.getNodeAt(e-1);t=null==r?void 0:r.next,r&&(r.next=null==t?void 0:t.next)}return this.count--,null==t?void 0:t.element}},e.prototype.remove=function(e){var t=this.indexOf(e);return this.removeAt(t)},e.prototype.indexOf=function(e){for(var t=this.head,r=0;r<this.size()&&null!=t;r++){if(this.equalsFn(e,t.element))return r;t=t.next}return-1},e.prototype.isEmpty=function(){return 0===this.size()},e.prototype.size=function(){return this.count},e.prototype.getHead=function(){return this.head},e.prototype.clear=function(){this.head=void 0,this.count=0},e.prototype.toString=function(){if(null==this.head)return"";for(var e=""+JSON.stringify(this.head.element),t=this.head.next,r=1;r<this.size()&&null!=t;r++)e=e+","+JSON.stringify(t.element),t=t.next;return e},e}(),DoublyLinkedList=function(e){function t(t){void 0===t&&(t=defaultEquals);var r=e.call(this,t)||this;return r.equalsFn=t,r}return __extends(t,e),t.prototype.push=function(e){var t=new DoublyNode(e);null==this.head?(this.head=t,this.tail=t):this.tail&&(this.tail.next=t,t.prev=this.tail,this.tail=t),this.count++},t.prototype.insert=function(e,t){if(t>=0&&t<=this.count){var r=new DoublyNode(e),i=this.head;if(0===t)null==this.head?(this.head=r,this.tail=r):(r.next=this.head,this.head.prev=r,this.head=r);else if(t===this.count)(i=this.tail)&&(i.next=r),r.prev=i,this.tail=r;else{var n=this.getNodeAt(t-1);i=null==n?void 0:n.next,r.next=i,n&&(n.next=r),i&&(i.prev=r),r.prev=n}return this.count++,!0}return!1},t.prototype.removeAt=function(e){var t;if(e>=0&&e<this.count){var r=this.head;if(0===e)this.head=null===(t=this.head)||void 0===t?void 0:t.next,1===this.count?this.tail=void 0:this.head&&(this.head.prev=void 0);else if(e===this.count-1)r=this.tail,this.tail=null==r?void 0:r.prev,this.tail&&(this.tail.next=void 0);else{var i=null==(r=this.getNodeAt(e))?void 0:r.prev,n=null==r?void 0:r.next;i&&(i.next=n),n&&(n.prev=i)}return this.count--,null==r?void 0:r.element}},t.prototype.getTail=function(){return this.tail},t.prototype.clear=function(){e.prototype.clear.call(this),this.tail=void 0},t.prototype.inverseToString=function(){if(null==this.tail)return"";for(var e=""+JSON.stringify(this.tail.element),t=this.tail.prev;null!=t;)e=e+","+JSON.stringify(t.element),t=t.prev;return e},t}(LinkedList),$$u=_export,IndexedObject$1=indexedObject,toIndexedObject$3=toIndexedObject$9,arrayMethodIsStrict$3=arrayMethodIsStrict$8,nativeJoin=[].join,ES3_STRINGS=IndexedObject$1!=Object,STRICT_METHOD$3=arrayMethodIsStrict$3("join",",");$$u({target:"Array",proto:!0,forced:ES3_STRINGS||!STRICT_METHOD$3},{join:function(e){return nativeJoin.call(toIndexedObject$3(this),void 0===e?",":e)}});var toLength$h=toLength$p,repeat=stringRepeat,requireObjectCoercible$3=requireObjectCoercible$b,ceil=Math.ceil,createMethod$1=function(e){return function(t,r,i){var n,o,a=String(requireObjectCoercible$3(t)),s=a.length,l=void 0===i?" ":String(i),u=toLength$h(r);return u<=s||""==l?a:(n=u-s,(o=repeat.call(l,ceil(n/l.length))).length>n&&(o=o.slice(0,n)),e?a+o:o+a)}},stringPad={start:createMethod$1(!1),end:createMethod$1(!0)},userAgent=engineUserAgent,stringPadWebkitBug=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(userAgent),$$t=_export,$padStart=stringPad.start,WEBKIT_BUG=stringPadWebkitBug;$$t({target:"String",proto:!0,forced:WEBKIT_BUG},{padStart:function(e){return $padStart(this,e,arguments.length>1?arguments[1]:void 0)}});var equalsFrame=function(e,t){return e.key==t.key},utf8ByteToTimestamp=function(e){for(var t=[],r=2;r<e.length-1;r++)r<=2||0==e[r-1]&&0==e[r-2]||t.push(e[r]);return parseInt(t.map((function(e){return e.toString(16).padStart(2,0)})).join(""),16)},deepClone=function(e){return JSON.parse(JSON.stringify(e))},anObject$6=anObject$j,iteratorClose=iteratorClose$2,callWithSafeIterationClosing$1=function(e,t,r,i){try{return i?t(anObject$6(r)[0],r[1]):t(r)}catch(t){throw iteratorClose(e),t}},bind$3=functionBindContext,toObject$9=toObject$h,callWithSafeIterationClosing=callWithSafeIterationClosing$1,isArrayIteratorMethod$1=isArrayIteratorMethod$3,toLength$g=toLength$p,createProperty$1=createProperty$4,getIteratorMethod$3=getIteratorMethod$5,arrayFrom$1=function(e){var t,r,i,n,o,a,s=toObject$9(e),l="function"==typeof this?this:Array,u=arguments.length,c=u>1?arguments[1]:void 0,d=void 0!==c,p=getIteratorMethod$3(s),h=0;if(d&&(c=bind$3(c,u>2?arguments[2]:void 0,2)),null==p||l==Array&&isArrayIteratorMethod$1(p))for(r=new l(t=toLength$g(s.length));t>h;h++)a=d?c(s[h],h):s[h],createProperty$1(r,h,a);else for(o=(n=p.call(s)).next,r=new l;!(i=o.call(n)).done;h++)a=d?callWithSafeIterationClosing(n,c,[i.value,h],!0):i.value,createProperty$1(r,h,a);return r.length=h,r},$$s=_export,from=arrayFrom$1,checkCorrectnessOfIteration$1=checkCorrectnessOfIteration$3,INCORRECT_ITERATION=!checkCorrectnessOfIteration$1((function(e){Array.from(e)})),_a,_b;$$s({target:"Array",stat:!0,forced:INCORRECT_ITERATION},{from:from});var wbProtoMap=(_a={},_a[PushCommand.setRoom]="push_set_mod",_a[PushCommand.SetUser]="proto_set_user",_a[PushCommand.JoinLive]="proto_joinlive",_a[PushCommand.SetMod]="push_set_mod",_a[PushCommand.DrawGraphics]="push_draw_graphics",_a[PushCommand.ClearGraphics]="proto_clear_graphics",_a[PushCommand.DrawPageGraphics]="push_draw_page_graphics",_a[PushCommand.ClearPageGraphics]="push_clear_page_graphics",_a[PushCommand.Qaa]="push_qaa",_a[PushCommand.SetRoomAuth]="push_room_auth",_a[PushCommand.setUserAuth]="push_user_auth",_a),wbFnMap=(_b={},_b[PushCommand.SetMod]="pushSetModHandle",_b[PushCommand.DrawPageGraphics]="pushDrawPageGraphicsHandle",_b[PushCommand.ClearPageGraphics]="pushClearPageGraphicsHandle",_b),Store=function(){this.metaInfo={},this.viewInfo={},this.recordInfo={},this.playView=null,this.wbProtoMap=wbProtoMap,this.wbFnMap=wbFnMap,this.playInfo={}},$store=new Store,Layout=function(){function e(){var e;this.currentMainVideo=null,this.playView=null,this.layoutView=null,this.whiteboardView=null,this.playbackEvent=playbackEvent,this.isShowWhiteboard=!1,this.layoutModeNameMap=((e={})[LayoutMode.split]="split",e[LayoutMode.vertical]="vertical",e[LayoutMode.horizontal]="horizontal",e[LayoutMode.float]="float",e),this.layout={mainView:null,elseView:null}}return e.prototype.createLayoutView=function(){this.layoutView=document.createElement("div"),this.layoutView.className=this.getLayoutClass(LayoutSuffixName.Layout),this.playView&&(this.layoutView.id=ZegoPrefixName.Layout+"-"+(new Date).getTime(),this.playView.appendChild(this.layoutView))},e.prototype.getLayoutClass=function(e){return"zego-"+this.layoutModeNameMap[this.currentMode]+"-"+e},e.prototype.reload=function(){this.playView=null,this.layoutView=null,this.whiteboardView=null,this.layout.mainView=null,this.layout.elseView=null,this.isShowWhiteboard=!1,this.currentMainVideo=null,this.setPlayView($store.playView)},e.prototype.setPlayView=function(e){this.playView=e},e.prototype.clearPlayView=function(){this.playView=null},e.prototype.removeMediaView=function(e){var t,r,i=document.getElementById(e);null===(r=null===(t=null==i?void 0:i.parentNode)||void 0===t?void 0:t.parentNode)||void 0===r||r.removeChild(i.parentNode),this.showElseView(),this.calcWhiteboardSize()},e.prototype.getIsShowWhiteboard=function(){return!!this.whiteboardView&&"999999px"!==this.whiteboardView.style.left},e.prototype.setMode=function(e){return void 0===e&&(e=this.currentMode),e==LayoutMode.custom||(e||(e=LayoutMode.float),this.currentMode=e,!this.layoutView&&this.createLayoutView(),this.layout.mainView?(this.reCalcLayout(),this.setElseViewStyle(),this.showElseView(),this.sortElseViewVideoHandle(),this.calcWhiteboardSize()):this.createLayoutDom()),this},e.prototype.setShowWhiteboard=function(e){return this.isShowWhiteboard=e,this},e.prototype.setWhiteboardPosition=function(e){void 0===e&&(e=!0);var t=this.layout,r=t.mainView,i=t.elseView;if(this.whiteboardView){if(this.isShowWhiteboard)this.whiteboardView&&this.whiteboardView.style.left&&(this.whiteboardView.style.position="",this.whiteboardView.style.left="",this.whiteboardView.style.top=""),this.whiteboardView&&this.whiteboardView.parentElement&&this.currentMode==LayoutMode.split&&(this.whiteboardView.parentElement.style.position="",this.whiteboardView.parentElement.style.left="",this.whiteboardView.parentElement.style.top="",this.whiteboardView.parentElement.style.width="",this.whiteboardView.parentElement.style.height="");else if(this.whiteboardView&&(this.whiteboardView.style.position="absolute",this.whiteboardView.style.left="999999px",this.whiteboardView.style.top="999999px",this.whiteboardView&&this.whiteboardView.parentElement&&this.currentMode==LayoutMode.split&&(this.whiteboardView.parentElement.style.cssText+="position:absolute;top:999999px;left:999999px;width:100%;height:100%")),i){var n=i.getElementsByTagName("video");if(n.length)if(this.currentMainVideo){for(var o=void 0,a=0,s=n.length;a<s;a++){var l=n[a];-1!==l.id.indexOf(this.currentMainVideo)&&(o=l)}if(o){var u=o.parentNode;u.className="",this.setDomPositionStyle(u),r.insertBefore(u,null)}else r.getElementsByTagName("video").length||this.setShowFirstVideoInMain()}else this.setShowFirstVideoInMain();this.showElseView()}e&&this.playbackEvent.emit(LayoutEvent.whiteboardChange)}},e.prototype.showElseView=function(){var e=this.layout.elseView;e&&(e.children.length?e.style.display="":e.style.display="none")},e.prototype.setShowFirstVideoInMain=function(){var e=this.layout,t=e.elseView,r=e.mainView;if(this.currentMode!=LayoutMode.split&&!r.getElementsByTagName("video").length){var i=t.getElementsByTagName("video"),n=void 0;if(i.length){for(var o=0,a=i.length;o<a;o++){var s=i[o];if(n){var l=s.getAttribute("data-index"),u=n.getAttribute("data-index");n=l<u?s:n}else n=i[o]}var c=n.parentNode;c.className="",this.setDomPositionStyle(c),r.insertBefore(c,null)}}},e.prototype.setFirstVideoToElse=function(e,t){var r=this.layout.elseView,i=+(e.getAttribute("data-index")||0);if(r.children.length){for(var n=null,o=0,a=r.children.length;o<a;o++){var s=r.children[o],l=s.getElementsByTagName("video")[0];if(i<=+(null==l?void 0:l.getAttribute("data-index"))){n=s;break}}r.insertBefore(t,n)}},e.prototype.setCurrVideoInMain=function(){var e,t=this,r=this.layout,i=r.elseView,n=r.mainView;if(i.children.forEach((function(r){r.children.length&&r.children[0].id.includes(t.currentMainVideo)&&(e=r.children[0])})),e){var o=e.parentNode;o.className="",this.setDomPositionStyle(o),n.insertBefore(o,null)}},e.prototype.sortElseViewVideoHandle=function(){var e=this.layout.elseView;if(e&&e.children.length>1){var t=Array.from(e.children);t.sort((function(e,t){return e.children[0].getAttribute("data-index")-t.children[0].getAttribute("data-index")})),e.innerHTML="",e.append.apply(e,t)}},e.prototype.setDomPositionStyle=function(e){e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.left="0px",e.style.top="0px"},e.prototype.setMainMediaID=function(e){return this.currentMainVideo=e,this},e.prototype.reCalcLayout=function(){var e=this.layout,t=e.mainView,r=e.elseView;this.layoutView&&(this.layoutView.className=this.getLayoutClass(LayoutSuffixName.Layout)),t.className=this.getLayoutClass(LayoutSuffixName.Main),r&&(r.className=this.getLayoutClass(LayoutSuffixName.Ele))},e.prototype.calcWhiteboardSize=function(e,t){var r,i;if(void 0===e&&(e=16),void 0===t&&(t=9),this.whiteboardView){var n={w:0,h:0},o=this.layout.mainView;if(this.currentMode==LayoutMode.split?(r=[o.childNodes[0].clientWidth,o.childNodes[0].clientHeight],n.w=r[0],n.h=r[1]):(i=[o.clientWidth,o.clientHeight],n.w=i[0],n.h=i[1]),this.whiteboardView)if(console.warn("calcWhiteboardSize",(n.w/n.h).toFixed(2),(e/t).toFixed(2)),(n.w/n.h).toFixed(2)>=(e/t).toFixed(2)){var a=n.h/t*e;this.whiteboardView.style.width=a+"px",this.whiteboardView.style.height=n.h+"px"}else{var s=n.w/e*t;if(s<n.h)this.whiteboardView.style.width=n.w+"px",this.whiteboardView.style.height=s+"px";else{a=e/t*(s=n.h);this.whiteboardView.style.width=s+"px",this.whiteboardView.style.height=a+"px"}}}},e.prototype.createView=function(e,t){var r;return r=this.currentMode==LayoutMode.split?this.pushSplitLayout(e,t):this.pushCommonLayout(e,t),this.playbackEvent.emit(LayoutEvent.whiteboardChange),r},e.prototype.createLayoutDom=function(){var e,t,r=document.createElement("div"),i=document.createElement("div");this.currentMode=this.currentMode,r.className=this.getLayoutClass(LayoutSuffixName.Main),i.className=this.getLayoutClass(LayoutSuffixName.Ele),null===(e=this.layoutView)||void 0===e||e.appendChild(r),null===(t=this.layoutView)||void 0===t||t.appendChild(i),this.layout.mainView=r,this.layout.elseView=i},e.prototype.createWhiteboardView=function(){var e=document.createElement("div"),t=document.createElement("div");return e.id=ZegoPrefixName.Whiteboard+"-"+(new Date).getTime(),t.className=ZegoPrefixName.Whiteboard+"-mask",e.appendChild(t),e},e.prototype.setSplitElementClassName=function(){var e,t,r,i=this.layout.mainView.children;this.layout.mainView.style.flexWrap=i.length<=2?"nowrap":"wrap";for(var n=function(n){var a=i[n];if(a.id==(null===(e=o.whiteboardView)||void 0===e?void 0:e.id)){var s=document.createElement("div");s.appendChild(a),o.whiteboardView.style.width="",o.whiteboardView.style.height="",o.isShowWhiteboard||(s.style.cssText+="position:absolute;top:999999px;left:999999px"),o.layout.mainView.insertBefore(s,o.layout.mainView.children[0])}else(null===(t=a.children[0])||void 0===t?void 0:t.id)===(null===(r=o.whiteboardView)||void 0===r?void 0:r.id)||o.isShowWhiteboard||["position","left","top","width","height"].map((function(e){a.style[e]=null}))},o=this,a=0;a<i.length;a++)n(a);var s=i.length;this.isShowWhiteboard||s--;for(a=0;a<i.length;a++){var l="";1==s?l="-1":1<s&&s<3?l="-2":3<=s&&s<5?l="-4":5<=s&&s<7?l="-6":7<=s&&s<10&&(l="-9"),i[a].className=this.getLayoutClass(LayoutSuffixName.Item)+l}},e.prototype.setElseViewElementClassName=function(){for(var e=this.layout.elseView.children,t=function(t,i){var n=e[t];["width","height","flex"].map((function(e){n.style[e]=null})),r.currentMode==LayoutMode.horizontal||r.currentMode==LayoutMode.vertical?(i<=4?n.className=r.getLayoutClass("item")+"-4":i>4&&i<=8&&(n.className=r.getLayoutClass("item")+"-8"),n.style.flex=null):r.currentMode==LayoutMode.float&&(n.className=r.getLayoutClass(LayoutSuffixName.Item))},r=this,i=0,n=e.length;i<n;i++)t(i,n)},e.prototype.setElseViewStyle=function(){var e,t=this;if(this.currentMode!=LayoutMode.custom)if(this.currentMode==LayoutMode.split){if(this.layout.elseView){for(var r=this.layout.elseView.children,i=document.createDocumentFragment(),n=0;n<r.length;n++){var o=r[n],a=document.createElement("div");o.children[0]&&(a.appendChild(o.children[0]),i.appendChild(a))}this.layout.mainView.appendChild(i),this.layout.elseView.parentNode.removeChild(this.layout.elseView),this.layout.elseView=null}this.setSplitElementClassName()}else{if(this.layout.elseView)this.layout.elseView.style.display="",this.layout.elseView.className=this.getLayoutClass(LayoutSuffixName.Ele),this.layout.mainView.children.forEach((function(e){var r,i=e.childNodes[0];if(i&&"VIDEO"==i.tagName&&(null==i?void 0:i.id)!==(null===(r=t.whiteboardView)||void 0===r?void 0:r.id)){var n=document.createElement("div");n.appendChild(i),t.layout.elseView.appendChild(n),t.showElseView()}}));else{var s=document.createElement("div");s.className=this.getLayoutClass(LayoutSuffixName.Ele),this.layout.mainView.children.forEach((function(e){var r,i=e.childNodes[0];if(i&&i.id!==(null===(r=t.whiteboardView)||void 0===r?void 0:r.id)&&"VIDEO"==i.tagName){var n=document.createElement("div");n.appendChild(i),s.appendChild(n),t.showElseView()}})),this.layout.elseView=s,null===(e=this.layoutView)||void 0===e||e.appendChild(s),this.layout.mainView.parentNode.insertBefore(this.layout.mainView,this.layout.elseView)}if(this.clearMainView(),this.whiteboardView&&this.layout.mainView.appendChild(this.whiteboardView),!this.isShowWhiteboard)if(this.currentMainVideo){var l=this.layout.elseView.getElementsByTagName("video");console.warn({videos:l}),Array.from(l).find((function(e){return e.id.includes(t.currentMainVideo)}))?this.setCurrVideoInMain():this.setShowFirstVideoInMain()}else this.setShowFirstVideoInMain();this.currentMode==LayoutMode.horizontal?this.layout.elseView.parentNode.insertBefore(this.layout.elseView,this.layout.mainView):this.currentMode==LayoutMode.vertical&&this.layout.mainView.parentNode.insertBefore(this.layout.mainView,this.layout.elseView),this.setElseViewElementClassName()}},e.prototype.clearMainView=function(){this.layout.mainView.innerHTML=""},e.prototype.pushSplitLayout=function(e,t){var r=this.layout.mainView,i=document.createElement("div");if("whiteboard"==e){if(this.whiteboardView)return this.whiteboardView;var n=this.createWhiteboardView();return this.whiteboardView=n,i.appendChild(n),null==r||r.appendChild(i),this.setSplitElementClassName(),n}for(var o=null,a=+((null==t?void 0:t.getAttribute("data-index"))||0),s=0,l=r.children.length;s<l;s++){var u=r.children[s],c=u.getElementsByTagName("video")[0];if(c)if(a<=+c.getAttribute("data-index")){o=u;break}}return t&&i.appendChild(t),r.insertBefore(i,o),this.setSplitElementClassName(),i},e.prototype.pushCommonLayout=function(e,t){var r=this.layout,i=r.mainView,n=r.elseView;if("whiteboard"==e){if(this.whiteboardView)return this.whiteboardView;var o=this.createWhiteboardView();return o.style.position="absolute",o.style.left="999999px",o.style.top="999999px",this.whiteboardView=o,i.appendChild(o),o}t=t;var a=document.createElement("div"),s=this.getIsShowWhiteboard();if(!s&&this.currentMainVideo&&!i.getElementsByTagName("video").length)return this.setDomPositionStyle(a),a.appendChild(t),i.appendChild(a),a;if(!s&&this.currentMainVideo&&i.getElementsByTagName("video").length){var l=i.getElementsByTagName("video")[0];if(t.id.includes(this.currentMainVideo))return this.setDomPositionStyle(a),a.appendChild(t),i.appendChild(a),i.removeChild(l.parentNode),this.pushCommonLayout("media",l),a}if(!s&&!this.currentMainVideo&&0==i.getElementsByTagName("video").length)return this.setDomPositionStyle(a),a.appendChild(t),i.appendChild(a),a;var u=+(t.getAttribute("data-index")||0);if(n.children.length){for(var c=null,d=0,p=n.children.length;d<p;d++){var h=n.children[d],f=h.getElementsByTagName("video")[0];if(u<=+(null==f?void 0:f.getAttribute("data-index"))){c=h;break}}n.insertBefore(a,c)}else n.append(a),this.showElseView();return this.setElseViewStyle(),a.insertBefore(t,null),a},e}(),layoutEngine=new Layout,$$r=_export,DESCRIPTORS$c=descriptors,objectDefinePropertyModile=objectDefineProperty;$$r({target:"Object",stat:!0,forced:!DESCRIPTORS$c,sham:!DESCRIPTORS$c},{defineProperty:objectDefinePropertyModile.f});var objectGetOwnPropertyNamesExternal={},toIndexedObject$2=toIndexedObject$9,$getOwnPropertyNames$1=objectGetOwnPropertyNames.f,toString={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(e){try{return $getOwnPropertyNames$1(e)}catch(e){return windowNames.slice()}};objectGetOwnPropertyNamesExternal.f=function(e){return windowNames&&"[object Window]"==toString.call(e)?getWindowNames(e):$getOwnPropertyNames$1(toIndexedObject$2(e))};var wellKnownSymbolWrapped={},wellKnownSymbol$7=wellKnownSymbol$r;wellKnownSymbolWrapped.f=wellKnownSymbol$7;var path=path$2,has$7=has$h,wrappedWellKnownSymbolModule$1=wellKnownSymbolWrapped,defineProperty$8=objectDefineProperty.f,defineWellKnownSymbol$3=function(e){var t=path.Symbol||(path.Symbol={});has$7(t,e)||defineProperty$8(t,e,{value:wrappedWellKnownSymbolModule$1.f(e)})},$$q=_export,global$i=global$E,getBuiltIn$2=getBuiltIn$8,DESCRIPTORS$b=descriptors,NATIVE_SYMBOL=nativeSymbol,USE_SYMBOL_AS_UID=useSymbolAsUid,fails$h=fails$z,has$6=has$h,isArray$2=isArray$6,isObject$a=isObject$l,anObject$5=anObject$j,toObject$8=toObject$h,toIndexedObject$1=toIndexedObject$9,toPrimitive$2=toPrimitive$6,createPropertyDescriptor$2=createPropertyDescriptor$7,nativeObjectCreate=objectCreate,objectKeys=objectKeys$3,getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertyNamesExternal=objectGetOwnPropertyNamesExternal,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,getOwnPropertyDescriptorModule$1=objectGetOwnPropertyDescriptor,definePropertyModule$1=objectDefineProperty,propertyIsEnumerableModule=objectPropertyIsEnumerable,createNonEnumerableProperty$3=createNonEnumerableProperty$d,redefine$6=redefine$f.exports,shared=shared$5.exports,sharedKey=sharedKey$4,hiddenKeys$1=hiddenKeys$6,uid$2=uid$5,wellKnownSymbol$6=wellKnownSymbol$r,wrappedWellKnownSymbolModule=wellKnownSymbolWrapped,defineWellKnownSymbol$2=defineWellKnownSymbol$3,setToStringTag$5=setToStringTag$9,InternalStateModule$4=internalState,$forEach$1=arrayIteration.forEach,HIDDEN=sharedKey("hidden"),SYMBOL="Symbol",PROTOTYPE$1="prototype",TO_PRIMITIVE=wellKnownSymbol$6("toPrimitive"),setInternalState$4=InternalStateModule$4.set,getInternalState$2=InternalStateModule$4.getterFor(SYMBOL),ObjectPrototype$2=Object[PROTOTYPE$1],$Symbol=global$i.Symbol,$stringify=getBuiltIn$2("JSON","stringify"),nativeGetOwnPropertyDescriptor$1=getOwnPropertyDescriptorModule$1.f,nativeDefineProperty$1=definePropertyModule$1.f,nativeGetOwnPropertyNames=getOwnPropertyNamesExternal.f,nativePropertyIsEnumerable=propertyIsEnumerableModule.f,AllSymbols=shared("symbols"),ObjectPrototypeSymbols=shared("op-symbols"),StringToSymbolRegistry=shared("string-to-symbol-registry"),SymbolToStringRegistry=shared("symbol-to-string-registry"),WellKnownSymbolsStore=shared("wks"),QObject=global$i.QObject,USE_SETTER=!QObject||!QObject[PROTOTYPE$1]||!QObject[PROTOTYPE$1].findChild,setSymbolDescriptor=DESCRIPTORS$b&&fails$h((function(){return 7!=nativeObjectCreate(nativeDefineProperty$1({},"a",{get:function(){return nativeDefineProperty$1(this,"a",{value:7}).a}})).a}))?function(e,t,r){var i=nativeGetOwnPropertyDescriptor$1(ObjectPrototype$2,t);i&&delete ObjectPrototype$2[t],nativeDefineProperty$1(e,t,r),i&&e!==ObjectPrototype$2&&nativeDefineProperty$1(ObjectPrototype$2,t,i)}:nativeDefineProperty$1,wrap=function(e,t){var r=AllSymbols[e]=nativeObjectCreate($Symbol[PROTOTYPE$1]);return setInternalState$4(r,{type:SYMBOL,tag:e,description:t}),DESCRIPTORS$b||(r.description=t),r},isSymbol=USE_SYMBOL_AS_UID?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof $Symbol},$defineProperty=function(e,t,r){e===ObjectPrototype$2&&$defineProperty(ObjectPrototypeSymbols,t,r),anObject$5(e);var i=toPrimitive$2(t,!0);return anObject$5(r),has$6(AllSymbols,i)?(r.enumerable?(has$6(e,HIDDEN)&&e[HIDDEN][i]&&(e[HIDDEN][i]=!1),r=nativeObjectCreate(r,{enumerable:createPropertyDescriptor$2(0,!1)})):(has$6(e,HIDDEN)||nativeDefineProperty$1(e,HIDDEN,createPropertyDescriptor$2(1,{})),e[HIDDEN][i]=!0),setSymbolDescriptor(e,i,r)):nativeDefineProperty$1(e,i,r)},$defineProperties=function(e,t){anObject$5(e);var r=toIndexedObject$1(t),i=objectKeys(r).concat($getOwnPropertySymbols(r));return $forEach$1(i,(function(t){DESCRIPTORS$b&&!$propertyIsEnumerable.call(r,t)||$defineProperty(e,t,r[t])})),e},$create=function(e,t){return void 0===t?nativeObjectCreate(e):$defineProperties(nativeObjectCreate(e),t)},$propertyIsEnumerable=function(e){var t=toPrimitive$2(e,!0),r=nativePropertyIsEnumerable.call(this,t);return!(this===ObjectPrototype$2&&has$6(AllSymbols,t)&&!has$6(ObjectPrototypeSymbols,t))&&(!(r||!has$6(this,t)||!has$6(AllSymbols,t)||has$6(this,HIDDEN)&&this[HIDDEN][t])||r)},$getOwnPropertyDescriptor=function(e,t){var r=toIndexedObject$1(e),i=toPrimitive$2(t,!0);if(r!==ObjectPrototype$2||!has$6(AllSymbols,i)||has$6(ObjectPrototypeSymbols,i)){var n=nativeGetOwnPropertyDescriptor$1(r,i);return!n||!has$6(AllSymbols,i)||has$6(r,HIDDEN)&&r[HIDDEN][i]||(n.enumerable=!0),n}},$getOwnPropertyNames=function(e){var t=nativeGetOwnPropertyNames(toIndexedObject$1(e)),r=[];return $forEach$1(t,(function(e){has$6(AllSymbols,e)||has$6(hiddenKeys$1,e)||r.push(e)})),r},$getOwnPropertySymbols=function(e){var t=e===ObjectPrototype$2,r=nativeGetOwnPropertyNames(t?ObjectPrototypeSymbols:toIndexedObject$1(e)),i=[];return $forEach$1(r,(function(e){!has$6(AllSymbols,e)||t&&!has$6(ObjectPrototype$2,e)||i.push(AllSymbols[e])})),i};if(NATIVE_SYMBOL||($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=uid$2(e),r=function(e){this===ObjectPrototype$2&&r.call(ObjectPrototypeSymbols,e),has$6(this,HIDDEN)&&has$6(this[HIDDEN],t)&&(this[HIDDEN][t]=!1),setSymbolDescriptor(this,t,createPropertyDescriptor$2(1,e))};return DESCRIPTORS$b&&USE_SETTER&&setSymbolDescriptor(ObjectPrototype$2,t,{configurable:!0,set:r}),wrap(t,e)},redefine$6($Symbol[PROTOTYPE$1],"toString",(function(){return getInternalState$2(this).tag})),redefine$6($Symbol,"withoutSetter",(function(e){return wrap(uid$2(e),e)})),propertyIsEnumerableModule.f=$propertyIsEnumerable,definePropertyModule$1.f=$defineProperty,getOwnPropertyDescriptorModule$1.f=$getOwnPropertyDescriptor,getOwnPropertyNamesModule.f=getOwnPropertyNamesExternal.f=$getOwnPropertyNames,getOwnPropertySymbolsModule.f=$getOwnPropertySymbols,wrappedWellKnownSymbolModule.f=function(e){return wrap(wellKnownSymbol$6(e),e)},DESCRIPTORS$b&&(nativeDefineProperty$1($Symbol[PROTOTYPE$1],"description",{configurable:!0,get:function(){return getInternalState$2(this).description}}),redefine$6(ObjectPrototype$2,"propertyIsEnumerable",$propertyIsEnumerable,{unsafe:!0}))),$$q({global:!0,wrap:!0,forced:!NATIVE_SYMBOL,sham:!NATIVE_SYMBOL},{Symbol:$Symbol}),$forEach$1(objectKeys(WellKnownSymbolsStore),(function(e){defineWellKnownSymbol$2(e)})),$$q({target:SYMBOL,stat:!0,forced:!NATIVE_SYMBOL},{for:function(e){var t=String(e);if(has$6(StringToSymbolRegistry,t))return StringToSymbolRegistry[t];var r=$Symbol(t);return StringToSymbolRegistry[t]=r,SymbolToStringRegistry[r]=t,r},keyFor:function(e){if(!isSymbol(e))throw TypeError(e+" is not a symbol");if(has$6(SymbolToStringRegistry,e))return SymbolToStringRegistry[e]},useSetter:function(){USE_SETTER=!0},useSimple:function(){USE_SETTER=!1}}),$$q({target:"Object",stat:!0,forced:!NATIVE_SYMBOL,sham:!DESCRIPTORS$b},{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor}),$$q({target:"Object",stat:!0,forced:!NATIVE_SYMBOL},{getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$$q({target:"Object",stat:!0,forced:fails$h((function(){getOwnPropertySymbolsModule.f(1)}))},{getOwnPropertySymbols:function(e){return getOwnPropertySymbolsModule.f(toObject$8(e))}}),$stringify){var FORCED_JSON_STRINGIFY=!NATIVE_SYMBOL||fails$h((function(){var e=$Symbol();return"[null]"!=$stringify([e])||"{}"!=$stringify({a:e})||"{}"!=$stringify(Object(e))}));$$q({target:"JSON",stat:!0,forced:FORCED_JSON_STRINGIFY},{stringify:function(e,t,r){for(var i,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(i=t,(isObject$a(t)||void 0!==e)&&!isSymbol(e))return isArray$2(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!isSymbol(t))return t}),n[1]=t,$stringify.apply(null,n)}})}$Symbol[PROTOTYPE$1][TO_PRIMITIVE]||createNonEnumerableProperty$3($Symbol[PROTOTYPE$1],TO_PRIMITIVE,$Symbol[PROTOTYPE$1].valueOf),setToStringTag$5($Symbol,SYMBOL),hiddenKeys$1[HIDDEN]=!0;var $$p=_export,DESCRIPTORS$a=descriptors,global$h=global$E,has$5=has$h,isObject$9=isObject$l,defineProperty$7=objectDefineProperty.f,copyConstructorProperties=copyConstructorProperties$2,NativeSymbol=global$h.Symbol;if(DESCRIPTORS$a&&"function"==typeof NativeSymbol&&(!("description"in NativeSymbol.prototype)||void 0!==NativeSymbol().description)){var EmptyStringDescriptionStore={},SymbolWrapper=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof SymbolWrapper?new NativeSymbol(e):void 0===e?NativeSymbol():NativeSymbol(e);return""===e&&(EmptyStringDescriptionStore[t]=!0),t};copyConstructorProperties(SymbolWrapper,NativeSymbol);var symbolPrototype=SymbolWrapper.prototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString,native="Symbol(test)"==String(NativeSymbol("test")),regexp=/^Symbol\((.*)\)[^)]+$/;defineProperty$7(symbolPrototype,"description",{configurable:!0,get:function(){var e=isObject$9(this)?this.valueOf():this,t=symbolToString.call(e);if(has$5(EmptyStringDescriptionStore,e))return"";var r=native?t.slice(7,-1):t.replace(regexp,"$1");return""===r?void 0:r}}),$$p({global:!0,forced:!0},{Symbol:SymbolWrapper})}var defineWellKnownSymbol$1=defineWellKnownSymbol$3;defineWellKnownSymbol$1("toStringTag");var global$g=global$E,setToStringTag$4=setToStringTag$9;setToStringTag$4(global$g.JSON,"JSON",!0);var setToStringTag$3=setToStringTag$9;setToStringTag$3(Math,"Math",!0);var $$o=_export,DESCRIPTORS$9=descriptors,create$5=objectCreate;$$o({target:"Object",stat:!0,sham:!DESCRIPTORS$9},{create:create$5});var aFunction$2=aFunction$8,isObject$8=isObject$l,slice=[].slice,factories={},construct=function(e,t,r){if(!(t in factories)){for(var i=[],n=0;n<t;n++)i[n]="a["+n+"]";factories[t]=Function("C,a","return new C("+i.join(",")+")")}return factories[t](e,r)},functionBind=Function.bind||function(e){var t=aFunction$2(this),r=slice.call(arguments,1),i=function(){var n=r.concat(slice.call(arguments));return this instanceof i?construct(t,n.length,n):t.apply(e,n)};return isObject$8(t.prototype)&&(i.prototype=t.prototype),i},$$n=_export,bind$2=functionBind;$$n({target:"Function",proto:!0},{bind:bind$2});var $$m=_export,setPrototypeOf$4=objectSetPrototypeOf;$$m({target:"Object",stat:!0},{setPrototypeOf:setPrototypeOf$4});var DESCRIPTORS$8=descriptors,defineProperty$6=objectDefineProperty.f,FunctionPrototype=Function.prototype,FunctionPrototypeToString=FunctionPrototype.toString,nameRE=/^\s*function ([^ (]*)/,NAME$1="name";DESCRIPTORS$8&&!(NAME$1 in FunctionPrototype)&&defineProperty$6(FunctionPrototype,NAME$1,{configurable:!0,get:function(){try{return FunctionPrototypeToString.call(this).match(nameRE)[1]}catch(e){return""}}});var $$l=_export,fails$g=fails$z,isArray$1=isArray$6,isObject$7=isObject$l,toObject$7=toObject$h,toLength$f=toLength$p,createProperty=createProperty$4,arraySpeciesCreate=arraySpeciesCreate$3,arrayMethodHasSpeciesSupport=arrayMethodHasSpeciesSupport$5,wellKnownSymbol$5=wellKnownSymbol$r,V8_VERSION=engineV8Version,IS_CONCAT_SPREADABLE=wellKnownSymbol$5("isConcatSpreadable"),MAX_SAFE_INTEGER=9007199254740991,MAXIMUM_ALLOWED_INDEX_EXCEEDED="Maximum allowed index exceeded",IS_CONCAT_SPREADABLE_SUPPORT=V8_VERSION>=51||!fails$g((function(){var e=[];return e[IS_CONCAT_SPREADABLE]=!1,e.concat()[0]!==e})),SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("concat"),isConcatSpreadable=function(e){if(!isObject$7(e))return!1;var t=e[IS_CONCAT_SPREADABLE];return void 0!==t?!!t:isArray$1(e)},FORCED$6=!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT;$$l({target:"Array",proto:!0,forced:FORCED$6},{concat:function(e){var t,r,i,n,o,a=toObject$7(this),s=arraySpeciesCreate(a,0),l=0;for(t=-1,i=arguments.length;t<i;t++)if(isConcatSpreadable(o=-1===t?a:arguments[t])){if(l+(n=toLength$f(o.length))>MAX_SAFE_INTEGER)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);for(r=0;r<n;r++,l++)r in o&&createProperty(s,l,o[r])}else{if(l>=MAX_SAFE_INTEGER)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);createProperty(s,l++,o)}return s.length=l,s}});var $$k=_export;$$k({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var isObject$6=isObject$l,setPrototypeOf$3=objectSetPrototypeOf,inheritIfRequired$3=function(e,t,r){var i,n;return setPrototypeOf$3&&"function"==typeof(i=t.constructor)&&i!==r&&isObject$6(n=i.prototype)&&n!==r.prototype&&setPrototypeOf$3(e,n),e},DESCRIPTORS$7=descriptors,global$f=global$E,isForced$1=isForced_1,redefine$5=redefine$f.exports,has$4=has$h,classof$3=classofRaw$1,inheritIfRequired$2=inheritIfRequired$3,toPrimitive$1=toPrimitive$6,fails$f=fails$z,create$4=objectCreate,getOwnPropertyNames$3=objectGetOwnPropertyNames.f,getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,defineProperty$5=objectDefineProperty.f,trim$1=stringTrim.trim,NUMBER="Number",NativeNumber=global$f[NUMBER],NumberPrototype=NativeNumber.prototype,BROKEN_CLASSOF=classof$3(create$4(NumberPrototype))==NUMBER,toNumber=function(e){var t,r,i,n,o,a,s,l,u=toPrimitive$1(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=trim$1(u)).charCodeAt(0))||45===t){if(88===(r=u.charCodeAt(2))||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+u}for(a=(o=u.slice(2)).length,s=0;s<a;s++)if((l=o.charCodeAt(s))<48||l>n)return NaN;return parseInt(o,i)}return+u};if(isForced$1(NUMBER,!NativeNumber(" 0o1")||!NativeNumber("0b1")||NativeNumber("+0x1"))){for(var NumberWrapper=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof NumberWrapper&&(BROKEN_CLASSOF?fails$f((function(){NumberPrototype.valueOf.call(r)})):classof$3(r)!=NUMBER)?inheritIfRequired$2(new NativeNumber(toNumber(t)),r,NumberWrapper):toNumber(t)},keys$2=DESCRIPTORS$7?getOwnPropertyNames$3(NativeNumber):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),j$1=0,key$1;keys$2.length>j$1;j$1++)has$4(NativeNumber,key$1=keys$2[j$1])&&!has$4(NumberWrapper,key$1)&&defineProperty$5(NumberWrapper,key$1,getOwnPropertyDescriptor(NativeNumber,key$1));NumberWrapper.prototype=NumberPrototype,NumberPrototype.constructor=NumberWrapper,redefine$5(global$f,NUMBER,NumberWrapper)}var fixRegExpWellKnownSymbolLogic$1=fixRegexpWellKnownSymbolLogic,anObject$4=anObject$j,toLength$e=toLength$p,requireObjectCoercible$2=requireObjectCoercible$b,advanceStringIndex$1=advanceStringIndex$3,regExpExec$1=regexpExecAbstract;fixRegExpWellKnownSymbolLogic$1("match",1,(function(e,t,r){return[function(t){var r=requireObjectCoercible$2(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,r):new RegExp(t)[e](String(r))},function(e){var i=r(t,e,this);if(i.done)return i.value;var n=anObject$4(e),o=String(this);if(!n.global)return regExpExec$1(n,o);var a=n.unicode;n.lastIndex=0;for(var s,l=[],u=0;null!==(s=regExpExec$1(n,o));){var c=String(s[0]);l[u]=c,""===c&&(n.lastIndex=advanceStringIndex$1(o,toLength$e(n.lastIndex),a)),u++}return 0===u?null:l}]}));var arrayBufferNative="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,toInteger$4=toInteger$b,toLength$d=toLength$p,toIndex$2=function(e){if(void 0===e)return 0;var t=toInteger$4(e),r=toLength$d(t);if(t!==r)throw RangeError("Wrong length or index");return r},abs=Math.abs,pow$1=Math.pow,floor$5=Math.floor,log=Math.log,LN2=Math.LN2,pack=function(e,t,r){var i,n,o,a=new Array(r),s=8*r-t-1,l=(1<<s)-1,u=l>>1,c=23===t?pow$1(2,-24)-pow$1(2,-77):0,d=e<0||0===e&&1/e<0?1:0,p=0;for((e=abs(e))!=e||e===1/0?(n=e!=e?1:0,i=l):(i=floor$5(log(e)/LN2),e*(o=pow$1(2,-i))<1&&(i--,o*=2),(e+=i+u>=1?c/o:c*pow$1(2,1-u))*o>=2&&(i++,o/=2),i+u>=l?(n=0,i=l):i+u>=1?(n=(e*o-1)*pow$1(2,t),i+=u):(n=e*pow$1(2,u-1)*pow$1(2,t),i=0));t>=8;a[p++]=255&n,n/=256,t-=8);for(i=i<<t|n,s+=t;s>0;a[p++]=255&i,i/=256,s-=8);return a[--p]|=128*d,a},unpack=function(e,t){var r,i=e.length,n=8*i-t-1,o=(1<<n)-1,a=o>>1,s=n-7,l=i-1,u=e[l--],c=127&u;for(u>>=7;s>0;c=256*c+e[l],l--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=t;s>0;r=256*r+e[l],l--,s-=8);if(0===c)c=1-a;else{if(c===o)return r?NaN:u?-1/0:1/0;r+=pow$1(2,t),c-=a}return(u?-1:1)*r*pow$1(2,c-t)},ieee754={pack:pack,unpack:unpack},toObject$6=toObject$h,toAbsoluteIndex$3=toAbsoluteIndex$7,toLength$c=toLength$p,arrayFill$1=function(e){for(var t=toObject$6(this),r=toLength$c(t.length),i=arguments.length,n=toAbsoluteIndex$3(i>1?arguments[1]:void 0,r),o=i>2?arguments[2]:void 0,a=void 0===o?r:toAbsoluteIndex$3(o,r);a>n;)t[n++]=e;return t},global$e=global$E,DESCRIPTORS$6=descriptors,NATIVE_ARRAY_BUFFER$2=arrayBufferNative,createNonEnumerableProperty$2=createNonEnumerableProperty$d,redefineAll$1=redefineAll$3,fails$e=fails$z,anInstance$3=anInstance$5,toInteger$3=toInteger$b,toLength$b=toLength$p,toIndex$1=toIndex$2,IEEE754=ieee754,getPrototypeOf$1=objectGetPrototypeOf,setPrototypeOf$2=objectSetPrototypeOf,getOwnPropertyNames$2=objectGetOwnPropertyNames.f,defineProperty$4=objectDefineProperty.f,arrayFill=arrayFill$1,setToStringTag$2=setToStringTag$9,InternalStateModule$3=internalState,getInternalState$1=InternalStateModule$3.get,setInternalState$3=InternalStateModule$3.set,ARRAY_BUFFER$1="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE="prototype",WRONG_LENGTH$1="Wrong length",WRONG_INDEX="Wrong index",NativeArrayBuffer$1=global$e[ARRAY_BUFFER$1],$ArrayBuffer=NativeArrayBuffer$1,$DataView=global$e[DATA_VIEW],$DataViewPrototype=$DataView&&$DataView[PROTOTYPE],ObjectPrototype$1=Object.prototype,RangeError$2=global$e.RangeError,packIEEE754=IEEE754.pack,unpackIEEE754=IEEE754.unpack,packInt8=function(e){return[255&e]},packInt16=function(e){return[255&e,e>>8&255]},packInt32=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},unpackInt32=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},packFloat32=function(e){return packIEEE754(e,23,4)},packFloat64=function(e){return packIEEE754(e,52,8)},addGetter$1=function(e,t){defineProperty$4(e[PROTOTYPE],t,{get:function(){return getInternalState$1(this)[t]}})},get=function(e,t,r,i){var n=toIndex$1(r),o=getInternalState$1(e);if(n+t>o.byteLength)throw RangeError$2(WRONG_INDEX);var a=getInternalState$1(o.buffer).bytes,s=n+o.byteOffset,l=a.slice(s,s+t);return i?l:l.reverse()},set=function(e,t,r,i,n,o){var a=toIndex$1(r),s=getInternalState$1(e);if(a+t>s.byteLength)throw RangeError$2(WRONG_INDEX);for(var l=getInternalState$1(s.buffer).bytes,u=a+s.byteOffset,c=i(+n),d=0;d<t;d++)l[u+d]=c[o?d:t-d-1]};if(NATIVE_ARRAY_BUFFER$2){if(!fails$e((function(){NativeArrayBuffer$1(1)}))||!fails$e((function(){new NativeArrayBuffer$1(-1)}))||fails$e((function(){return new NativeArrayBuffer$1,new NativeArrayBuffer$1(1.5),new NativeArrayBuffer$1(NaN),NativeArrayBuffer$1.name!=ARRAY_BUFFER$1}))){$ArrayBuffer=function(e){return anInstance$3(this,$ArrayBuffer),new NativeArrayBuffer$1(toIndex$1(e))};for(var ArrayBufferPrototype=$ArrayBuffer[PROTOTYPE]=NativeArrayBuffer$1[PROTOTYPE],keys$1=getOwnPropertyNames$2(NativeArrayBuffer$1),j=0,key;keys$1.length>j;)(key=keys$1[j++])in $ArrayBuffer||createNonEnumerableProperty$2($ArrayBuffer,key,NativeArrayBuffer$1[key]);ArrayBufferPrototype.constructor=$ArrayBuffer}setPrototypeOf$2&&getPrototypeOf$1($DataViewPrototype)!==ObjectPrototype$1&&setPrototypeOf$2($DataViewPrototype,ObjectPrototype$1);var testView=new $DataView(new $ArrayBuffer(2)),$setInt8=$DataViewPrototype.setInt8;testView.setInt8(0,2147483648),testView.setInt8(1,2147483649),!testView.getInt8(0)&&testView.getInt8(1)||redefineAll$1($DataViewPrototype,{setInt8:function(e,t){$setInt8.call(this,e,t<<24>>24)},setUint8:function(e,t){$setInt8.call(this,e,t<<24>>24)}},{unsafe:!0})}else $ArrayBuffer=function(e){anInstance$3(this,$ArrayBuffer,ARRAY_BUFFER$1);var t=toIndex$1(e);setInternalState$3(this,{bytes:arrayFill.call(new Array(t),0),byteLength:t}),DESCRIPTORS$6||(this.byteLength=t)},$DataView=function(e,t,r){anInstance$3(this,$DataView,DATA_VIEW),anInstance$3(e,$ArrayBuffer,DATA_VIEW);var i=getInternalState$1(e).byteLength,n=toInteger$3(t);if(n<0||n>i)throw RangeError$2("Wrong offset");if(n+(r=void 0===r?i-n:toLength$b(r))>i)throw RangeError$2(WRONG_LENGTH$1);setInternalState$3(this,{buffer:e,byteLength:r,byteOffset:n}),DESCRIPTORS$6||(this.buffer=e,this.byteLength=r,this.byteOffset=n)},DESCRIPTORS$6&&(addGetter$1($ArrayBuffer,"byteLength"),addGetter$1($DataView,"buffer"),addGetter$1($DataView,"byteLength"),addGetter$1($DataView,"byteOffset")),redefineAll$1($DataView[PROTOTYPE],{getInt8:function(e){return get(this,1,e)[0]<<24>>24},getUint8:function(e){return get(this,1,e)[0]},getInt16:function(e){var t=get(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=get(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return unpackInt32(get(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return unpackInt32(get(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return unpackIEEE754(get(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return unpackIEEE754(get(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){set(this,1,e,packInt8,t)},setUint8:function(e,t){set(this,1,e,packInt8,t)},setInt16:function(e,t){set(this,2,e,packInt16,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){set(this,2,e,packInt16,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){set(this,4,e,packInt32,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){set(this,4,e,packInt32,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){set(this,4,e,packFloat32,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){set(this,8,e,packFloat64,t,arguments.length>2?arguments[2]:void 0)}});setToStringTag$2($ArrayBuffer,ARRAY_BUFFER$1),setToStringTag$2($DataView,DATA_VIEW);var arrayBuffer={ArrayBuffer:$ArrayBuffer,DataView:$DataView},$$j=_export,fails$d=fails$z,ArrayBufferModule$2=arrayBuffer,anObject$3=anObject$j,toAbsoluteIndex$2=toAbsoluteIndex$7,toLength$a=toLength$p,speciesConstructor$5=speciesConstructor$8,ArrayBuffer$4=ArrayBufferModule$2.ArrayBuffer,DataView$2=ArrayBufferModule$2.DataView,nativeArrayBufferSlice=ArrayBuffer$4.prototype.slice,INCORRECT_SLICE=fails$d((function(){return!new ArrayBuffer$4(2).slice(1,void 0).byteLength}));$$j({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:INCORRECT_SLICE},{slice:function(e,t){if(void 0!==nativeArrayBufferSlice&&void 0===t)return nativeArrayBufferSlice.call(anObject$3(this),e);for(var r=anObject$3(this).byteLength,i=toAbsoluteIndex$2(e,r),n=toAbsoluteIndex$2(void 0===t?r:t,r),o=new(speciesConstructor$5(this,ArrayBuffer$4))(toLength$a(n-i)),a=new DataView$2(this),s=new DataView$2(o),l=0;i<n;)s.setUint8(l++,a.getUint8(i++));return o}});var typedArrayConstructor={exports:{}},NATIVE_ARRAY_BUFFER$1=arrayBufferNative,DESCRIPTORS$5=descriptors,global$d=global$E,isObject$5=isObject$l,has$3=has$h,classof$2=classof$8,createNonEnumerableProperty$1=createNonEnumerableProperty$d,redefine$4=redefine$f.exports,defineProperty$3=objectDefineProperty.f,getPrototypeOf=objectGetPrototypeOf,setPrototypeOf$1=objectSetPrototypeOf,wellKnownSymbol$4=wellKnownSymbol$r,uid$1=uid$5,Int8Array$3=global$d.Int8Array,Int8ArrayPrototype=Int8Array$3&&Int8Array$3.prototype,Uint8ClampedArray$1=global$d.Uint8ClampedArray,Uint8ClampedArrayPrototype=Uint8ClampedArray$1&&Uint8ClampedArray$1.prototype,TypedArray$1=Int8Array$3&&getPrototypeOf(Int8Array$3),TypedArrayPrototype$1=Int8ArrayPrototype&&getPrototypeOf(Int8ArrayPrototype),ObjectPrototype=Object.prototype,isPrototypeOf=ObjectPrototype.isPrototypeOf,TO_STRING_TAG=wellKnownSymbol$4("toStringTag"),TYPED_ARRAY_TAG$1=uid$1("TYPED_ARRAY_TAG"),NATIVE_ARRAY_BUFFER_VIEWS$2=NATIVE_ARRAY_BUFFER$1&&!!setPrototypeOf$1&&"Opera"!==classof$2(global$d.opera),TYPED_ARRAY_TAG_REQIRED=!1,NAME,TypedArrayConstructorsList={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},BigIntArrayConstructorsList={BigInt64Array:8,BigUint64Array:8},isView=function(e){if(!isObject$5(e))return!1;var t=classof$2(e);return"DataView"===t||has$3(TypedArrayConstructorsList,t)||has$3(BigIntArrayConstructorsList,t)},isTypedArray$1=function(e){if(!isObject$5(e))return!1;var t=classof$2(e);return has$3(TypedArrayConstructorsList,t)||has$3(BigIntArrayConstructorsList,t)},aTypedArray$m=function(e){if(isTypedArray$1(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor$5=function(e){if(setPrototypeOf$1){if(isPrototypeOf.call(TypedArray$1,e))return e}else for(var t in TypedArrayConstructorsList)if(has$3(TypedArrayConstructorsList,NAME)){var r=global$d[t];if(r&&(e===r||isPrototypeOf.call(r,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod$n=function(e,t,r){if(DESCRIPTORS$5){if(r)for(var i in TypedArrayConstructorsList){var n=global$d[i];if(n&&has$3(n.prototype,e))try{delete n.prototype[e]}catch(e){}}TypedArrayPrototype$1[e]&&!r||redefine$4(TypedArrayPrototype$1,e,r?t:NATIVE_ARRAY_BUFFER_VIEWS$2&&Int8ArrayPrototype[e]||t)}},exportTypedArrayStaticMethod$1=function(e,t,r){var i,n;if(DESCRIPTORS$5){if(setPrototypeOf$1){if(r)for(i in TypedArrayConstructorsList)if((n=global$d[i])&&has$3(n,e))try{delete n[e]}catch(e){}if(TypedArray$1[e]&&!r)return;try{return redefine$4(TypedArray$1,e,r?t:NATIVE_ARRAY_BUFFER_VIEWS$2&&TypedArray$1[e]||t)}catch(e){}}for(i in TypedArrayConstructorsList)!(n=global$d[i])||n[e]&&!r||redefine$4(n,e,t)}};for(NAME in TypedArrayConstructorsList)global$d[NAME]||(NATIVE_ARRAY_BUFFER_VIEWS$2=!1);if((!NATIVE_ARRAY_BUFFER_VIEWS$2||"function"!=typeof TypedArray$1||TypedArray$1===Function.prototype)&&(TypedArray$1=function(){throw TypeError("Incorrect invocation")},NATIVE_ARRAY_BUFFER_VIEWS$2))for(NAME in TypedArrayConstructorsList)global$d[NAME]&&setPrototypeOf$1(global$d[NAME],TypedArray$1);if((!NATIVE_ARRAY_BUFFER_VIEWS$2||!TypedArrayPrototype$1||TypedArrayPrototype$1===ObjectPrototype)&&(TypedArrayPrototype$1=TypedArray$1.prototype,NATIVE_ARRAY_BUFFER_VIEWS$2))for(NAME in TypedArrayConstructorsList)global$d[NAME]&&setPrototypeOf$1(global$d[NAME].prototype,TypedArrayPrototype$1);if(NATIVE_ARRAY_BUFFER_VIEWS$2&&getPrototypeOf(Uint8ClampedArrayPrototype)!==TypedArrayPrototype$1&&setPrototypeOf$1(Uint8ClampedArrayPrototype,TypedArrayPrototype$1),DESCRIPTORS$5&&!has$3(TypedArrayPrototype$1,TO_STRING_TAG))for(NAME in TYPED_ARRAY_TAG_REQIRED=!0,defineProperty$3(TypedArrayPrototype$1,TO_STRING_TAG,{get:function(){return isObject$5(this)?this[TYPED_ARRAY_TAG$1]:void 0}}),TypedArrayConstructorsList)global$d[NAME]&&createNonEnumerableProperty$1(global$d[NAME],TYPED_ARRAY_TAG$1,NAME);var arrayBufferViewCore={NATIVE_ARRAY_BUFFER_VIEWS:NATIVE_ARRAY_BUFFER_VIEWS$2,TYPED_ARRAY_TAG:TYPED_ARRAY_TAG_REQIRED&&TYPED_ARRAY_TAG$1,aTypedArray:aTypedArray$m,aTypedArrayConstructor:aTypedArrayConstructor$5,exportTypedArrayMethod:exportTypedArrayMethod$n,exportTypedArrayStaticMethod:exportTypedArrayStaticMethod$1,isView:isView,isTypedArray:isTypedArray$1,TypedArray:TypedArray$1,TypedArrayPrototype:TypedArrayPrototype$1},global$c=global$E,fails$c=fails$z,checkCorrectnessOfIteration=checkCorrectnessOfIteration$3,NATIVE_ARRAY_BUFFER_VIEWS$1=arrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS,ArrayBuffer$3=global$c.ArrayBuffer,Int8Array$2=global$c.Int8Array,typedArrayConstructorsRequireWrappers=!NATIVE_ARRAY_BUFFER_VIEWS$1||!fails$c((function(){Int8Array$2(1)}))||!fails$c((function(){new Int8Array$2(-1)}))||!checkCorrectnessOfIteration((function(e){new Int8Array$2,new Int8Array$2(null),new Int8Array$2(1.5),new Int8Array$2(e)}),!0)||fails$c((function(){return 1!==new Int8Array$2(new ArrayBuffer$3(2),1,void 0).length})),toInteger$2=toInteger$b,toPositiveInteger$1=function(e){var t=toInteger$2(e);if(t<0)throw RangeError("The argument can't be less than 0");return t},toPositiveInteger=toPositiveInteger$1,toOffset$2=function(e,t){var r=toPositiveInteger(e);if(r%t)throw RangeError("Wrong offset");return r},toObject$5=toObject$h,toLength$9=toLength$p,getIteratorMethod$2=getIteratorMethod$5,isArrayIteratorMethod=isArrayIteratorMethod$3,bind$1=functionBindContext,aTypedArrayConstructor$4=arrayBufferViewCore.aTypedArrayConstructor,typedArrayFrom$2=function(e){var t,r,i,n,o,a,s=toObject$5(e),l=arguments.length,u=l>1?arguments[1]:void 0,c=void 0!==u,d=getIteratorMethod$2(s);if(null!=d&&!isArrayIteratorMethod(d))for(a=(o=d.call(s)).next,s=[];!(n=a.call(o)).done;)s.push(n.value);for(c&&l>2&&(u=bind$1(u,arguments[2],2)),r=toLength$9(s.length),i=new(aTypedArrayConstructor$4(this))(r),t=0;r>t;t++)i[t]=c?u(s[t],t):s[t];return i},$$i=_export,global$b=global$E,DESCRIPTORS$4=descriptors,TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS$1=typedArrayConstructorsRequireWrappers,ArrayBufferViewCore$m=arrayBufferViewCore,ArrayBufferModule$1=arrayBuffer,anInstance$2=anInstance$5,createPropertyDescriptor$1=createPropertyDescriptor$7,createNonEnumerableProperty=createNonEnumerableProperty$d,toLength$8=toLength$p,toIndex=toIndex$2,toOffset$1=toOffset$2,toPrimitive=toPrimitive$6,has$2=has$h,classof$1=classof$8,isObject$4=isObject$l,create$3=objectCreate,setPrototypeOf=objectSetPrototypeOf,getOwnPropertyNames$1=objectGetOwnPropertyNames.f,typedArrayFrom$1=typedArrayFrom$2,forEach=arrayIteration.forEach,setSpecies$2=setSpecies$4,definePropertyModule=objectDefineProperty,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,InternalStateModule$2=internalState,inheritIfRequired$1=inheritIfRequired$3,getInternalState=InternalStateModule$2.get,setInternalState$2=InternalStateModule$2.set,nativeDefineProperty=definePropertyModule.f,nativeGetOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,round=Math.round,RangeError$1=global$b.RangeError,ArrayBuffer$2=ArrayBufferModule$1.ArrayBuffer,DataView$1=ArrayBufferModule$1.DataView,NATIVE_ARRAY_BUFFER_VIEWS=ArrayBufferViewCore$m.NATIVE_ARRAY_BUFFER_VIEWS,TYPED_ARRAY_TAG=ArrayBufferViewCore$m.TYPED_ARRAY_TAG,TypedArray=ArrayBufferViewCore$m.TypedArray,TypedArrayPrototype=ArrayBufferViewCore$m.TypedArrayPrototype,aTypedArrayConstructor$3=ArrayBufferViewCore$m.aTypedArrayConstructor,isTypedArray=ArrayBufferViewCore$m.isTypedArray,BYTES_PER_ELEMENT="BYTES_PER_ELEMENT",WRONG_LENGTH="Wrong length",fromList=function(e,t){for(var r=0,i=t.length,n=new(aTypedArrayConstructor$3(e))(i);i>r;)n[r]=t[r++];return n},addGetter=function(e,t){nativeDefineProperty(e,t,{get:function(){return getInternalState(this)[t]}})},isArrayBuffer=function(e){var t;return e instanceof ArrayBuffer$2||"ArrayBuffer"==(t=classof$1(e))||"SharedArrayBuffer"==t},isTypedArrayIndex=function(e,t){return isTypedArray(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},wrappedGetOwnPropertyDescriptor=function(e,t){return isTypedArrayIndex(e,t=toPrimitive(t,!0))?createPropertyDescriptor$1(2,e[t]):nativeGetOwnPropertyDescriptor(e,t)},wrappedDefineProperty=function(e,t,r){return!(isTypedArrayIndex(e,t=toPrimitive(t,!0))&&isObject$4(r)&&has$2(r,"value"))||has$2(r,"get")||has$2(r,"set")||r.configurable||has$2(r,"writable")&&!r.writable||has$2(r,"enumerable")&&!r.enumerable?nativeDefineProperty(e,t,r):(e[t]=r.value,e)};DESCRIPTORS$4?(NATIVE_ARRAY_BUFFER_VIEWS||(getOwnPropertyDescriptorModule.f=wrappedGetOwnPropertyDescriptor,definePropertyModule.f=wrappedDefineProperty,addGetter(TypedArrayPrototype,"buffer"),addGetter(TypedArrayPrototype,"byteOffset"),addGetter(TypedArrayPrototype,"byteLength"),addGetter(TypedArrayPrototype,"length")),$$i({target:"Object",stat:!0,forced:!NATIVE_ARRAY_BUFFER_VIEWS},{getOwnPropertyDescriptor:wrappedGetOwnPropertyDescriptor,defineProperty:wrappedDefineProperty}),typedArrayConstructor.exports=function(e,t,r){var i=e.match(/\d+$/)[0]/8,n=e+(r?"Clamped":"")+"Array",o="get"+e,a="set"+e,s=global$b[n],l=s,u=l&&l.prototype,c={},d=function(e,t){nativeDefineProperty(e,t,{get:function(){return function(e,t){var r=getInternalState(e);return r.view[o](t*i+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var o=getInternalState(e);r&&(n=(n=round(n))<0?0:n>255?255:255&n),o.view[a](t*i+o.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};NATIVE_ARRAY_BUFFER_VIEWS?TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS$1&&(l=t((function(e,t,r,o){return anInstance$2(e,l,n),inheritIfRequired$1(isObject$4(t)?isArrayBuffer(t)?void 0!==o?new s(t,toOffset$1(r,i),o):void 0!==r?new s(t,toOffset$1(r,i)):new s(t):isTypedArray(t)?fromList(l,t):typedArrayFrom$1.call(l,t):new s(toIndex(t)),e,l)})),setPrototypeOf&&setPrototypeOf(l,TypedArray),forEach(getOwnPropertyNames$1(s),(function(e){e in l||createNonEnumerableProperty(l,e,s[e])})),l.prototype=u):(l=t((function(e,t,r,o){anInstance$2(e,l,n);var a,s,u,c=0,p=0;if(isObject$4(t)){if(!isArrayBuffer(t))return isTypedArray(t)?fromList(l,t):typedArrayFrom$1.call(l,t);a=t,p=toOffset$1(r,i);var h=t.byteLength;if(void 0===o){if(h%i)throw RangeError$1(WRONG_LENGTH);if((s=h-p)<0)throw RangeError$1(WRONG_LENGTH)}else if((s=toLength$8(o)*i)+p>h)throw RangeError$1(WRONG_LENGTH);u=s/i}else u=toIndex(t),a=new ArrayBuffer$2(s=u*i);for(setInternalState$2(e,{buffer:a,byteOffset:p,byteLength:s,length:u,view:new DataView$1(a)});c<u;)d(e,c++)})),setPrototypeOf&&setPrototypeOf(l,TypedArray),u=l.prototype=create$3(TypedArrayPrototype)),u.constructor!==l&&createNonEnumerableProperty(u,"constructor",l),TYPED_ARRAY_TAG&&createNonEnumerableProperty(u,TYPED_ARRAY_TAG,n),c[n]=l,$$i({global:!0,forced:l!=s,sham:!NATIVE_ARRAY_BUFFER_VIEWS},c),BYTES_PER_ELEMENT in l||createNonEnumerableProperty(l,BYTES_PER_ELEMENT,i),BYTES_PER_ELEMENT in u||createNonEnumerableProperty(u,BYTES_PER_ELEMENT,i),setSpecies$2(n)}):typedArrayConstructor.exports=function(){};var createTypedArrayConstructor$4=typedArrayConstructor.exports;createTypedArrayConstructor$4("Uint8",(function(e){return function(t,r,i){return e(this,t,r,i)}}));var toObject$4=toObject$h,toAbsoluteIndex$1=toAbsoluteIndex$7,toLength$7=toLength$p,min$2=Math.min,arrayCopyWithin=[].copyWithin||function(e,t){var r=toObject$4(this),i=toLength$7(r.length),n=toAbsoluteIndex$1(e,i),o=toAbsoluteIndex$1(t,i),a=arguments.length>2?arguments[2]:void 0,s=min$2((void 0===a?i:toAbsoluteIndex$1(a,i))-o,i-n),l=1;for(o<n&&n<o+s&&(l=-1,o+=s-1,n+=s-1);s-- >0;)o in r?r[n]=r[o]:delete r[n],n+=l,o+=l;return r},ArrayBufferViewCore$l=arrayBufferViewCore,$copyWithin=arrayCopyWithin,aTypedArray$l=ArrayBufferViewCore$l.aTypedArray,exportTypedArrayMethod$m=ArrayBufferViewCore$l.exportTypedArrayMethod;exportTypedArrayMethod$m("copyWithin",(function(e,t){return $copyWithin.call(aTypedArray$l(this),e,t,arguments.length>2?arguments[2]:void 0)}));var ArrayBufferViewCore$k=arrayBufferViewCore,$every$1=arrayIteration.every,aTypedArray$k=ArrayBufferViewCore$k.aTypedArray,exportTypedArrayMethod$l=ArrayBufferViewCore$k.exportTypedArrayMethod;exportTypedArrayMethod$l("every",(function(e){return $every$1(aTypedArray$k(this),e,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$j=arrayBufferViewCore,$fill=arrayFill$1,aTypedArray$j=ArrayBufferViewCore$j.aTypedArray,exportTypedArrayMethod$k=ArrayBufferViewCore$j.exportTypedArrayMethod;exportTypedArrayMethod$k("fill",(function(e){return $fill.apply(aTypedArray$j(this),arguments)}));var aTypedArrayConstructor$2=arrayBufferViewCore.aTypedArrayConstructor,speciesConstructor$4=speciesConstructor$8,typedArrayFromSpeciesAndList=function(e,t){for(var r=speciesConstructor$4(e,e.constructor),i=0,n=t.length,o=new(aTypedArrayConstructor$2(r))(n);n>i;)o[i]=t[i++];return o},ArrayBufferViewCore$i=arrayBufferViewCore,$filter=arrayIteration.filter,fromSpeciesAndList=typedArrayFromSpeciesAndList,aTypedArray$i=ArrayBufferViewCore$i.aTypedArray,exportTypedArrayMethod$j=ArrayBufferViewCore$i.exportTypedArrayMethod;exportTypedArrayMethod$j("filter",(function(e){var t=$filter(aTypedArray$i(this),e,arguments.length>1?arguments[1]:void 0);return fromSpeciesAndList(this,t)}));var ArrayBufferViewCore$h=arrayBufferViewCore,$find=arrayIteration.find,aTypedArray$h=ArrayBufferViewCore$h.aTypedArray,exportTypedArrayMethod$i=ArrayBufferViewCore$h.exportTypedArrayMethod;exportTypedArrayMethod$i("find",(function(e){return $find(aTypedArray$h(this),e,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$g=arrayBufferViewCore,$findIndex=arrayIteration.findIndex,aTypedArray$g=ArrayBufferViewCore$g.aTypedArray,exportTypedArrayMethod$h=ArrayBufferViewCore$g.exportTypedArrayMethod;exportTypedArrayMethod$h("findIndex",(function(e){return $findIndex(aTypedArray$g(this),e,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$f=arrayBufferViewCore,$forEach=arrayIteration.forEach,aTypedArray$f=ArrayBufferViewCore$f.aTypedArray,exportTypedArrayMethod$g=ArrayBufferViewCore$f.exportTypedArrayMethod;exportTypedArrayMethod$g("forEach",(function(e){$forEach(aTypedArray$f(this),e,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$e=arrayBufferViewCore,$includes=arrayIncludes.includes,aTypedArray$e=ArrayBufferViewCore$e.aTypedArray,exportTypedArrayMethod$f=ArrayBufferViewCore$e.exportTypedArrayMethod;exportTypedArrayMethod$f("includes",(function(e){return $includes(aTypedArray$e(this),e,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$d=arrayBufferViewCore,$indexOf=arrayIncludes.indexOf,aTypedArray$d=ArrayBufferViewCore$d.aTypedArray,exportTypedArrayMethod$e=ArrayBufferViewCore$d.exportTypedArrayMethod;exportTypedArrayMethod$e("indexOf",(function(e){return $indexOf(aTypedArray$d(this),e,arguments.length>1?arguments[1]:void 0)}));var global$a=global$E,ArrayBufferViewCore$c=arrayBufferViewCore,ArrayIterators=es_array_iterator,wellKnownSymbol$3=wellKnownSymbol$r,ITERATOR$2=wellKnownSymbol$3("iterator"),Uint8Array$2=global$a.Uint8Array,arrayValues=ArrayIterators.values,arrayKeys=ArrayIterators.keys,arrayEntries=ArrayIterators.entries,aTypedArray$c=ArrayBufferViewCore$c.aTypedArray,exportTypedArrayMethod$d=ArrayBufferViewCore$c.exportTypedArrayMethod,nativeTypedArrayIterator=Uint8Array$2&&Uint8Array$2.prototype[ITERATOR$2],CORRECT_ITER_NAME=!!nativeTypedArrayIterator&&("values"==nativeTypedArrayIterator.name||null==nativeTypedArrayIterator.name),typedArrayValues=function(){return arrayValues.call(aTypedArray$c(this))};exportTypedArrayMethod$d("entries",(function(){return arrayEntries.call(aTypedArray$c(this))})),exportTypedArrayMethod$d("keys",(function(){return arrayKeys.call(aTypedArray$c(this))})),exportTypedArrayMethod$d("values",typedArrayValues,!CORRECT_ITER_NAME),exportTypedArrayMethod$d(ITERATOR$2,typedArrayValues,!CORRECT_ITER_NAME);var ArrayBufferViewCore$b=arrayBufferViewCore,aTypedArray$b=ArrayBufferViewCore$b.aTypedArray,exportTypedArrayMethod$c=ArrayBufferViewCore$b.exportTypedArrayMethod,$join=[].join;exportTypedArrayMethod$c("join",(function(e){return $join.apply(aTypedArray$b(this),arguments)}));var toIndexedObject=toIndexedObject$9,toInteger$1=toInteger$b,toLength$6=toLength$p,arrayMethodIsStrict$2=arrayMethodIsStrict$8,min$1=Math.min,$lastIndexOf$1=[].lastIndexOf,NEGATIVE_ZERO=!!$lastIndexOf$1&&1/[1].lastIndexOf(1,-0)<0,STRICT_METHOD$2=arrayMethodIsStrict$2("lastIndexOf"),FORCED$5=NEGATIVE_ZERO||!STRICT_METHOD$2,arrayLastIndexOf=FORCED$5?function(e){if(NEGATIVE_ZERO)return $lastIndexOf$1.apply(this,arguments)||0;var t=toIndexedObject(this),r=toLength$6(t.length),i=r-1;for(arguments.length>1&&(i=min$1(i,toInteger$1(arguments[1]))),i<0&&(i=r+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}:$lastIndexOf$1,ArrayBufferViewCore$a=arrayBufferViewCore,$lastIndexOf=arrayLastIndexOf,aTypedArray$a=ArrayBufferViewCore$a.aTypedArray,exportTypedArrayMethod$b=ArrayBufferViewCore$a.exportTypedArrayMethod;exportTypedArrayMethod$b("lastIndexOf",(function(e){return $lastIndexOf.apply(aTypedArray$a(this),arguments)}));var ArrayBufferViewCore$9=arrayBufferViewCore,$map=arrayIteration.map,speciesConstructor$3=speciesConstructor$8,aTypedArray$9=ArrayBufferViewCore$9.aTypedArray,aTypedArrayConstructor$1=ArrayBufferViewCore$9.aTypedArrayConstructor,exportTypedArrayMethod$a=ArrayBufferViewCore$9.exportTypedArrayMethod;exportTypedArrayMethod$a("map",(function(e){return $map(aTypedArray$9(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(aTypedArrayConstructor$1(speciesConstructor$3(e,e.constructor)))(t)}))}));var aFunction$1=aFunction$8,toObject$3=toObject$h,IndexedObject=indexedObject,toLength$5=toLength$p,createMethod=function(e){return function(t,r,i,n){aFunction$1(r);var o=toObject$3(t),a=IndexedObject(o),s=toLength$5(o.length),l=e?s-1:0,u=e?-1:1;if(i<2)for(;;){if(l in a){n=a[l],l+=u;break}if(l+=u,e?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=u)l in a&&(n=r(n,a[l],l,o));return n}},arrayReduce={left:createMethod(!1),right:createMethod(!0)},ArrayBufferViewCore$8=arrayBufferViewCore,$reduce$1=arrayReduce.left,aTypedArray$8=ArrayBufferViewCore$8.aTypedArray,exportTypedArrayMethod$9=ArrayBufferViewCore$8.exportTypedArrayMethod;exportTypedArrayMethod$9("reduce",(function(e){return $reduce$1(aTypedArray$8(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$7=arrayBufferViewCore,$reduceRight=arrayReduce.right,aTypedArray$7=ArrayBufferViewCore$7.aTypedArray,exportTypedArrayMethod$8=ArrayBufferViewCore$7.exportTypedArrayMethod;exportTypedArrayMethod$8("reduceRight",(function(e){return $reduceRight(aTypedArray$7(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$6=arrayBufferViewCore,aTypedArray$6=ArrayBufferViewCore$6.aTypedArray,exportTypedArrayMethod$7=ArrayBufferViewCore$6.exportTypedArrayMethod,floor$4=Math.floor;exportTypedArrayMethod$7("reverse",(function(){for(var e,t=this,r=aTypedArray$6(t).length,i=floor$4(r/2),n=0;n<i;)e=t[n],t[n++]=t[--r],t[r]=e;return t}));var ArrayBufferViewCore$5=arrayBufferViewCore,toLength$4=toLength$p,toOffset=toOffset$2,toObject$2=toObject$h,fails$b=fails$z,aTypedArray$5=ArrayBufferViewCore$5.aTypedArray,exportTypedArrayMethod$6=ArrayBufferViewCore$5.exportTypedArrayMethod,FORCED$4=fails$b((function(){new Int8Array(1).set({})}));exportTypedArrayMethod$6("set",(function(e){aTypedArray$5(this);var t=toOffset(arguments.length>1?arguments[1]:void 0,1),r=this.length,i=toObject$2(e),n=toLength$4(i.length),o=0;if(n+t>r)throw RangeError("Wrong length");for(;o<n;)this[t+o]=i[o++]}),FORCED$4);var ArrayBufferViewCore$4=arrayBufferViewCore,speciesConstructor$2=speciesConstructor$8,fails$a=fails$z,aTypedArray$4=ArrayBufferViewCore$4.aTypedArray,aTypedArrayConstructor=ArrayBufferViewCore$4.aTypedArrayConstructor,exportTypedArrayMethod$5=ArrayBufferViewCore$4.exportTypedArrayMethod,$slice$1=[].slice,FORCED$3=fails$a((function(){new Int8Array(1).slice()}));exportTypedArrayMethod$5("slice",(function(e,t){for(var r=$slice$1.call(aTypedArray$4(this),e,t),i=speciesConstructor$2(this,this.constructor),n=0,o=r.length,a=new(aTypedArrayConstructor(i))(o);o>n;)a[n]=r[n++];return a}),FORCED$3);var ArrayBufferViewCore$3=arrayBufferViewCore,$some=arrayIteration.some,aTypedArray$3=ArrayBufferViewCore$3.aTypedArray,exportTypedArrayMethod$4=ArrayBufferViewCore$3.exportTypedArrayMethod;exportTypedArrayMethod$4("some",(function(e){return $some(aTypedArray$3(this),e,arguments.length>1?arguments[1]:void 0)}));var ArrayBufferViewCore$2=arrayBufferViewCore,global$9=global$E,fails$9=fails$z,aFunction=aFunction$8,toLength$3=toLength$p,internalSort=arraySort,FF=engineFfVersion,IE_OR_EDGE=engineIsIeOrEdge,V8=engineV8Version,WEBKIT=engineWebkitVersion,aTypedArray$2=ArrayBufferViewCore$2.aTypedArray,exportTypedArrayMethod$3=ArrayBufferViewCore$2.exportTypedArrayMethod,Uint16Array=global$9.Uint16Array,nativeSort=Uint16Array&&Uint16Array.prototype.sort,ACCEPT_INCORRECT_ARGUMENTS=!!nativeSort&&!fails$9((function(){var e=new Uint16Array(2);e.sort(null),e.sort({})})),STABLE_SORT=!!nativeSort&&!fails$9((function(){if(V8)return V8<74;if(FF)return FF<67;if(IE_OR_EDGE)return!0;if(WEBKIT)return WEBKIT<602;var e,t,r=new Uint16Array(516),i=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,i[e]=e-2*t+3;for(r.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==i[e])return!0})),getSortCompare=function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}};exportTypedArrayMethod$3("sort",(function(e){var t=this;if(void 0!==e&&aFunction(e),STABLE_SORT)return nativeSort.call(t,e);aTypedArray$2(t);var r,i=toLength$3(t.length),n=Array(i);for(r=0;r<i;r++)n[r]=t[r];for(n=internalSort(t,getSortCompare(e)),r=0;r<i;r++)t[r]=n[r];return t}),!STABLE_SORT||ACCEPT_INCORRECT_ARGUMENTS);var ArrayBufferViewCore$1=arrayBufferViewCore,toLength$2=toLength$p,toAbsoluteIndex=toAbsoluteIndex$7,speciesConstructor$1=speciesConstructor$8,aTypedArray$1=ArrayBufferViewCore$1.aTypedArray,exportTypedArrayMethod$2=ArrayBufferViewCore$1.exportTypedArrayMethod;exportTypedArrayMethod$2("subarray",(function(e,t){var r=aTypedArray$1(this),i=r.length,n=toAbsoluteIndex(e,i);return new(speciesConstructor$1(r,r.constructor))(r.buffer,r.byteOffset+n*r.BYTES_PER_ELEMENT,toLength$2((void 0===t?i:toAbsoluteIndex(t,i))-n))}));var global$8=global$E,ArrayBufferViewCore=arrayBufferViewCore,fails$8=fails$z,Int8Array$1=global$8.Int8Array,aTypedArray=ArrayBufferViewCore.aTypedArray,exportTypedArrayMethod$1=ArrayBufferViewCore.exportTypedArrayMethod,$toLocaleString=[].toLocaleString,$slice=[].slice,TO_LOCALE_STRING_BUG=!!Int8Array$1&&fails$8((function(){$toLocaleString.call(new Int8Array$1(1))})),FORCED$2=fails$8((function(){return[1,2].toLocaleString()!=new Int8Array$1([1,2]).toLocaleString()}))||!fails$8((function(){Int8Array$1.prototype.toLocaleString.call([1,2])}));exportTypedArrayMethod$1("toLocaleString",(function(){return $toLocaleString.apply(TO_LOCALE_STRING_BUG?$slice.call(aTypedArray(this)):aTypedArray(this),arguments)}),FORCED$2);var exportTypedArrayMethod=arrayBufferViewCore.exportTypedArrayMethod,fails$7=fails$z,global$7=global$E,Uint8Array$1=global$7.Uint8Array,Uint8ArrayPrototype=Uint8Array$1&&Uint8Array$1.prototype||{},arrayToString=[].toString,arrayJoin=[].join;fails$7((function(){arrayToString.call({})}))&&(arrayToString=function(){return arrayJoin.call(this)});var IS_NOT_ARRAY_METHOD=Uint8ArrayPrototype.toString!=arrayToString;exportTypedArrayMethod("toString",arrayToString,IS_NOT_ARRAY_METHOD);var global$6=global$E,globalIsFinite=global$6.isFinite,numberIsFinite$1=Number.isFinite||function(e){return"number"==typeof e&&globalIsFinite(e)},$$h=_export,numberIsFinite=numberIsFinite$1;$$h({target:"Number",stat:!0},{isFinite:numberIsFinite});var $$g=_export,global$5=global$E,arrayBufferModule=arrayBuffer,setSpecies$1=setSpecies$4,ARRAY_BUFFER="ArrayBuffer",ArrayBuffer$1=arrayBufferModule[ARRAY_BUFFER],NativeArrayBuffer=global$5[ARRAY_BUFFER];$$g({global:!0,forced:NativeArrayBuffer!==ArrayBuffer$1},{ArrayBuffer:ArrayBuffer$1}),setSpecies$1(ARRAY_BUFFER);var $$f=_export,ArrayBufferModule=arrayBuffer,NATIVE_ARRAY_BUFFER=arrayBufferNative;$$f({global:!0,forced:!NATIVE_ARRAY_BUFFER},{DataView:ArrayBufferModule.DataView});var createTypedArrayConstructor$3=typedArrayConstructor.exports;createTypedArrayConstructor$3("Int16",(function(e){return function(t,r,i){return e(this,t,r,i)}}));var defineWellKnownSymbol=defineWellKnownSymbol$3;defineWellKnownSymbol("iterator");var DESCRIPTORS$3=descriptors,objectDefinePropertyModule=objectDefineProperty,regExpFlags=regexpFlags$1,UNSUPPORTED_Y$1=regexpStickyHelpers.UNSUPPORTED_Y;DESCRIPTORS$3&&("g"!=/./g.flags||UNSUPPORTED_Y$1)&&objectDefinePropertyModule.f(RegExp.prototype,"flags",{configurable:!0,get:regExpFlags});var requireObjectCoercible$1=requireObjectCoercible$b,quot=/"/g,createHtml=function(e,t,r,i){var n=String(requireObjectCoercible$1(e)),o="<"+t;return""!==r&&(o+=" "+r+'="'+String(i).replace(quot,"&quot;")+'"'),o+">"+n+"</"+t+">"},fails$6=fails$z,stringHtmlForced=function(e){return fails$6((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))},$$e=_export,createHTML=createHtml,forcedStringHTMLMethod=stringHtmlForced;$$e({target:"String",proto:!0,forced:forcedStringHTMLMethod("fixed")},{fixed:function(){return createHTML(this,"tt","","")}});var $$d=_export,$reduce=arrayReduce.left,arrayMethodIsStrict$1=arrayMethodIsStrict$8,CHROME_VERSION=engineV8Version,IS_NODE=engineIsNode,STRICT_METHOD$1=arrayMethodIsStrict$1("reduce"),CHROME_BUG=!IS_NODE&&CHROME_VERSION>79&&CHROME_VERSION<83;$$d({target:"Array",proto:!0,forced:!STRICT_METHOD$1||CHROME_BUG},{reduce:function(e){return $reduce(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var fails$5=fails$z,whitespaces$1=whitespaces$4,non="âÂá ",stringTrimForced=function(e){return fails$5((function(){return!!whitespaces$1[e]()||non[e]()!=non||whitespaces$1[e].name!==e}))},$$c=_export,$trim=stringTrim.trim,forcedStringTrimMethod=stringTrimForced;$$c({target:"String",proto:!0,forced:forcedStringTrimMethod("trim")},{trim:function(){return $trim(this)}});var $$b=_export,lastIndexOf=arrayLastIndexOf;$$b({target:"Array",proto:!0,forced:lastIndexOf!==[].lastIndexOf},{lastIndexOf:lastIndexOf});var toObject$1=toObject$h,floor$3=Math.floor,replace$1="".replace,SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d{1,2})/g,getSubstitution$1=function(e,t,r,i,n,o){var a=r+e.length,s=i.length,l=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==n&&(n=toObject$1(n),l=SUBSTITUTION_SYMBOLS),replace$1.call(o,l,(function(o,l){var u;switch(l.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(a);case"<":u=n[l.slice(1,-1)];break;default:var c=+l;if(0===c)return o;if(c>s){var d=floor$3(c/10);return 0===d?o:d<=s?void 0===i[d-1]?l.charAt(1):i[d-1]+l.charAt(1):o}u=i[c-1]}return void 0===u?"":u}))},fixRegExpWellKnownSymbolLogic=fixRegexpWellKnownSymbolLogic,anObject$2=anObject$j,toLength$1=toLength$p,toInteger=toInteger$b,requireObjectCoercible=requireObjectCoercible$b,advanceStringIndex=advanceStringIndex$3,getSubstitution=getSubstitution$1,regExpExec=regexpExecAbstract,max=Math.max,min=Math.min,maybeToString=function(e){return void 0===e?e:String(e)};fixRegExpWellKnownSymbolLogic("replace",2,(function(e,t,r,i){var n=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=i.REPLACE_KEEPS_$0,a=n?"$":"$0";return[function(r,i){var n=requireObjectCoercible(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,n,i):t.call(String(n),r,i)},function(e,i){if(!n&&o||"string"==typeof i&&-1===i.indexOf(a)){var s=r(t,e,this,i);if(s.done)return s.value}var l=anObject$2(e),u=String(this),c="function"==typeof i;c||(i=String(i));var d=l.global;if(d){var p=l.unicode;l.lastIndex=0}for(var h=[];;){var f=regExpExec(l,u);if(null===f)break;if(h.push(f),!d)break;""===String(f[0])&&(l.lastIndex=advanceStringIndex(u,toLength$1(l.lastIndex),p))}for(var y="",m=0,_=0;_<h.length;_++){f=h[_];for(var g=String(f[0]),b=max(min(toInteger(f.index),u.length),0),v=[],$=1;$<f.length;$++)v.push(maybeToString(f[$]));var E=f.groups;if(c){var S=[g].concat(v,b,u);void 0!==E&&S.push(E);var A=String(i.apply(void 0,S))}else A=getSubstitution(g,u,b,v,E,i);b>=m&&(y+=u.slice(m,b)+A,m=b+g.length)}return y+u.slice(m)}]}));var $$a=_export;$$a({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991});var global$4=global$E,trim=stringTrim.trim,whitespaces=whitespaces$4,$parseFloat=global$4.parseFloat,FORCED$1=1/$parseFloat(whitespaces+"-0")!=-1/0,numberParseFloat=FORCED$1?function(e){var t=trim(String(e)),r=$parseFloat(t);return 0===r&&"-"==t.charAt(0)?-0:r}:$parseFloat,$$9=_export,parseFloatImplementation=numberParseFloat;$$9({global:!0,forced:parseFloat!=parseFloatImplementation},{parseFloat:parseFloatImplementation});var DESCRIPTORS$2=descriptors,addToUnscopables=addToUnscopables$5,toObject=toObject$h,toLength=toLength$p,defineProperty$2=objectDefineProperty.f;DESCRIPTORS$2&&!("lastIndex"in[])&&(defineProperty$2(Array.prototype,"lastIndex",{configurable:!0,get:function(){var e=toObject(this),t=toLength(e.length);return 0==t?0:t-1}}),addToUnscopables("lastIndex"));var DESCRIPTORS$1=descriptors,global$3=global$E,isForced=isForced_1,inheritIfRequired=inheritIfRequired$3,defineProperty$1=objectDefineProperty.f,getOwnPropertyNames=objectGetOwnPropertyNames.f,isRegExp=isRegexp,getFlags=regexpFlags$1,stickyHelpers=regexpStickyHelpers,redefine$3=redefine$f.exports,fails$4=fails$z,enforceInternalState=internalState.enforce,setSpecies=setSpecies$4,wellKnownSymbol$2=wellKnownSymbol$r,MATCH=wellKnownSymbol$2("match"),NativeRegExp=global$3.RegExp,RegExpPrototype=NativeRegExp.prototype,re1=/a/g,re2=/a/g,CORRECT_NEW=new NativeRegExp(re1)!==re1,UNSUPPORTED_Y=stickyHelpers.UNSUPPORTED_Y,FORCED=DESCRIPTORS$1&&isForced("RegExp",!CORRECT_NEW||UNSUPPORTED_Y||fails$4((function(){return re2[MATCH]=!1,NativeRegExp(re1)!=re1||NativeRegExp(re2)==re2||"/a/i"!=NativeRegExp(re1,"i")})));if(FORCED){for(var RegExpWrapper=function(e,t){var r,i=this instanceof RegExpWrapper,n=isRegExp(e),o=void 0===t;if(!i&&n&&e.constructor===RegExpWrapper&&o)return e;CORRECT_NEW?n&&!o&&(e=e.source):e instanceof RegExpWrapper&&(o&&(t=getFlags.call(e)),e=e.source),UNSUPPORTED_Y&&(r=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var a=inheritIfRequired(CORRECT_NEW?new NativeRegExp(e,t):NativeRegExp(e,t),i?this:RegExpPrototype,RegExpWrapper);UNSUPPORTED_Y&&r&&(enforceInternalState(a).sticky=!0);return a},proxy=function(e){e in RegExpWrapper||defineProperty$1(RegExpWrapper,e,{configurable:!0,get:function(){return NativeRegExp[e]},set:function(t){NativeRegExp[e]=t}})},keys=getOwnPropertyNames(NativeRegExp),index=0;keys.length>index;)proxy(keys[index++]);RegExpPrototype.constructor=RegExpWrapper,RegExpWrapper.prototype=RegExpPrototype,redefine$3(global$3,"RegExp",RegExpWrapper)}setSpecies("RegExp");var $$8=_export,$every=arrayIteration.every,arrayMethodIsStrict=arrayMethodIsStrict$8,STRICT_METHOD=arrayMethodIsStrict("every");$$8({target:"Array",proto:!0,forced:!STRICT_METHOD},{every:function(e){return $every(this,e,arguments.length>1?arguments[1]:void 0)}});var $$7=_export;$$7({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var fails$3=fails$z,wellKnownSymbol$1=wellKnownSymbol$r,IS_PURE=isPure,ITERATOR$1=wellKnownSymbol$1("iterator"),nativeUrl=!fails$3((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),r+=i+e})),IS_PURE&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[ITERATOR$1]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\0-\u007E]/,regexSeparators=/[.\u3002\uFF0E\uFF61]/g,OVERFLOW_ERROR="Overflow: input needs wider integers to process",baseMinusTMin=base-tMin,floor$2=Math.floor,stringFromCharCode=String.fromCharCode,ucs2decode=function(e){for(var t=[],r=0,i=e.length;r<i;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<i){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&n)<<10)+(1023&o)+65536):(t.push(n),r--)}else t.push(n)}return t},digitToBasic=function(e){return e+22+75*(e<26)},adapt=function(e,t,r){var i=0;for(e=r?floor$2(e/damp):e>>1,e+=floor$2(e/t);e>baseMinusTMin*tMax>>1;i+=base)e=floor$2(e/baseMinusTMin);return floor$2(i+(baseMinusTMin+1)*e/(e+skew))},encode=function(e){var t,r,i=[],n=(e=ucs2decode(e)).length,o=initialN,a=0,s=initialBias;for(t=0;t<e.length;t++)(r=e[t])<128&&i.push(stringFromCharCode(r));var l=i.length,u=l;for(l&&i.push(delimiter);u<n;){var c=maxInt;for(t=0;t<e.length;t++)(r=e[t])>=o&&r<c&&(c=r);var d=u+1;if(c-o>floor$2((maxInt-a)/d))throw RangeError(OVERFLOW_ERROR);for(a+=(c-o)*d,o=c,t=0;t<e.length;t++){if((r=e[t])<o&&++a>maxInt)throw RangeError(OVERFLOW_ERROR);if(r==o){for(var p=a,h=base;;h+=base){var f=h<=s?tMin:h>=s+tMax?tMax:h-s;if(p<f)break;var y=p-f,m=base-f;i.push(stringFromCharCode(digitToBasic(f+y%m))),p=floor$2(y/m)}i.push(stringFromCharCode(digitToBasic(p))),s=adapt(a,d,u==l),a=0,++u}}++a,++o}return i.join("")},stringPunycodeToAscii=function(e){var t,r,i=[],n=e.toLowerCase().replace(regexSeparators,".").split(".");for(t=0;t<n.length;t++)r=n[t],i.push(regexNonASCII.test(r)?"xn--"+encode(r):r);return i.join(".")},anObject$1=anObject$j,getIteratorMethod$1=getIteratorMethod$5,getIterator$1=function(e){var t=getIteratorMethod$1(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return anObject$1(t.call(e))},$$6=_export,getBuiltIn$1=getBuiltIn$8,USE_NATIVE_URL$1=nativeUrl,redefine$2=redefine$f.exports,redefineAll=redefineAll$3,setToStringTag$1=setToStringTag$9,createIteratorConstructor=createIteratorConstructor$2,InternalStateModule$1=internalState,anInstance$1=anInstance$5,hasOwn=has$h,bind=functionBindContext,classof=classof$8,anObject=anObject$j,isObject$3=isObject$l,create$2=objectCreate,createPropertyDescriptor=createPropertyDescriptor$7,getIterator=getIterator$1,getIteratorMethod=getIteratorMethod$5,wellKnownSymbol=wellKnownSymbol$r,$fetch=getBuiltIn$1("fetch"),Headers=getBuiltIn$1("Headers"),ITERATOR=wellKnownSymbol("iterator"),URL_SEARCH_PARAMS="URLSearchParams",URL_SEARCH_PARAMS_ITERATOR=URL_SEARCH_PARAMS+"Iterator",setInternalState$1=InternalStateModule$1.set,getInternalParamsState=InternalStateModule$1.getterFor(URL_SEARCH_PARAMS),getInternalIteratorState=InternalStateModule$1.getterFor(URL_SEARCH_PARAMS_ITERATOR),plus=/\+/g,sequences=Array(4),percentSequence=function(e){return sequences[e-1]||(sequences[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},percentDecode=function(e){try{return decodeURIComponent(e)}catch(t){return e}},deserialize=function(e){var t=e.replace(plus," "),r=4;try{return decodeURIComponent(t)}catch(e){for(;r;)t=t.replace(percentSequence(r--),percentDecode);return t}},find=/[!'()~]|%20/g,replace={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(e){return replace[e]},serialize=function(e){return encodeURIComponent(e).replace(find,replacer)},parseSearchParams=function(e,t){if(t)for(var r,i,n=t.split("&"),o=0;o<n.length;)(r=n[o++]).length&&(i=r.split("="),e.push({key:deserialize(i.shift()),value:deserialize(i.join("="))}))},updateSearchParams=function(e){this.entries.length=0,parseSearchParams(this.entries,e)},validateArgumentsLength=function(e,t){if(e<t)throw TypeError("Not enough arguments")},URLSearchParamsIterator=createIteratorConstructor((function(e,t){setInternalState$1(this,{type:URL_SEARCH_PARAMS_ITERATOR,iterator:getIterator(getInternalParamsState(e).entries),kind:t})}),"Iterator",(function(){var e=getInternalIteratorState(this),t=e.kind,r=e.iterator.next(),i=r.value;return r.done||(r.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),r})),URLSearchParamsConstructor=function(){anInstance$1(this,URLSearchParamsConstructor,URL_SEARCH_PARAMS);var e,t,r,i,n,o,a,s,l,u=arguments.length>0?arguments[0]:void 0,c=this,d=[];if(setInternalState$1(c,{type:URL_SEARCH_PARAMS,entries:d,updateURL:function(){},updateSearchParams:updateSearchParams}),void 0!==u)if(isObject$3(u))if("function"==typeof(e=getIteratorMethod(u)))for(r=(t=e.call(u)).next;!(i=r.call(t)).done;){if((a=(o=(n=getIterator(anObject(i.value))).next).call(n)).done||(s=o.call(n)).done||!o.call(n).done)throw TypeError("Expected sequence with length 2");d.push({key:a.value+"",value:s.value+""})}else for(l in u)hasOwn(u,l)&&d.push({key:l,value:u[l]+""});else parseSearchParams(d,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},URLSearchParamsPrototype=URLSearchParamsConstructor.prototype;redefineAll(URLSearchParamsPrototype,{append:function(e,t){validateArgumentsLength(arguments.length,2);var r=getInternalParamsState(this);r.entries.push({key:e+"",value:t+""}),r.updateURL()},delete:function(e){validateArgumentsLength(arguments.length,1);for(var t=getInternalParamsState(this),r=t.entries,i=e+"",n=0;n<r.length;)r[n].key===i?r.splice(n,1):n++;t.updateURL()},get:function(e){validateArgumentsLength(arguments.length,1);for(var t=getInternalParamsState(this).entries,r=e+"",i=0;i<t.length;i++)if(t[i].key===r)return t[i].value;return null},getAll:function(e){validateArgumentsLength(arguments.length,1);for(var t=getInternalParamsState(this).entries,r=e+"",i=[],n=0;n<t.length;n++)t[n].key===r&&i.push(t[n].value);return i},has:function(e){validateArgumentsLength(arguments.length,1);for(var t=getInternalParamsState(this).entries,r=e+"",i=0;i<t.length;)if(t[i++].key===r)return!0;return!1},set:function(e,t){validateArgumentsLength(arguments.length,1);for(var r,i=getInternalParamsState(this),n=i.entries,o=!1,a=e+"",s=t+"",l=0;l<n.length;l++)(r=n[l]).key===a&&(o?n.splice(l--,1):(o=!0,r.value=s));o||n.push({key:a,value:s}),i.updateURL()},sort:function(){var e,t,r,i=getInternalParamsState(this),n=i.entries,o=n.slice();for(n.length=0,r=0;r<o.length;r++){for(e=o[r],t=0;t<r;t++)if(n[t].key>e.key){n.splice(t,0,e);break}t===r&&n.push(e)}i.updateURL()},forEach:function(e){for(var t,r=getInternalParamsState(this).entries,i=bind(e,arguments.length>1?arguments[1]:void 0,3),n=0;n<r.length;)i((t=r[n++]).value,t.key,this)},keys:function(){return new URLSearchParamsIterator(this,"keys")},values:function(){return new URLSearchParamsIterator(this,"values")},entries:function(){return new URLSearchParamsIterator(this,"entries")}},{enumerable:!0}),redefine$2(URLSearchParamsPrototype,ITERATOR,URLSearchParamsPrototype.entries),redefine$2(URLSearchParamsPrototype,"toString",(function(){for(var e,t=getInternalParamsState(this).entries,r=[],i=0;i<t.length;)e=t[i++],r.push(serialize(e.key)+"="+serialize(e.value));return r.join("&")}),{enumerable:!0}),setToStringTag$1(URLSearchParamsConstructor,URL_SEARCH_PARAMS),$$6({global:!0,forced:!USE_NATIVE_URL$1},{URLSearchParams:URLSearchParamsConstructor}),USE_NATIVE_URL$1||"function"!=typeof $fetch||"function"!=typeof Headers||$$6({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,r,i,n=[e];return arguments.length>1&&(isObject$3(t=arguments[1])&&(r=t.body,classof(r)===URL_SEARCH_PARAMS&&((i=t.headers?new Headers(t.headers):new Headers).has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=create$2(t,{body:createPropertyDescriptor(0,String(r)),headers:createPropertyDescriptor(0,i)}))),n.push(t)),$fetch.apply(this,n)}});var web_urlSearchParams={URLSearchParams:URLSearchParamsConstructor,getState:getInternalParamsState},$$5=_export,DESCRIPTORS=descriptors,USE_NATIVE_URL=nativeUrl,global$2=global$E,defineProperties=objectDefineProperties,redefine$1=redefine$f.exports,anInstance=anInstance$5,has$1=has$h,assign=objectAssign,arrayFrom=arrayFrom$1,codeAt=stringMultibyte.codeAt,toASCII=stringPunycodeToAscii,setToStringTag=setToStringTag$9,URLSearchParamsModule=web_urlSearchParams,InternalStateModule=internalState,NativeURL=global$2.URL,URLSearchParams$1=URLSearchParamsModule.URLSearchParams,getInternalSearchParamsState=URLSearchParamsModule.getState,setInternalState=InternalStateModule.set,getInternalURLState=InternalStateModule.getterFor("URL"),floor$1=Math.floor,pow=Math.pow,INVALID_AUTHORITY="Invalid authority",INVALID_SCHEME="Invalid scheme",INVALID_HOST="Invalid host",INVALID_PORT="Invalid port",ALPHA=/[A-Za-z]/,ALPHANUMERIC=/[\d+-.A-Za-z]/,DIGIT=/\d/,HEX_START=/^(0x|0X)/,OCT=/^[0-7]+$/,DEC=/^\d+$/,HEX=/^[\dA-Fa-f]+$/,FORBIDDEN_HOST_CODE_POINT=/[\0\t\n\r #%/:?@[\\]]/,FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT=/[\0\t\n\r #/:?@[\\]]/,LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,TAB_AND_NEW_LINE=/[\t\n\r]/g,EOF,parseHost=function(e,t){var r,i,n;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return INVALID_HOST;if(!(r=parseIPv6(t.slice(1,-1))))return INVALID_HOST;e.host=r}else if(isSpecial(e)){if(t=toASCII(t),FORBIDDEN_HOST_CODE_POINT.test(t))return INVALID_HOST;if(null===(r=parseIPv4(t)))return INVALID_HOST;e.host=r}else{if(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT.test(t))return INVALID_HOST;for(r="",i=arrayFrom(t),n=0;n<i.length;n++)r+=percentEncode(i[n],C0ControlPercentEncodeSet);e.host=r}},parseIPv4=function(e){var t,r,i,n,o,a,s,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(r=[],i=0;i<t;i++){if(""==(n=l[i]))return e;if(o=10,n.length>1&&"0"==n.charAt(0)&&(o=HEX_START.test(n)?16:8,n=n.slice(8==o?1:2)),""===n)a=0;else{if(!(10==o?DEC:8==o?OCT:HEX).test(n))return e;a=parseInt(n,o)}r.push(a)}for(i=0;i<t;i++)if(a=r[i],i==t-1){if(a>=pow(256,5-t))return null}else if(a>255)return null;for(s=r.pop(),i=0;i<r.length;i++)s+=r[i]*pow(256,3-i);return s},parseIPv6=function(e){var t,r,i,n,o,a,s,l=[0,0,0,0,0,0,0,0],u=0,c=null,d=0,p=function(){return e.charAt(d)};if(":"==p()){if(":"!=e.charAt(1))return;d+=2,c=++u}for(;p();){if(8==u)return;if(":"!=p()){for(t=r=0;r<4&&HEX.test(p());)t=16*t+parseInt(p(),16),d++,r++;if("."==p()){if(0==r)return;if(d-=r,u>6)return;for(i=0;p();){if(n=null,i>0){if(!("."==p()&&i<4))return;d++}if(!DIGIT.test(p()))return;for(;DIGIT.test(p());){if(o=parseInt(p(),10),null===n)n=o;else{if(0==n)return;n=10*n+o}if(n>255)return;d++}l[u]=256*l[u]+n,2!=++i&&4!=i||u++}if(4!=i)return;break}if(":"==p()){if(d++,!p())return}else if(p())return;l[u++]=t}else{if(null!==c)return;d++,c=++u}}if(null!==c)for(a=u-c,u=7;0!=u&&a>0;)s=l[u],l[u--]=l[c+a-1],l[c+--a]=s;else if(8!=u)return;return l},findLongestZeroSequence=function(e){for(var t=null,r=1,i=null,n=0,o=0;o<8;o++)0!==e[o]?(n>r&&(t=i,r=n),i=null,n=0):(null===i&&(i=o),++n);return n>r&&(t=i,r=n),t},serializeHost=function(e){var t,r,i,n;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=floor$1(e/256);return t.join(".")}if("object"==typeof e){for(t="",i=findLongestZeroSequence(e),r=0;r<8;r++)n&&0===e[r]||(n&&(n=!1),i===r?(t+=r?":":"::",n=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},C0ControlPercentEncodeSet={},fragmentPercentEncodeSet=assign({},C0ControlPercentEncodeSet,{" ":1,'"':1,"<":1,">":1,"`":1}),pathPercentEncodeSet=assign({},fragmentPercentEncodeSet,{"#":1,"?":1,"{":1,"}":1}),userinfoPercentEncodeSet=assign({},pathPercentEncodeSet,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(e,t){var r=codeAt(e,0);return r>32&&r<127&&!has$1(t,e)?e:encodeURIComponent(e)},specialSchemes={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isSpecial=function(e){return has$1(specialSchemes,e.scheme)},includesCredentials=function(e){return""!=e.username||""!=e.password},cannotHaveUsernamePasswordPort=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},isWindowsDriveLetter=function(e,t){var r;return 2==e.length&&ALPHA.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},startsWithWindowsDriveLetter=function(e){var t;return e.length>1&&isWindowsDriveLetter(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},shortenURLsPath=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&isWindowsDriveLetter(t[0],!0)||t.pop()},isSingleDot=function(e){return"."===e||"%2e"===e.toLowerCase()},isDoubleDot=function(e){return".."===(e=e.toLowerCase())||"%2e."===e||".%2e"===e||"%2e%2e"===e},SCHEME_START={},SCHEME={},NO_SCHEME={},SPECIAL_RELATIVE_OR_AUTHORITY={},PATH_OR_AUTHORITY={},RELATIVE={},RELATIVE_SLASH={},SPECIAL_AUTHORITY_SLASHES={},SPECIAL_AUTHORITY_IGNORE_SLASHES={},AUTHORITY={},HOST={},HOSTNAME={},PORT={},FILE={},FILE_SLASH={},FILE_HOST={},PATH_START={},PATH={},CANNOT_BE_A_BASE_URL_PATH={},QUERY={},FRAGMENT={},parseURL=function(e,t,r,i){var n,o,a,s,l=r||SCHEME_START,u=0,c="",d=!1,p=!1,h=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE,"")),t=t.replace(TAB_AND_NEW_LINE,""),n=arrayFrom(t);u<=n.length;){switch(o=n[u],l){case SCHEME_START:if(!o||!ALPHA.test(o)){if(r)return INVALID_SCHEME;l=NO_SCHEME;continue}c+=o.toLowerCase(),l=SCHEME;break;case SCHEME:if(o&&(ALPHANUMERIC.test(o)||"+"==o||"-"==o||"."==o))c+=o.toLowerCase();else{if(":"!=o){if(r)return INVALID_SCHEME;c="",l=NO_SCHEME,u=0;continue}if(r&&(isSpecial(e)!=has$1(specialSchemes,c)||"file"==c&&(includesCredentials(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=c,r)return void(isSpecial(e)&&specialSchemes[e.scheme]==e.port&&(e.port=null));c="","file"==e.scheme?l=FILE:isSpecial(e)&&i&&i.scheme==e.scheme?l=SPECIAL_RELATIVE_OR_AUTHORITY:isSpecial(e)?l=SPECIAL_AUTHORITY_SLASHES:"/"==n[u+1]?(l=PATH_OR_AUTHORITY,u++):(e.cannotBeABaseURL=!0,e.path.push(""),l=CANNOT_BE_A_BASE_URL_PATH)}break;case NO_SCHEME:if(!i||i.cannotBeABaseURL&&"#"!=o)return INVALID_SCHEME;if(i.cannotBeABaseURL&&"#"==o){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,l=FRAGMENT;break}l="file"==i.scheme?FILE:RELATIVE;continue;case SPECIAL_RELATIVE_OR_AUTHORITY:if("/"!=o||"/"!=n[u+1]){l=RELATIVE;continue}l=SPECIAL_AUTHORITY_IGNORE_SLASHES,u++;break;case PATH_OR_AUTHORITY:if("/"==o){l=AUTHORITY;break}l=PATH;continue;case RELATIVE:if(e.scheme=i.scheme,o==EOF)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==o||"\\"==o&&isSpecial(e))l=RELATIVE_SLASH;else if("?"==o)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",l=QUERY;else{if("#"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),l=PATH;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=FRAGMENT}break;case RELATIVE_SLASH:if(!isSpecial(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,l=PATH;continue}l=AUTHORITY}else l=SPECIAL_AUTHORITY_IGNORE_SLASHES;break;case SPECIAL_AUTHORITY_SLASHES:if(l=SPECIAL_AUTHORITY_IGNORE_SLASHES,"/"!=o||"/"!=c.charAt(u+1))continue;u++;break;case SPECIAL_AUTHORITY_IGNORE_SLASHES:if("/"!=o&&"\\"!=o){l=AUTHORITY;continue}break;case AUTHORITY:if("@"==o){d&&(c="%40"+c),d=!0,a=arrayFrom(c);for(var f=0;f<a.length;f++){var y=a[f];if(":"!=y||h){var m=percentEncode(y,userinfoPercentEncodeSet);h?e.password+=m:e.username+=m}else h=!0}c=""}else if(o==EOF||"/"==o||"?"==o||"#"==o||"\\"==o&&isSpecial(e)){if(d&&""==c)return INVALID_AUTHORITY;u-=arrayFrom(c).length+1,c="",l=HOST}else c+=o;break;case HOST:case HOSTNAME:if(r&&"file"==e.scheme){l=FILE_HOST;continue}if(":"!=o||p){if(o==EOF||"/"==o||"?"==o||"#"==o||"\\"==o&&isSpecial(e)){if(isSpecial(e)&&""==c)return INVALID_HOST;if(r&&""==c&&(includesCredentials(e)||null!==e.port))return;if(s=parseHost(e,c))return s;if(c="",l=PATH_START,r)return;continue}"["==o?p=!0:"]"==o&&(p=!1),c+=o}else{if(""==c)return INVALID_HOST;if(s=parseHost(e,c))return s;if(c="",l=PORT,r==HOSTNAME)return}break;case PORT:if(!DIGIT.test(o)){if(o==EOF||"/"==o||"?"==o||"#"==o||"\\"==o&&isSpecial(e)||r){if(""!=c){var _=parseInt(c,10);if(_>65535)return INVALID_PORT;e.port=isSpecial(e)&&_===specialSchemes[e.scheme]?null:_,c=""}if(r)return;l=PATH_START;continue}return INVALID_PORT}c+=o;break;case FILE:if(e.scheme="file","/"==o||"\\"==o)l=FILE_SLASH;else{if(!i||"file"!=i.scheme){l=PATH;continue}if(o==EOF)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==o)e.host=i.host,e.path=i.path.slice(),e.query="",l=QUERY;else{if("#"!=o){startsWithWindowsDriveLetter(n.slice(u).join(""))||(e.host=i.host,e.path=i.path.slice(),shortenURLsPath(e)),l=PATH;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=FRAGMENT}}break;case FILE_SLASH:if("/"==o||"\\"==o){l=FILE_HOST;break}i&&"file"==i.scheme&&!startsWithWindowsDriveLetter(n.slice(u).join(""))&&(isWindowsDriveLetter(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),l=PATH;continue;case FILE_HOST:if(o==EOF||"/"==o||"\\"==o||"?"==o||"#"==o){if(!r&&isWindowsDriveLetter(c))l=PATH;else if(""==c){if(e.host="",r)return;l=PATH_START}else{if(s=parseHost(e,c))return s;if("localhost"==e.host&&(e.host=""),r)return;c="",l=PATH_START}continue}c+=o;break;case PATH_START:if(isSpecial(e)){if(l=PATH,"/"!=o&&"\\"!=o)continue}else if(r||"?"!=o)if(r||"#"!=o){if(o!=EOF&&(l=PATH,"/"!=o))continue}else e.fragment="",l=FRAGMENT;else e.query="",l=QUERY;break;case PATH:if(o==EOF||"/"==o||"\\"==o&&isSpecial(e)||!r&&("?"==o||"#"==o)){if(isDoubleDot(c)?(shortenURLsPath(e),"/"==o||"\\"==o&&isSpecial(e)||e.path.push("")):isSingleDot(c)?"/"==o||"\\"==o&&isSpecial(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&isWindowsDriveLetter(c)&&(e.host&&(e.host=""),c=c.charAt(0)+":"),e.path.push(c)),c="","file"==e.scheme&&(o==EOF||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",l=QUERY):"#"==o&&(e.fragment="",l=FRAGMENT)}else c+=percentEncode(o,pathPercentEncodeSet);break;case CANNOT_BE_A_BASE_URL_PATH:"?"==o?(e.query="",l=QUERY):"#"==o?(e.fragment="",l=FRAGMENT):o!=EOF&&(e.path[0]+=percentEncode(o,C0ControlPercentEncodeSet));break;case QUERY:r||"#"!=o?o!=EOF&&("'"==o&&isSpecial(e)?e.query+="%27":e.query+="#"==o?"%23":percentEncode(o,C0ControlPercentEncodeSet)):(e.fragment="",l=FRAGMENT);break;case FRAGMENT:o!=EOF&&(e.fragment+=percentEncode(o,fragmentPercentEncodeSet))}u++}},URLConstructor=function(e){var t,r,i=anInstance(this,URLConstructor,"URL"),n=arguments.length>1?arguments[1]:void 0,o=String(e),a=setInternalState(i,{type:"URL"});if(void 0!==n)if(n instanceof URLConstructor)t=getInternalURLState(n);else if(r=parseURL(t={},String(n)))throw TypeError(r);if(r=parseURL(a,o,null,t))throw TypeError(r);var s=a.searchParams=new URLSearchParams$1,l=getInternalSearchParamsState(s);l.updateSearchParams(a.query),l.updateURL=function(){a.query=String(s)||null},DESCRIPTORS||(i.href=serializeURL.call(i),i.origin=getOrigin.call(i),i.protocol=getProtocol.call(i),i.username=getUsername.call(i),i.password=getPassword.call(i),i.host=getHost.call(i),i.hostname=getHostname.call(i),i.port=getPort.call(i),i.pathname=getPathname.call(i),i.search=getSearch.call(i),i.searchParams=getSearchParams.call(i),i.hash=getHash.call(i))},URLPrototype=URLConstructor.prototype,serializeURL=function(){var e=getInternalURLState(this),t=e.scheme,r=e.username,i=e.password,n=e.host,o=e.port,a=e.path,s=e.query,l=e.fragment,u=t+":";return null!==n?(u+="//",includesCredentials(e)&&(u+=r+(i?":"+i:"")+"@"),u+=serializeHost(n),null!==o&&(u+=":"+o)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(u+="?"+s),null!==l&&(u+="#"+l),u},getOrigin=function(){var e=getInternalURLState(this),t=e.scheme,r=e.port;if("blob"==t)try{return new URLConstructor(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&isSpecial(e)?t+"://"+serializeHost(e.host)+(null!==r?":"+r:""):"null"},getProtocol=function(){return getInternalURLState(this).scheme+":"},getUsername=function(){return getInternalURLState(this).username},getPassword=function(){return getInternalURLState(this).password},getHost=function(){var e=getInternalURLState(this),t=e.host,r=e.port;return null===t?"":null===r?serializeHost(t):serializeHost(t)+":"+r},getHostname=function(){var e=getInternalURLState(this).host;return null===e?"":serializeHost(e)},getPort=function(){var e=getInternalURLState(this).port;return null===e?"":String(e)},getPathname=function(){var e=getInternalURLState(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},getSearch=function(){var e=getInternalURLState(this).query;return e?"?"+e:""},getSearchParams=function(){return getInternalURLState(this).searchParams},getHash=function(){var e=getInternalURLState(this).fragment;return e?"#"+e:""},accessorDescriptor=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(DESCRIPTORS&&defineProperties(URLPrototype,{href:accessorDescriptor(serializeURL,(function(e){var t=getInternalURLState(this),r=String(e),i=parseURL(t,r);if(i)throw TypeError(i);getInternalSearchParamsState(t.searchParams).updateSearchParams(t.query)})),origin:accessorDescriptor(getOrigin),protocol:accessorDescriptor(getProtocol,(function(e){var t=getInternalURLState(this);parseURL(t,String(e)+":",SCHEME_START)})),username:accessorDescriptor(getUsername,(function(e){var t=getInternalURLState(this),r=arrayFrom(String(e));if(!cannotHaveUsernamePasswordPort(t)){t.username="";for(var i=0;i<r.length;i++)t.username+=percentEncode(r[i],userinfoPercentEncodeSet)}})),password:accessorDescriptor(getPassword,(function(e){var t=getInternalURLState(this),r=arrayFrom(String(e));if(!cannotHaveUsernamePasswordPort(t)){t.password="";for(var i=0;i<r.length;i++)t.password+=percentEncode(r[i],userinfoPercentEncodeSet)}})),host:accessorDescriptor(getHost,(function(e){var t=getInternalURLState(this);t.cannotBeABaseURL||parseURL(t,String(e),HOST)})),hostname:accessorDescriptor(getHostname,(function(e){var t=getInternalURLState(this);t.cannotBeABaseURL||parseURL(t,String(e),HOSTNAME)})),port:accessorDescriptor(getPort,(function(e){var t=getInternalURLState(this);cannotHaveUsernamePasswordPort(t)||(""==(e=String(e))?t.port=null:parseURL(t,e,PORT))})),pathname:accessorDescriptor(getPathname,(function(e){var t=getInternalURLState(this);t.cannotBeABaseURL||(t.path=[],parseURL(t,e+"",PATH_START))})),search:accessorDescriptor(getSearch,(function(e){var t=getInternalURLState(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",parseURL(t,e,QUERY)),getInternalSearchParamsState(t.searchParams).updateSearchParams(t.query)})),searchParams:accessorDescriptor(getSearchParams),hash:accessorDescriptor(getHash,(function(e){var t=getInternalURLState(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",parseURL(t,e,FRAGMENT)):t.fragment=null}))}),redefine$1(URLPrototype,"toJSON",(function(){return serializeURL.call(this)}),{enumerable:!0}),redefine$1(URLPrototype,"toString",(function(){return serializeURL.call(this)}),{enumerable:!0}),NativeURL){var nativeCreateObjectURL=NativeURL.createObjectURL,nativeRevokeObjectURL=NativeURL.revokeObjectURL;nativeCreateObjectURL&&redefine$1(URLConstructor,"createObjectURL",(function(e){return nativeCreateObjectURL.apply(NativeURL,arguments)})),nativeRevokeObjectURL&&redefine$1(URLConstructor,"revokeObjectURL",(function(e){return nativeRevokeObjectURL.apply(NativeURL,arguments)}))}setToStringTag(URLConstructor,"URL"),$$5({global:!0,forced:!USE_NATIVE_URL,sham:!DESCRIPTORS},{URL:URLConstructor});var $$4=_export,isArray=isArray$6;$$4({target:"Array",stat:!0},{isArray:isArray});var createTypedArrayConstructor$2=typedArrayConstructor.exports;createTypedArrayConstructor$2("Uint8",(function(e){return function(t,r,i){return e(this,t,r,i)}}),!0);var $$3=_export,NativePromise=nativePromiseConstructor,fails$2=fails$z,getBuiltIn=getBuiltIn$8,speciesConstructor=speciesConstructor$8,promiseResolve=promiseResolve$2,redefine=redefine$f.exports,NON_GENERIC=!!NativePromise&&fails$2((function(){NativePromise.prototype.finally.call({then:function(){}},(function(){}))}));if($$3({target:"Promise",proto:!0,real:!0,forced:NON_GENERIC},{finally:function(e){var t=speciesConstructor(this,getBuiltIn("Promise")),r="function"==typeof e;return this.then(r?function(r){return promiseResolve(t,e()).then((function(){return r}))}:e,r?function(r){return promiseResolve(t,e()).then((function(){throw r}))}:e)}}),"function"==typeof NativePromise){var method=getBuiltIn("Promise").prototype.finally;NativePromise.prototype.finally!==method&&redefine(NativePromise.prototype,"finally",method,{unsafe:!0})}var hjplayer={exports:{}},module;module=hjplayer,module.exports=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=31)}([function(e,t,r){var i=r(4),n=r.n(i),o=r(1),a=new n.a,s=function(){function e(){}return Object.defineProperty(e,"GLOBAL_TAG",{get:function(){return e._tag},set:function(t){e._tag=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"config",{get:function(){return e._config||(e._config=Object.create(null)),e._config},set:function(t){e._config=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"emitter",{get:function(){return a},enumerable:!1,configurable:!0}),e.on=function(t,r){e.emitter.on(t,r)},e.once=function(t,r){e.emitter.once(t,r)},e.off=function(t,r){e.emitter.off(t,r)},e.clearEvents=function(){e.emitter.removeAllListeners()},e.error=function(t,r){t&&!e.config.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+r;e.config.ENABLE_CALLBACK&&e.emitter.emit(o.a.HJ_PLAYER_LOG,"error",i),e.config.ENABLE_ERROR&&(console.error?console.error(i):console.warn?console.warn(i):console.log(i))},e.info=function(t,r){t&&!e.config.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+r;e.config.ENABLE_CALLBACK&&e.emitter.emit(o.a.HJ_PLAYER_LOG,"info",i),e.config.ENABLE_INFO&&(console.info?console.info(i):console.log(i))},e.log=function(t,r){t&&!e.config.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+r;e.config.ENABLE_CALLBACK&&e.emitter.emit(o.a.HJ_PLAYER_LOG,"log",i),e.config.ENABLE_INFO&&console.log(i)},e.warn=function(t,r){t&&!e.config.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+r;e.config.ENABLE_CALLBACK&&e.emitter.emit(o.a.HJ_PLAYER_LOG,"warn",i),e.config.ENABLE_WARN&&(console.warn?console.warn(i):console.log(i))},e.debug=function(t,r){t&&!e.config.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+r;e.config.ENABLE_CALLBACK&&e.emitter.emit(o.a.HJ_PLAYER_LOG,"debug",i),e.config.ENABLE_DEBUG&&(console.debug?console.debug(i):console.log(i))},e}();t.a=s},function(e,t,r){t.a={INIT_SEGMENT:"INIT_SEGMENT",MEDIA_SEGMENT:"MEDIA_SEGMENT",GET_SEI_INFO:"GET_SEI_INFO",MEDIA_INFO:"MEDIA_INFO",LOAD_COMPLETE:"LOAD_COMPLETE",DATA_ARRIVED:"DATA_ARRIVED",STATISTICS_INFO:"STATISTICS_INFO",HJ_PLAYER_LOG:"HJ_PLAYER_LOG",FRAG_PARSED:"FRAG_PARSED",FRAG_PARSING_METADATA:"FRAG_PARSING_METADATA",FRAG_PARSING_USERDATA:"FRAG_PARSING_USERDATA",INIT_PTS_FOUND:"INIT_PTS_FOUND",FRAG_PARSING_INIT_SEGMENT:"FRAG_PARSING_INIT_SEGMENT",MEDIA_SEEK:"MEDIA_SEEK",RECOVERED_EARLY_EOF:"RECOVERED_EARLY_EOF",RECOMMEND_SEEKPOINT:"RECOMMEND_SEEKPOINT",METADATA_ARRIVED:"METADATA_ARRIVED",SCRIPTDATA_ARRIVED:"SCRIPTDATA_ARRIVED",UPDATE_END:"UPDATE_END",BUFFER_FULL:"BUFFER_FULL",SOURCE_OPEN:"SOURCE_OPEN",ERROR:"ERROR",MANIFEST_PARSED:"MANIFEST_PARSED",IO_ERROR:"IO_ERROR",DEMUX_ERROR:"DEMUX_ERROR",WORKER_LOG:"WORKER_LOG",LOAD_NEXT_FRAG:"LOAD_NEXT_FRAG"}},function(e,t,r){var i;!function(e){e[e.kIdle=0]="kIdle",e[e.kConnecting=1]="kConnecting",e[e.kBuffering=2]="kBuffering",e[e.kError=3]="kError",e[e.kComplete=4]="kComplete"}(i||(i={})),t.a=i},function(e,t,r){r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return l}));var i,n=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=function(){function e(e){this._message=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this.name+": "+this.message},e}(),a=function(e){function t(t){return e.call(this,t)||this}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),t}(o),s=function(e){function t(t){return e.call(this,t)||this}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),t}(o),l=function(e){function t(t){return e.call(this,t)||this}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),t}(o)},function(e,t,r){var i=Object.prototype.hasOwnProperty,n="~";function o(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new a(r,i||e,o),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function u(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)i.call(e,t)&&r.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},u.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var p,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!l)for(p=1,l=new Array(d-1);p<d;p++)l[p-1]=arguments[p];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return l(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||l(this,o);else{for(var s=0,u=[],c=a.length;s<c;s++)(a[s].fn!==t||i&&!a[s].once||r&&a[s].context!==r)&&u.push(a[s]);u.length?this._events[o]=1===u.length?u[0]:u:l(this,o)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&l(this,t)):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u},function(e,t,r){function i(){return"undefined"==typeof window?self:window}r.d(t,"a",(function(){return i}))},function(e,t,r){var i;!function(e){e.OK="OK",e.EXCEPTION="EXCEPTION",e.HTTP_STATUS_CODE_INVALID="HTTP_STATUS_CODE_INVALID",e.CONNECTING_TIMEOUT="CONNECTING_TIMEOUT",e.EARLY_EOF="EARLY_EOF",e.UNRECOVERABLE_EARLY_EOF="UNRECOVERABLE_EARLY_EOF",e.PARSE_PLAYLISTING_ERROR="PARSE_PLAYLISTING_ERROR"}(i||(i={})),t.a=i},function(e,t,r){var i=r(5),n=Object(i.a)(),o=function(){var e=n.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[/]([\w.]+)/.exec(e)||/(chrome)[/]([\w.]+)/.exec(e)||/(iemobile)[/]([\w.]+)/.exec(e)||/(version)(applewebkit)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec(e)||/(webkit)[/]([\w.]+).*(version)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec(e)||/(webkit)[/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(firefox)[/]([\w.]+)/.exec(e)||[],r=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(android)/.exec(e)||/(windows)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||[],i={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:r[0]||""},o=Object.create(null);if(i.browser){o[i.browser]=!0;var a=i.majorVersion.split(".");o.version={major:parseInt(i.majorVersion,10),string:i.version},a.length>1&&(o.version.minor=parseInt(a[1],10)),a.length>2&&(o.version.build=parseInt(a[2],10))}return i.platform&&(o[i.platform]=!0),(o.chrome||o.opr||o.safari)&&(o.webkit=!0),(o.rv||o.iemobile)&&(o.rv&&delete o.rv,i.browser="msie",o.msie=!0),o.edge&&(delete o.edge,i.browser="msedge",o.msedge=!0),o.opr&&(i.browser="opera",o.opera=!0),o.safari&&o.android&&(i.browser="android",o.android=!0),o.name=i.browser,o.platform=i.platform,o}();t.a=o},function(e,t,r){t.a={INIT:"INIT",START:"START",STOP:"STOP",SEEK:"SEEK",PAUSE:"PAUSE",RESUME:"RESUME",DESTROY:"DESTROY",LOG_CONFIG_CHANGE:"LOG_CONFIG_CHANGE"}},function(e,t,r){t.a={UN_SUPPORT_MEDIA:"UN_SUPPORT_MEDIA",NETWORK_ERROR:"NETWORK_ERROR",TRANSMUXING_ERROR:"TRANSMUXING_ERROR",IO_ERROR:"IO_ERROR",OK:"OK",EXCEPTION:"EXCEPTION",HTTP_STATUS_CODE_INVALID:"HTTP_STATUS_CODE_INVALID",CONNECTING_TIMEOUT:"CONNECTING_TIMEOUT",EARLY_EOF:"EARLY_EOF",UNRECOVERABLE_EARLY_EOF:"UNRECOVERABLE_EARLY_EOF",MEDIA_ERROR:"MEDIA_ERROR",MEDIA_MSE_ERROR:"MEDIA_MSE_ERROR",FORMAT_ERROR:"FORMAT_ERROR",FORMAT_UNSUPPORTED:"FORMAT_UNSUPPORTED",CODEC_UNSUPPORTED:"CODEC_UNSUPPORTED"}},function(e,t,r){var i;!function(e){e.LOADING_ERROR="LOADING_ERROR",e.LOAD_COMPLETE="LOAD_COMPLETE",e.MANIFEST_PARSED="MANIFEST_PARSED",e.DEMUXER_PUSH="DEMUXER_PUSH",e.PARSE_SUCCESS="PARSE_SUCCESS",e.PARSE_ERROR="PARSE_ERROR",e.GET_TS_URL="GET_TS_URL",e.LOADIND_TIMEOUT="LOADIND_TIMEOUT"}(i||(i={})),t.a=i},function(e,t,r){var i=r(4),n=r.n(i),o=r(3),a=r(2),s=function(){function e(e,t){this.Tag="BaseLoader",this.supportType=t,this._type=e||"undefined",this._status=a.a.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null,this.eventEmitter=new n.a}return e.prototype.on=function(e,t){this.eventEmitter.on(e,t)},e.prototype.once=function(e,t){this.eventEmitter.once(e,t)},e.prototype.off=function(e,t){this.eventEmitter.off(e,t)},e.prototype.destroy=function(){this.eventEmitter.removeAllListeners(),delete this.eventEmitter,this._status=a.a.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},e.prototype.isWorking=function(){return this._status===a.a.kConnecting||this._status===a.a.kBuffering},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),e.prototype.startLoad=function(e,t){throw new o.c("Unimplemented abstract function!")},e.prototype.abort=function(){throw new o.c("Unimplemented abstract function!")},e}();t.a=s},function(e,t,r){var i=function(e,t,r,i,n){this.dts=e,this.pts=t,this.duration=r,this.originalDts=i,this.isSyncPoint=n,this.fileposition=null};t.a=i},function(e,t,r){var i=r(4),n=r.n(i),o=r(0),a=r(1),s=function(){function e(){}return Object.defineProperty(e,"forceGlobalTag",{get:function(){return o.a.config.FORCE_GLOBAL_TAG||!1},set:function(t){o.a.config.FORCE_GLOBAL_TAG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"globalTag",{get:function(){return o.a.GLOBAL_TAG},set:function(t){o.a.GLOBAL_TAG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableAll",{get:function(){return o.a.config.ENABLE_DEBUG&&o.a.config.ENABLE_INFO&&o.a.config.ENABLE_WARN&&o.a.config.ENABLE_ERROR},set:function(t){o.a.config.ENABLE_DEBUG=t,o.a.config.ENABLE_INFO=t,o.a.config.ENABLE_WARN=t,o.a.config.ENABLE_ERROR=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableDebug",{get:function(){return o.a.config.ENABLE_DEBUG},set:function(t){o.a.config.ENABLE_DEBUG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableInfo",{get:function(){return o.a.config.ENABLE_INFO},set:function(t){o.a.config.ENABLE_INFO=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableWarn",{get:function(){return o.a.config.ENABLE_WARN},set:function(t){o.a.config.ENABLE_WARN=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableError",{get:function(){return o.a.config.ENABLE_ERROR},set:function(t){o.a.config.ENABLE_ERROR=t,e._notifyChange()},enumerable:!1,configurable:!0}),e.getConfig=function(){return{globalTag:o.a.GLOBAL_TAG,forceGlobalTag:o.a.config.FORCE_GLOBAL_TAG,enableDebug:o.a.config.ENABLE_DEBUG,enableInfo:o.a.config.ENABLE_INFO,enableWarn:o.a.config.ENABLE_WARN,enableError:o.a.config.ENABLE_ERROR,enableCallback:o.a.config.ENABLE_CALLBACK}},e.applyConfig=function(e){o.a.GLOBAL_TAG=e.GLOBAL_TAG||"HJPLAYER",o.a.config.FORCE_GLOBAL_TAG=e.FORCE_GLOBAL_TAG,o.a.config.ENABLE_DEBUG=e.ENABLE_DEBUG,o.a.config.ENABLE_INFO=e.ENABLE_INFO,o.a.config.ENABLE_WARN=e.ENABLE_WARN,o.a.config.ENABLE_ERROR=e.ENABLE_ERROR,o.a.config.ENABLE_CALLBACK=e.ENABLE_CALLBACK},e._notifyChange=function(){var t=e.emitter;if(t.listenerCount("change")>0){var r=e.getConfig();t.emit("change",r)}},e.registerListener=function(t){e.emitter.addListener("change",t)},e.removeListener=function(t){e.emitter.removeListener("change",t)},e.addLogListener=function(t){o.a.emitter.addListener(a.a.HJ_PLAYER_LOG,t),o.a.emitter.listenerCount(a.a.HJ_PLAYER_LOG)>0&&(o.a.config.ENABLE_CALLBACK=!0,e._notifyChange())},e.removeLogListener=function(t){o.a.emitter.removeListener(a.a.HJ_PLAYER_LOG,t),0===o.a.emitter.listenerCount(a.a.HJ_PLAYER_LOG)&&(o.a.config.ENABLE_CALLBACK=!1,e._notifyChange())},e}();s.emitter=new n.a,t.a=s},function(e,t,r){var i=r(4),n=r.n(i),o=r(7),a=r(19),s=r(9),l=r(24),u=r(1),c=function(){return{forceKeyFrameOnDiscontinuity:!0,maxAudioFramesDrift:1,maxBufferHole:.5,maxFragLookUpTolerance:.25,stretchShortVideoTrack:!1}},d=r(0),p=r(17),h=r(16),f=r(5),y=function(){return(y=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},m=Object(f.a)(),_=function(){function e(e,t,r,i){this.Tag="TransmuxingController",this._emitter=new n.a,this._config=t,this.typeSupported=r,this.navigator=i,this._mediaCodec=null,"boolean"!=typeof e.cors&&(e.cors=!0),"boolean"!=typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e;var o=0;this._currentSegmentIndex=0,e.segments||(this._mediaDataSource.segments=[{duration:e.duration,filesize:e.fileSize,url:e.url,type:e.type,live:t.isLive}]),this._mediaDataSource.segments.forEach((function(r){r.timestampBase=o,o+=r.duration,r.cors=e.cors,r.withCredentials=e.withCredentials,t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy)})),Number.isNaN(o)||this._mediaDataSource.duration===o||(this._mediaDataSource.duration=o),this._mediaInfo=null,this._mediaCodec=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReportTimer=null}return e.prototype.destroy=function(){this._mediaInfo=null,delete this._mediaDataSource,this._statisticsReportTimer&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._mediaCodec&&(this._mediaCodec.destroy(),this._mediaCodec=null),this._emitter.removeAllListeners(),delete this._emitter},e.prototype.on=function(e,t){this._emitter.on(e,t)},e.prototype.off=function(e,t){this._emitter.off(e,t)},e.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},e.prototype._loadSegment=function(e,t){this._currentSegmentIndex=e;var r=this._mediaDataSource.segments[e];this._ioctl=new l.a(r,this._config,e);var i=this._ioctl;i.onError=this._onIOException.bind(this),i.onSeeked=this._onIOSeeked.bind(this),i.onComplete=this._onIOComplete.bind(this),i.onRedirect=this._onIORedirect.bind(this),i.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),i.onManifestParsed=this._onManifestParsed.bind(this),t&&this._mediaCodec?this._mediaCodec.bindDataSource(this._ioctl):i.onDataArrival=this._onInitChunkArrival.bind(this),i.open(t)},e.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},e.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},e.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},e.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},e.prototype.seek=function(e){if("m3u8"===this._mediaDataSource.type)this._ioctl&&this._ioctl.tsSeek(e),this.resume();else{if(null==this._mediaInfo||!this._mediaInfo.isSeekable())return;var t=this._searchSegmentIndexContains(e);if(t===this._currentSegmentIndex){var r=this._mediaInfo.segments?this._mediaInfo.segments[t]:void 0;if(r){var i=r.getNearestKeyframe(e);this._mediaCodec&&this._mediaCodec.seek(i.milliseconds),this._ioctl&&this._ioctl.seek(i.fileposition),this._pendingResolveSeekPoint=i.milliseconds}else this._pendingSeekTime=e}else{var n=this._mediaInfo.segments&&this._mediaInfo.segments[t]?this._mediaInfo.segments[t]:void 0;void 0===n?(this._pendingSeekTime=e,this._internalAbort(),this._mediaCodec&&(this._mediaCodec.seek(),this._mediaCodec.insertDiscontinuity()),this._loadSegment(t)):(i=n.getNearestKeyframe(e),this._internalAbort(),this._mediaCodec&&(this._mediaCodec.seek(),this._mediaCodec.insertDiscontinuity(),this._mediaCodec.resetMediaInfo(),this._mediaCodec.timestampBase=this._mediaDataSource.segments[t].timestampBase),this._loadSegment(t,i.fileposition),this._pendingResolveSeekPoint=i.milliseconds,this._reportSegmentMediaInfo(t))}}this._enableStatisticsReporter()},e.prototype._searchSegmentIndexContains=function(e){for(var t=this._mediaDataSource.segments,r=t.length-1,i=0;i<t.length;i++)if(e<t[i].timestampBase){r=i-1;break}return r},e.prototype._onInitChunkArrival=function(e,t,r){var i=this;if(t>0&&this._mediaCodec)return this._mediaCodec.bindDataSource(this._ioctl),this._mediaCodec.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,this._mediaCodec.parseChunks(e,t,r);if(h.a.probe(e).match){this._mediaCodec=new h.a(e,this._config);var n=this._mediaDataSource;return void 0===n.duration||Number.isNaN(n.duration)||(this._mediaCodec.overridedDuration=n.duration),"boolean"==typeof n.hasAudio&&(this._mediaCodec.overridedHasAudio=n.hasAudio),"boolean"==typeof n.hasVideo&&(this._mediaCodec.overridedHasVideo=n.hasVideo),this._mediaCodec.timestampBase=n.segments[this._currentSegmentIndex].timestampBase,this._mediaCodecBindEvents(),this._mediaCodec.bindDataSource(this._ioctl),this._mediaCodec.parseChunks(e,t)}return p.a.probe(e)?(this._mediaCodec=new p.a(c(),this.typeSupported,this.navigator),this._mediaCodecBindEvents(),this._mediaCodec.resetInitSegment(new Uint8Array(r.initSegmentData),r.audioCodec,r.videoCodec,r.totalduration),this._mediaCodec.resetTimeStamp(void 0),this._mediaCodec.bindDataSource(this._ioctl),this._mediaCodec.parseChunks(new Uint8Array(e),t,r),e.byteLength):(d.a.error(this.Tag,"Unsupported media type, this "+this._mediaDataSource.type+" stream is not standard format"),Promise.resolve().then((function(){i._internalAbort()})),this._emitter.emit(u.a.DEMUX_ERROR,s.a.FORMAT_UNSUPPORTED,"Unsupported media type, this "+this._mediaDataSource.type+" stream is not standard format!"),0)},e.prototype._onMediaInfo=function(e){var t=this;null===this._mediaInfo&&(this._mediaInfo=y({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,a.a.prototype));var r=y({},e);Object.setPrototypeOf(r,a.a.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=r,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then((function(){var e=Number(t._pendingSeekTime);t._pendingSeekTime=null,t.seek(e)}))},e.prototype._onMetaDataArrived=function(e){this._emitter.emit(u.a.METADATA_ARRIVED,e)},e.prototype._onScriptDataArrived=function(e){this._emitter.emit(u.a.SCRIPTDATA_ARRIVED,e)},e.prototype._onIOSeeked=function(){this._mediaCodec&&this._mediaCodec.insertDiscontinuity()},e.prototype._onIOComplete=function(e){var t=e+1;this._mediaCodec&&(t<this._mediaDataSource.segments.length?(this._internalAbort(),this._mediaCodec.flushStashedSamples&&this._mediaCodec.flushStashedSamples(),this._loadSegment(t)):(this._mediaCodec.flushStashedSamples&&this._mediaCodec.flushStashedSamples(),this._emitter.emit(u.a.LOAD_COMPLETE),this._disableStatisticsReporter()))},e.prototype._onIORedirect=function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e},e.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(u.a.RECOVERED_EARLY_EOF)},e.prototype._onIOException=function(e,t){d.a.error(this.Tag,"IOException: type = "+e+", code = "+t.code+", msg = "+t.reason),this._emitter.emit(u.a.IO_ERROR,e,t),this._disableStatisticsReporter()},e.prototype._onDemuxException=function(e,t){d.a.error(this.Tag,"DemuxException: type = "+e+", info = "+t.reason),this._emitter.emit(u.a.DEMUX_ERROR,e,t)},e.prototype._onRemuxerInitSegmentArrival=function(e,t){this._emitter.emit(u.a.INIT_SEGMENT,e,t)},e.prototype._onRemuxerMediaSegmentArrival=function(e,t){if(null==this._pendingSeekTime&&(this._emitter.emit(u.a.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint&&"video"===e)){var r=t.info.syncPoints,i=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,o.a.safari&&r.length>0&&r[0].originalDts===i&&(i=r[0].pts),this._emitter.emit(u.a.RECOMMEND_SEEKPOINT,i)}},e.prototype._enableStatisticsReporter=function(){null==this._statisticsReportTimer&&(this._statisticsReportTimer=m.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},e.prototype._disableStatisticsReporter=function(){this._statisticsReportTimer&&(m.clearInterval(this._statisticsReportTimer),this._statisticsReportTimer=null)},e.prototype._reportSegmentMediaInfo=function(e){var t=this._mediaInfo.segments[e],r=y({},t);r.duration=this._mediaInfo.duration,r.segmentCount=this._mediaInfo.segmentCount,delete r.segments,delete r.keyframesIndex,this._emitter.emit(u.a.MEDIA_INFO,r)},e.prototype._reportStatisticsInfo=function(){var e=Object.create(null);this._ioctl&&(e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType),e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(u.a.STATISTICS_INFO,e)},e.prototype._onManifestParsed=function(e){this._emitter.emit(u.a.MANIFEST_PARSED,e)},e.prototype._mediaCodecBindEvents=function(){var e=this;this._mediaCodec&&(this._mediaCodec.on(u.a.ERROR,(function(t){e._onDemuxException(s.a.TRANSMUXING_ERROR,t)})),this._mediaCodec.on(u.a.MEDIA_INFO,(function(t){e._onMediaInfo(t)})),this._mediaCodec.on(u.a.METADATA_ARRIVED,(function(t){e._onMetaDataArrived(t)})),this._mediaCodec.on(u.a.SCRIPTDATA_ARRIVED,(function(t){e._onScriptDataArrived(t)})),this._mediaCodec.on(u.a.GET_SEI_INFO,(function(t){e._emitter.emit(u.a.GET_SEI_INFO,t)})),this._mediaCodec.on(u.a.INIT_SEGMENT,(function(t,r){e._onRemuxerInitSegmentArrival(t,r)})),this._mediaCodec.on(u.a.MEDIA_SEGMENT,(function(t,r){e._onRemuxerMediaSegmentArrival(t,r)})),this._mediaCodec.on(u.a.LOAD_NEXT_FRAG,(function(){e._ioctl&&e._ioctl.isWorking()&&e._ioctl.loadNextFrag()})))},e}();t.a=_},function(e,t,r){var i,n=r(4),o=r.n(n),a=r(11),s=r(21),l=r(0),u=r(23),c=r(10),d=r(25),p=r(2),h=r(6),f=r(3),y=r(5),m=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),_=Object(y.a)(),g=function(e){function t(t,r){var i=e.call(this,"fragment-loader","m3u8")||this;return i.eventEmitter=new o.a,i.Tag="FragmentLoader",i.audioCodecSwitch=!1,i.levels=null,i.startFragRequested=!1,i.bitrateTest=!1,i.stats=null,i.stashFrag=[],i.sn=-1,i.loading=!1,i.masterLevels=[],i.currentFrag=null,i.loader=null,i._pause=!1,i.audioCodecSwap=!1,i._seekHandler=t,i._config=r,i._needStash=!0,i._requestAbort=!1,i._contentLength=null,i._receivedLength=0,i._parser=null,i.pl=null,i._dataSource=null,i._range=null,i}return m(t,e),t.isSupport=function(){return Object(d.a)()},t.prototype.on=function(e,t){this.eventEmitter.on(e,t)},t.prototype.once=function(e,t){this.eventEmitter.once(e,t)},t.prototype.off=function(e,t){this.eventEmitter.off(e,t)},Object.defineProperty(t.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.abort(),this.pl&&this.pl.abort(),this.pl=null,this.currentFrag=null,this.loader=null,this.bitrateTest=!1,this.eventEmitter.removeAllListeners(),delete this.masterLevels,delete this.eventEmitter,delete this.stashFrag,delete this.levels,delete this.stats},t.prototype.abort=function(){this._pause=!0,this._requestAbort=!0,this.loading=!1,this._status=p.a.kComplete,this.loader&&this.loader.abort()},t.prototype.pause=function(){this._pause=!0,this.loading=!1},t.prototype.resume=function(){l.a.debug(this.Tag,"æ¢å¤ä¸è½½"),this._pause=!1,this._requestAbort=!1,this.loading=!1},t.prototype.isWorking=function(){return!1===this._pause},t.prototype.open=function(e,t){this._dataSource=e,this._range=t,this.pl=new u.a(e),this.pl.on(c.a.MANIFEST_PARSED,this.onManifestParsed.bind(this)),this.pl.on(c.a.LOAD_COMPLETE,this._loadingM3U8Complete.bind(this)),this.pl.on(c.a.LOADING_ERROR,this._loadingM3U8Error.bind(this)),this.pl.on(c.a.PARSE_ERROR,this._parseM3U8Error.bind(this)),this.pl.on(c.a.LOADIND_TIMEOUT,this._loadingM3U8Timeout.bind(this)),this.pl.load()},t.prototype.startLoad=function(e,t){this.open(e,t)},t.prototype.loadNextFrag=function(){if(!this._requestAbort&&!this._pause&&this.levels){if(!1===this.levels[0].details.live&&this.sn===this.levels[0].details.endSN)return this.pl&&this.pl.stop&&this.pl.stop(),void(this.onComplete&&this.onComplete());var e=this.stashFrag[0];if("initSegment"===this.sn){if(!(e=this.stashFrag[1]))return;this.loadFrag(e)}else{for(var t=0;t<this.stashFrag.length;t++)if(this.stashFrag[t].sn===this.sn+1){e=this.stashFrag[t];break}if(!e)return;this.sn<e.sn&&this.loadFrag(e)}}},t.prototype.loadFrag=function(e){if(!this.loading){this.loading=!0,this._status=p.a.kConnecting,this.currentFrag=e,this.sn=e.sn;var t={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};this.bitrateTest&&(e.url.indexOf("?")>-1?e.url+="&r="+Math.random():e.url+="?r="+Math.random());var r=e.byteRangeStartOffset,i=e.byteRangeEndOffset;Number.isFinite(r)&&Number.isFinite(i)&&(t.rangeStart=r,t.rangeEnd=i);var n={onSuccess:this._loadsuccess.bind(this),onError:this._loaderror.bind(this),onTimeout:this._loadtimeout.bind(this),onProgress:this._loadprogress.bind(this)};this.loader=null,this.loader=new s.a,this.loader.load(t,{timeout:1e4,maxRetry:1,retryDelay:200,maxRetryDelay:200},n)}},t.prototype.seek=function(e){var t=this.currentFrag,r=this._config.maxFragLookUpTolerance;if(this.currentFrag&&t&&this.loader&&this.levels&&!(this.status===p.a.kConnecting&&e>=1e3*(t.start+r)&&e<=1e3*(t.start+t.duration-r))){this.loader.abort();for(var i=0,n=this.stashFrag||[],o=0;o<n.length;o++)if(e>=1e3*n[o].start&&e<=1e3*(n[o].start+n[o].duration)){i=o;break}i=Math.max(i-1,0),this.currentFrag=n[i],this.sn=n[i].sn,this.loadFrag(n[i])}},t.prototype.onManifestParsed=function(e){var t,r=!1,i=!1;if(this.pl)if(e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=r&&i,this.audioCodecSwitch&&l.a.log(this.Tag,"both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),"masterPlaylist"===e.type&&e.levels.length>0){this._config.tsAutoLevelChoose&&(this.bitrateTest=!0);var n=this._dataSource;n.url=e.levels[0].url,this.masterLevels=e.levels,this.pl.dataSource=n,this.pl.url=e.levels[0].url,this.pl.load()}else if("levelPlaylist"===e.type)this.levels=e.levels,this.stashFrag=e.levels[0].details.fragments,this.startFragRequested=!1,this.loadNextFrag(),this.eventEmitter.emit(c.a.MANIFEST_PARSED,e.levels[0]);else{var o={code:-1,reason:"can not find useful playlist"};if(!this._onError)throw new f.d(o.reason);this._onError(c.a.LOADING_ERROR,o)}},t.prototype.onFragLoaded=function(e){var t=e.payload,r=e.frag;if(this.levels&&this.pl&&"main"===r.type){var i=e.stats,n=this.levels[0],o=n.details;if(this.stats=i,this.bitrateTest){this.startFragRequested=!1,i.tbuffered=_.performance.now(),i.tparsed=_.performance.now();var a=this._caluCodeRate(t.byteLength,i),s=this._findSuitableLevels(a);this.pl.url=this.masterLevels[s].url,this.pl.load(),this.bitrateTest=!1}else if("initSegment"===r.sn)i.tbuffered=_.performance.now(),i.tparsed=_.performance.now(),o.initSegment.data=e.payload,this.loadNextFrag();else{r.bitrateTest&&(r.bitrateTest=!1);var l=o.initSegment?o.initSegment.data:[],u=this._getAudioCodec(n),c=n.videoCodec,d=o.totalduration,p=this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,p,this._receivedLength,{initSegmentData:l,audioCodec:u,videoCodec:c,fragCurrent:r,totalduration:d,accurateTimeOffset:!1}),this._requestAbort&&this._pause&&(this.sn=this.sn-1,this.currentFrag=this.stashFrag[this.sn])}}},t.prototype._getAudioCodec=function(e){var t=this._config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(l.a.log(this.Tag,"swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},t.prototype._loadsuccess=function(e,t,r,i){void 0===i&&(i=null),this.loading=!1;var n=e.data,o=r.frag;this._status=p.a.kComplete,o&&this.onFragLoaded({payload:n,frag:o,stats:t,networkDetails:i})},t.prototype._loaderror=function(e,t,r){this.loading=!1,this._status=p.a.kError;var i={code:e.code,reason:e.text};if(!this._onError)throw new f.d(i.reason);this._onError(h.a.HTTP_STATUS_CODE_INVALID,i)},t.prototype._loadtimeout=function(e,t,r){this.loading=!1,this._status=p.a.kError;var i={code:-1,reason:"fragment request is timeout"};if(!this._onError)throw new f.d(i.reason);this._onError(h.a.CONNECTING_TIMEOUT,i)},t.prototype._loadprogress=function(e,t,r){t.frag},t.prototype._loadingM3U8Complete=function(){},t.prototype._loadingM3U8Error=function(e){this.loading=!1,this._status=p.a.kError;var t={code:e.response.code,reason:e.response.text};if(!this._onError)throw new f.d(t.reason);this._onError(h.a.HTTP_STATUS_CODE_INVALID,t)},t.prototype._loadingM3U8Timeout=function(e){this.loading=!1,this._status=p.a.kError;var t={code:-1,reason:e.stats.text};if(!this._onError)throw new f.d(t.reason);this._onError(h.a.CONNECTING_TIMEOUT,t)},t.prototype._caluCodeRate=function(e,t){return 8*e/((t.tparsed-t.trequest)/1e3)*.8},t.prototype._parseM3U8Error=function(e){this.loading=!1,this._status=p.a.kError;var t={code:-1,reason:"parse playlist error",url:e.url};if(!this._onError)throw new f.d(t.reason);this._onError(h.a.PARSE_PLAYLISTING_ERROR,t)},t.prototype._findSuitableLevels=function(e){for(var t=this.masterLevels,r=0,i=t.length-1;i>0;i--)if(t[i].bitrate<e){r=i;break}return r},t}(a.a);t.a=g},function(e,t,r){var i=r(4),n=r.n(i);function o(e,t,r){var i=e;if(t+r<i.length){for(;r--;)if(128!=(192&i[++t]))return!1;return!0}return!1}var a,s=function(e){for(var t=[],r=e,i=0,n=e.length;i<n;)if(r[i]<128)t.push(String.fromCharCode(r[i])),++i;else{if(r[i]<192);else if(r[i]<224){if(o(r,i,1)&&(a=(31&r[i])<<6|63&r[i+1])>=128){t.push(String.fromCharCode(65535&a)),i+=2;continue}}else if(r[i]<240){if(o(r,i,2)&&(a=(15&r[i])<<12|(63&r[i+1])<<6|63&r[i+2])>=2048&&55296!=(63488&a)){t.push(String.fromCharCode(65535&a)),i+=3;continue}}else if(r[i]<248){var a;if(o(r,i,3)&&(a=(7&r[i])<<18|(63&r[i+1])<<12|(63&r[i+2])<<6|63&r[i+3])>65536&&a<1114112){a-=65536,t.push(String.fromCharCode(a>>>10|55296)),t.push(String.fromCharCode(1023&a|56320)),i+=4;continue}}t.push(String.fromCharCode(65533)),++i}return t.join("")},l=(a=new ArrayBuffer(2),new DataView(a).setInt16(0,256,!0),256===new Int16Array(a)[0]),u=function(){function e(){}return e.parseScriptData=function(t,r,i){var n=Object.create(null);try{var o=e.parseValue(t,r,i),a=o.size||0,s=o.data||"",l=e.parseValue(t,r+a,i-a);n[s]=l.data}catch(e){}return n},e.parseObject=function(t,r,i){if(i<3)throw new Error("Data not enough when parse ScriptDataObject");var n=e.parseString(t,r,i),o=e.parseValue(t,r+n.size,i-n.size),a=o.size||0,s=o.objectEnd;return{data:{name:n.data,value:o.data},size:n.size+a,objectEnd:s}},e.parseVariable=function(t,r,i){return e.parseObject(t,r,i)},e.parseString=function(e,t,r){if(r<2)throw new Error("Data not enough when parse String");var i=new DataView(e,t,r).getUint16(0,!l);return{data:i>0?s(new Uint8Array(e,t+2,i)):"",size:2+i}},e.parseLongString=function(e,t,r){if(r<4)throw new Error("Data not enough when parse LongString");var i=new DataView(e,t,r).getUint32(0,!l);return{data:i>0?s(new Uint8Array(e,t+4,i)):"",size:4+i}},e.parseDate=function(e,t,r){if(r<10)throw new Error("Data size invalid when parse Date");var i=new DataView(e,t,r),n=i.getFloat64(0,!l),o=i.getInt16(8,!l);return{data:new Date(n+=60*o*1e3),size:10}},e.parseValue=function(t,r,i){if(i<1)throw new Error("Data not enough when parse Value");var n,o=new DataView(t,r,i),a=1,s=o.getUint8(0),u=!1;try{switch(s){case 0:n=o.getFloat64(1,!l),a+=8;break;case 1:n=!!o.getUint8(1),a+=1;break;case 2:var c=e.parseString(t,r+1,i-1);n=c.data,a+=c.size;break;case 3:n={};var d=0;for(9==(16777215&o.getUint32(i-4,!l))&&(d=3);a<i-4;){var p=e.parseObject(t,r+a,i-a-d);if(p.objectEnd)break;n[p.data.name]=p.data.value,a+=p.size}a<=i-3&&9==(16777215&o.getUint32(a-1,!l))&&(a+=3);break;case 8:for(n={},a+=4,d=0,9==(16777215&o.getUint32(i-4,!l))&&(d=3);a<i-8;){var h=e.parseVariable(t,r+a,i-a-d);if(h.objectEnd)break;n[h.data.name]=h.data.value,a+=h.size}a<=i-3&&9==(16777215&o.getUint32(a-1,!l))&&(a+=3);break;case 9:n=void 0,a=1,u=!0;break;case 10:n=[];var f=o.getUint32(1,!l);a+=4;for(var y=0;y<f;y++){var m=e.parseValue(t,r+a,i-a),_=m.size||0;n.push(m.data),a+=_}break;case 11:var g=e.parseDate(t,r+1,i-1);n=g.data,a+=g.size;break;case 12:var b=e.parseString(t,r+1,i-1);n=b.data,a+=b.size;break;default:a=i}}catch(e){}return{data:n,size:a,objectEnd:u}},e}(),c=r(0),d=function(){function e(e){this.Tag="ExpGolomb",this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),n=Math.min(4,t);if(0===n)throw new Error("no bytes available");i.set(e.subarray(r,r+n)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&c.a.error(this.Tag,"Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,r=8,i=8;for(t=0;t<e;t++)0!==i&&(i=(r+this.readEG()+256)%256),r=0===i?r:i},e.prototype.readSPS=function(){var e,t,r,i=0,n=0,o=0,a=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),p=this.skipEG.bind(this),h=this.skipUEG.bind(this),f=this.skipScalingList.bind(this);s();var y=s();if(l(5),d(3),s(),h(),100===y||110===y||122===y||244===y||44===y||83===y||86===y||118===y||128===y){var m=u();if(3===m&&d(1),h(),h(),d(1),c())for(t=3!==m?8:12,r=0;r<t;r++)c()&&f(r<6?16:64)}h();var _=u();if(0===_)u();else if(1===_)for(d(1),p(),p(),e=u(),r=0;r<e;r++)p();h(),d(1);var g=u(),b=u(),v=l(1);0===v&&d(1),d(1),c()&&(i=u(),n=u(),o=u(),a=u());var $=[1,1];if(c()&&c())switch(s()){case 1:$=[1,1];break;case 2:$=[12,11];break;case 3:$=[10,11];break;case 4:$=[16,11];break;case 5:$=[40,33];break;case 6:$=[24,11];break;case 7:$=[20,11];break;case 8:$=[32,11];break;case 9:$=[80,33];break;case 10:$=[18,11];break;case 11:$=[15,11];break;case 12:$=[64,33];break;case 13:$=[160,99];break;case 14:$=[4,3];break;case 15:$=[3,2];break;case 16:$=[2,1];break;case 255:$=[s()<<8|s(),s()<<8|s()];break;default:$=[1,1]}return{width:Math.ceil(16*(g+1)-2*i-2*n),height:(2-v)*(b+1)*16-(v?2:4)*(o+a),pixelRatio:$}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),p=function(){function e(){}return e._ebsp2rbsp=function(e){for(var t=e,r=t.byteLength,i=new Uint8Array(r),n=0,o=0;o<r;o++)o>=2&&3===t[o]&&0===t[o-1]&&0===t[o-2]||(i[n]=t[o],n++);return new Uint8Array(i.buffer,0,n)},e.parseSPS=function(t){var r=e._ebsp2rbsp(t),i=new d(r);i.readUByte();var n=i.readUByte();i.readUByte();var o=i.readUByte();i.readUEG();var a=e.getProfileString(n),s=e.getLevelString(o),l=1,u=420,c=8;if((100===n||110===n||122===n||244===n||44===n||83===n||86===n||118===n||128===n||138===n||144===n)&&(3===(l=i.readUEG())&&i.readBits(1),l<=3&&(u=[0,420,422,444][l]),c=i.readUEG()+8,i.readUEG(),i.readBits(1),i.readBoolean()))for(var p=3!==l?8:12,h=0;h<p;h++)i.readBoolean()&&(h<6?e._skipScalingList(i,16):e._skipScalingList(i,64));i.readUEG();var f=i.readUEG();if(0===f)i.readUEG();else if(1===f){i.readBits(1),i.readUEG(),i.readUEG();var y=i.readUEG();for(h=0;h<y;h++)i.readUEG()}var m=i.readUEG();i.readBits(1);var _=i.readUEG(),g=i.readUEG(),b=i.readBits(1);0===b&&i.readBits(1),i.readBits(1);var v=0,$=0,E=0,S=0;i.readBoolean()&&(v=i.readUEG(),$=i.readUEG(),E=i.readUEG(),S=i.readUEG());var A=1,T=1,w=0,I=!0,R=0,O=0;if(i.readBoolean()){if(i.readBoolean()){var P=i.readUByte();P>0&&P<16?(A=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][P-1],T=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][P-1]):255===P&&(A=i.readUByte()<<8|i.readUByte(),T=i.readUByte()<<8|i.readUByte())}if(i.readBoolean()&&i.readBoolean(),i.readBoolean()&&(i.readBits(4),i.readBoolean()&&i.readBits(24)),i.readBoolean()&&(i.readUEG(),i.readUEG()),i.readBoolean()){var C=i.readBits(32),L=i.readBits(32);I=i.readBoolean(),w=(R=L)/(O=2*C)}}var k=1;1===A&&1===T||(k=A/T);var x=0,M=0;0===l?(x=1,M=2-b):(x=3===l?1:2,M=(1===l?2:1)*(2-b));var D=16*(_+1),N=16*(g+1)*(2-b);D-=(v+$)*x,N-=(E+S)*M;var B=Math.ceil(D*k);return i=null,{profileString:a,levelString:s,bitDepth:c,refFrames:m,chromaFormat:u,chromaFormatString:e.getChromaFormatString(u),frameRate:{fixed:I,fps:w,fpsDen:O,fpsNum:R},sarRatio:{width:A,height:T},codecSize:{width:D,height:N},presentSize:{width:B,height:N}}},e._skipScalingList=function(e,t){for(var r=8,i=8,n=0;n<t;n++)0!==i&&(i=(r+e.readUEG()+256)%256),r=0===i?r:i},e.getProfileString=function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},e.getLevelString=function(e){return(e/10).toFixed(1)},e.getChromaFormatString=function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},e}(),h={ERROR:"ERROR",GET_SEI_INFO:"GET_SEI_INFO",FRAG_PARSED:"FRAG_PARSED",INIT_PTS_FOUND:"INIT_PTS_FOUND",FRAG_PARSING_INIT_SEGMENT:"FRAG_PARSING_INIT_SEGMENT",FRAG_PARSING_METADATA:"FRAG_PARSING_METADATA",FRAG_PARSING_USERDATA:"FRAG_PARSING_USERDATA",MEDIA_INFO:"MEDIA_INFO",MEDIA_DATA_ARRIVED:"MEDIA_DATA_ARRIVED",SCRIPT_DATA_ARRIVED:"SCRIPT_DATA_ARRIVED",INIT_SEGMENT:"INIT_SEGMENT",MEDIA_SEGMENT:"MEDIA_SEGMENT"},f="muxError",y="FormatError",m="CodecUnsupported",_=function(){function e(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return e.prototype.isComplete=function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&e&&t},e.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},e.prototype.getNearestKeyframe=function(e){if(null==this.keyframesIndex)return null;var t=this.keyframesIndex,r=this._search(t.times,e);return{index:r,milliseconds:t.times[r],fileposition:t.filepositions[r]}},e.prototype._search=function(e,t){var r=0,i=e.length-1,n=0,o=0,a=i;for(t<e[0]&&(r=0,o=a+1);o<=a;){if((n=o+Math.floor((a-o)/2))===i||t>=e[n]&&t<e[n+1]){r=n;break}e[n]<t?o=n+1:a=n-1}return r},e}(),g=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a},b=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e},v=function(){function e(){}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]},Object.keys(e.types).forEach((function(t){e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]})),e.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),e.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),e.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),e.STCO=e.STTS,e.STSC=e.STTS,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),e.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),e.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},e.box=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var i=8,n=null,o=b(t),a=o.length,s=0;s<a;s++)i+=o[s].byteLength;(n=new Uint8Array(i))[0]=i>>>24&255,n[1]=i>>>16&255,n[2]=i>>>8&255,n[3]=255&i,n.set(e,4);var l=8;for(s=0;s<a;s++)n.set(o[s],l),l+=o[s].byteLength;return n},e.generateInitSegment=function(t){var r=e.box(e.types.ftyp,e.FTYP),i=e.moov(t),n=new Uint8Array(r.byteLength+i.byteLength);return n.set(r,0),n.set(i,r.byteLength),n},e.moov=function(t){var r=e.mvhd(t.timescale,t.duration),i=e.trak(t),n=e.mvex(t);return e.box(e.types.moov,r,i,n)},e.mvhd=function(t,r){return void 0===r&&(r=0),e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},e.trak=function(t){return e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.tkhd=function(t){var r=t.id,i=t.duration||0,n=t.presentWidth,o=t.presentHeight;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,o>>>8&255,255&o,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t),e.hdlr(t),e.minf(t))},e.mdhd=function(t){var r=t.timescale,i=t.duration||0;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,i>>>24&255,i>>>16&255,i>>>8&255,255&i,85,196,0,0]))},e.hdlr=function(t){var r=null;return r="audio"===t.type?e.HDLR_AUDIO:e.HDLR_VIDEO,e.box(e.types.hdlr,r)},e.minf=function(t){var r=null;return r="audio"===t.type?e.box(e.types.smhd,e.SMHD):e.box(e.types.vmhd,e.VMHD),e.box(e.types.minf,r,e.dinf(),e.stbl(t))},e.dinf=function(){return e.box(e.types.dinf,e.box(e.types.dref,e.DREF))},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.stsd=function(t){return"audio"===t.type?"mp3"===t.codec?e.box(e.types.stsd,e.STSD_PREFIX,e.mp3(t)):e.box(e.types.stsd,e.STSD_PREFIX,e.mp4a(t)):e.box(e.types.stsd,e.STSD_PREFIX,e.avc1(t))},e.mp3=function(t){var r=t.channelCount,i=t.audioSampleRate,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,r,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return e.box(e.types[".mp3"],n)},e.mp4a=function(t){var r=t.channelCount,i=t.audioSampleRate,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,r,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return e.box(e.types.mp4a,n,e.esds(t))},e.esds=function(t){var r=t.config||[],i=r.length,n=new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([i]).concat(r).concat([6,1,2]));return e.box(e.types.esds,n)},e.avc1=function(t){var r=t.avcc,i=t.codecWidth,n=t.codecHeight,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,n>>>8&255,255&n,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return e.box(e.types.avc1,o,e.box(e.types.avcC,r))},e.mvex=function(t){return e.box(e.types.mvex,e.trex(t))},e.trex=function(t){var r=t.id,i=new Uint8Array([0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return e.box(e.types.trex,i)},e.moof=function(t,r){return e.box(e.types.moof,e.mfhd(t.sequenceNumber),e.traf(t,r))},e.mfhd=function(t){var r=new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t]);return e.box(e.types.mfhd,r)},e.traf=function(t,r){var i=t.id,n=e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i])),o=e.box(e.types.tfdt,new Uint8Array([0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r])),a=e.sdtp(t),s=e.trun(t,a.byteLength+16+16+8+16+8+8);return e.box(e.types.traf,n,o,s,a)},e.sdtp=function(t){for(var r=t.samples||[],i=r.length,n=new Uint8Array(4+i),o=0;o<i;o++){var a=r[o].flags;n[o+4]=a.isLeading<<6|a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return e.box(e.types.sdtp,n)},e.trun=function(t,r){var i=t.samples||[],n=i.length,o=12+16*n,a=new Uint8Array(o);r+=8+o,a.set([0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0);for(var s=0;s<n;s++){var l=i[s].duration,u=i[s].size,c=i[s].flags,d=i[s].cts;a.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,u>>>24&255,u>>>16&255,u>>>8&255,255&u,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.isNonSync,0,0,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*s)}return e.box(e.types.trun,a)},e.mdat=function(t){return e.box(e.types.mdat,t)},e}();v.init();var $=v,E=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),S=r(5);function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var T={},w=Object(S.a)();!function(){var e=w.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[/]([\w.]+)/.exec(e)||/(chrome)[/]([\w.]+)/.exec(e)||/(iemobile)[/]([\w.]+)/.exec(e)||/(version)(applewebkit)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec(e)||/(webkit)[/]([\w.]+).*(version)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec(e)||/(webkit)[/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(firefox)[/]([\w.]+)/.exec(e)||[],r=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(android)/.exec(e)||/(windows)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||[],i={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:r[0]||""},n={};if(i.browser){n[i.browser]=!0;var o=i.majorVersion.split(".");n.version={major:parseInt(i.majorVersion,10),string:i.version},o.length>1&&(n.version.minor=parseInt(o[1],10)),o.length>2&&(n.version.build=parseInt(o[2],10))}i.platform&&(n[i.platform]=!0),(n.chrome||n.opr||n.safari)&&(n.webkit=!0),(n.rv||n.iemobile)&&(n.rv&&delete n.rv,i.browser="msie",n.msie=!0),n.edge&&(delete n.edge,i.browser="msedge",n.msedge=!0),n.opr&&(i.browser="opera",n.opera=!0),n.safari&&n.android&&(i.browser="android",n.android=!0),n.name=i.browser,n.platform=i.platform,Object.keys(T).forEach((function(e){delete T[e]})),A(T,n)}();var I=T,R=function(){function e(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return e.prototype.appendSyncPoint=function(e){e.isSyncPoint=!0,this.syncPoints.push(e)},e}(),O=function(){function e(e){this._type=e,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this._list.length},e.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},e.prototype._searchNearestSegmentBefore=function(e){var t=this._list;if(0===t.length)return-2;var r=t.length-1,i=0,n=0,o=r,a=0;if(e<t[0].originalBeginDts)return-1;for(;n<=o;){var s=t[i=n+Math.floor((o-n)/2)].lastSample,l=s?s.originalDts:0;if(i===r||e>l&&e<t[i+1].originalBeginDts){a=i;break}t[i].originalBeginDts<e?n=i+1:o=i-1}return a},e.prototype._searchNearestSegmentAfter=function(e){return this._searchNearestSegmentBefore(e)+1},e.prototype.append=function(e){var t=this._list,r=e,i=this._lastAppendLocation,n=0;-1!==i&&i<t.length&&r.originalBeginDts>=t[i].lastSample.originalDts&&(i===t.length-1||i<t.length-1&&r.originalBeginDts<t[i+1].originalBeginDts)?n=i+1:t.length>0&&(n=this._searchNearestSegmentBefore(r.originalBeginDts)+1),this._lastAppendLocation=n,this._list.splice(n,0,r)},e.prototype.getLastSegmentBefore=function(e){var t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null},e.prototype.getLastSampleBefore=function(e){var t=this.getLastSegmentBefore(e);return null!=t?t.lastSample:null},e.prototype.getLastSyncPointBefore=function(e){for(var t=this._searchNearestSegmentBefore(e),r=this._list[t].syncPoints;0===r.length&&t>0;)t--,r=this._list[t].syncPoints;return r.length>0?r[r.length-1]:null},e}(),P=r(12),C=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a},L=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(C(arguments[t]));return e},k=function(){function e(e,t){this.TAG="MP4Remuxer",this.TAG="MP4Remuxer",this.emitter=e,this._config=t,this._isLive=!0===t.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextRefDts=void 0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new O("audio"),this._videoSegmentInfoList=new O("video"),this._forceFirstIDR=I.chrome&&(I.version.major<50||50===I.version.major&&I.version.build<2661),this._fillSilentAfterSeek=I.msedge||I.msie,this._mp3UseMpegAudio=!I.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return e.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList&&this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList&&this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null},e.prototype.insertDiscontinuity=function(){this._videoNextDts=void 0,this._audioNextDts=void 0},e.prototype.seek=function(){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList&&this._videoSegmentInfoList.clear(),this._audioSegmentInfoList&&this._audioSegmentInfoList.clear()},e.prototype.remux=function(e,t){this._dtsBaseInited||this._calculateDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)},e.prototype._onTrackMetadataReceived=function(e,t){var r=null,i="mp4",n=t.codec;if("audio"===e)this._audioMeta=t,"mp3"===t.codec&&this._mp3UseMpegAudio?(i="mpeg",n="",r=new Uint8Array):r=$.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,r=$.generateInitSegment(t)}this.emitter.emit(h.INIT_SEGMENT,e,{type:e,data:r.buffer,codec:n,container:e+"/"+i,mediaDuration:t.duration})},e.prototype._calculateDtsBase=function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},e.prototype.flushStashedSamples=function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,r={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(r.samples.push(e),r.length=e.length);var i={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=t&&(i.samples.push(t),i.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(r,!0),this._remuxAudio(i,!0)},e.prototype._remuxAudio=function(e,t){if(null!=this._audioMeta){var r,i,n=e,o=n.samples,a=-1,s=this._audioMeta.refSampleDuration,l="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,u=this._dtsBaseInited&&void 0===this._audioNextDts,d=!1;if(o&&0!==o.length&&(1!==o.length||t)){var p=0,f=null,y=0;l?(p=0,y=n.length):(p=8,y=8+n.length);var m=null;if(o.length>1&&(m=o.pop())&&(y-=m.length),null!=this._audioStashedLastSample){var _=this._audioStashedLastSample;this._audioStashedLastSample=null,o.unshift(_),y+=_.length}null!=m&&(this._audioStashedLastSample=m);var g=o[0].dts-this._dtsBase;if(this._audioNextDts)r=g-this._audioNextDts;else if(this._audioSegmentInfoList&&this._audioSegmentInfoList.isEmpty())r=0,this._fillSilentAfterSeek&&this._videoSegmentInfoList&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(d=!0);else{var b=this._audioSegmentInfoList.getLastSampleBefore(g);if(null!=b){var v=g-(b.originalDts+b.duration);v<=3&&(v=0),r=g-(b.dts+b.duration+v)}else r=0}if(d){var S=g-r,A=this._videoSegmentInfoList.getLastSegmentBefore(g);if(null!=A&&A.beginDts<S){if(j=E.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount)){var T=A.beginDts,w=S-A.beginDts;c.a.info(this.TAG,"InsertPrefixSilentAudio: dts: "+T+", duration: "+w),o.unshift({unit:j,dts:T,pts:T,cts:0,length:j.byteLength}),y+=j.byteLength}}else d=!1}for(var O=[],C=0;C<o.length;C++){var k=(_=o[C]).unit,x=_.dts-this._dtsBase,M=(T=x,!1),D=null,N=0;if(!(x<-.001)){if("mp3"!==this._audioMeta.codec){var B=x;this._audioNextRefDts&&(B=this._audioNextRefDts);var U=x-B;if(U<=-3*s){c.a.warn(this.TAG,"Dropping 1 audio frame (originalDts: "+x+" ms ,curRefDts: "+B+" ms)  due to delta: "+U+" ms overlap.");continue}if(U>=3*s&&this._fillAudioTimestampGap&&!I.safari){M=!0;var j,F=Math.floor(U/s);c.a.warn(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync. originalDts: "+x+" ms, curRefDts: "+B+" ms, delta: "+Math.round(U)+" ms, generate: "+F+" frames"),T=Math.floor(B),N=Math.floor(B+s)-T,B+=s,null==(j=E.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(c.a.warn(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),j=k),D=[];for(var V=0;V<F;V++){var G=Math.floor(B),H=Math.floor(B+s)-G,W={dts:G,pts:G,cts:0,unit:j,size:j.byteLength,duration:H,originalDts:x,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};D.push(W),y+=k.byteLength,B+=s}this._audioNextRefDts=B+s}else T=Math.floor(B),N=Math.floor(B+s)-T,this._audioNextRefDts=B+s}else T=x-r,N=C!==o.length-1?o[C+1].dts-this._dtsBase-r-T:null!=m?m.dts-this._dtsBase-r-T:O.length>=1?O[O.length-1].duration:Math.floor(s);-1===a&&(a=T),O.push({dts:T,pts:T,cts:0,unit:_.unit,size:_.unit.byteLength,duration:N,originalDts:x,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),M&&(O=L(O,D))}}if(0===O.length)return n.samples=[],void(n.length=0);for(l?f=new Uint8Array(y):((f=new Uint8Array(y))[0]=y>>>24&255,f[1]=y>>>16&255,f[2]=y>>>8&255,f[3]=255&y,f.set($.types.mdat,4)),C=0;C<O.length;C++)k=O[C].unit,f.set(k,p),p+=k.byteLength;var q=O[O.length-1];i=q.dts+q.duration,this._audioNextDts=i;var z=new R;z.beginDts=a,z.endDts=i,z.beginPts=a,z.endPts=i,z.originalBeginDts=O[0].originalDts,z.originalEndDts=q.originalDts+q.duration,z.firstSample=new P.a(O[0].dts,O[0].pts,O[0].duration,O[0].originalDts,!1),z.lastSample=new P.a(q.dts,q.pts,q.duration,q.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(z),n.samples=O,n.sequenceNumber++;var K,Y=null;Y=l?new Uint8Array:$.moof(n,a),n.samples=[],n.length=0,K=l&&u?{type:"audio",data:this._mergeBoxes(Y,f).buffer,sampleCount:O.length,info:z,timestampOffset:a}:{type:"audio",data:this._mergeBoxes(Y,f).buffer,sampleCount:O.length,info:z},this.emitter.emit(h.MEDIA_SEGMENT,"audio",K)}}},e.prototype._remuxVideo=function(e,t){if(null!=this._videoMeta){var r,i,n,o=e,a=o.samples,s=-1,l=-1;if(a&&0!==a.length&&(1!==a.length||t)){var u=8,c=null,d=8+e.length,p=null;if(a.length>1&&(p=a.pop())&&(d-=p.length),null!=this._videoStashedLastSample){var f=this._videoStashedLastSample;this._videoStashedLastSample=null,a.unshift(f),d+=f.length}null!=p&&(this._videoStashedLastSample=p);var y=a[0].dts-this._dtsBase;if(this._videoNextDts)r=y-this._videoNextDts;else if(this._videoSegmentInfoList&&this._videoSegmentInfoList.isEmpty())r=0;else{var m=this._videoSegmentInfoList&&this._videoSegmentInfoList.getLastSampleBefore(y);if(null!=m){var _=y-(m.originalDts+m.duration);_<=3&&(_=0),r=y-(m.dts+m.duration+_)}else r=0}for(var g=new R,b=[],v=0;v<a.length;v++){var E=(f=a[v]).dts-this._dtsBase,S=f.isKeyframe,A=E-r,T=f.cts,w=A+T;-1===s&&(s=A,l=w);var I=0;if(I=v!==a.length-1?a[v+1].dts-this._dtsBase-r-A:null!=p?p.dts-this._dtsBase-r-A:b.length>=1?b[b.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),S){var O=new P.a(A,w,I,f.dts,!0);O.fileposition=f.fileposition,g.appendSyncPoint(O)}b.push({dts:A,pts:w,cts:T,isKeyframe:S,originalDts:E,units:f.units,size:f.length,duration:I,flags:{isLeading:0,dependsOn:S?2:1,isDependedOn:S?1:0,hasRedundancy:0,isNonSync:S?0:1}})}for((c=new Uint8Array(d))[0]=d>>>24&255,c[1]=d>>>16&255,c[2]=d>>>8&255,c[3]=255&d,c.set($.types.mdat,4),v=0;v<b.length;v++)for(var C=b[v].units;C.length;){var L=C.shift().data;c.set(L,u),u+=L.byteLength}var k=b[b.length-1];if(i=k.dts+k.duration,n=k.pts+k.duration,this._videoNextDts=i,g.beginDts=s,g.endDts=i,g.beginPts=l,g.endPts=n,g.originalBeginDts=b[0].originalDts,g.originalEndDts=k.originalDts+k.duration,g.firstSample=new P.a(b[0].dts,b[0].pts,b[0].duration,b[0].originalDts,b[0].isKeyframe),g.lastSample=new P.a(k.dts,k.pts,k.duration,k.originalDts,k.isKeyframe),this._isLive||this._videoSegmentInfoList&&this._videoSegmentInfoList.append(g),o.samples=b,o.sequenceNumber++,this._forceFirstIDR){var x=b[0].flags;x.dependsOn=2,x.isNonSync=0}var M=$.moof(o,s);o.samples=[],o.length=0,this.emitter.emit(h.MEDIA_SEGMENT,"video",{type:"video",data:this._mergeBoxes(M,c).buffer,sampleCount:b.length,info:g})}}},e.prototype._mergeBoxes=function(e,t){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(e,0),r.set(t,e.byteLength),r},e}();function x(e){return(x="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var M=function(){return(M=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},D=Object(S.a)(),N=function(){function e(t,r,i){var n=e.probe(t);this.eventEmitter=r,this.Tag="FLVCodec",this.type="FLVCodec",this.config=i,this.remuxer=new k(this.eventEmitter,this.config),this._onError=null,this._dataOffset=n.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=n.hasAudioTrack,this._hasVideo=n.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new _,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fpsNum:23976,fpsDen:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}()}return e.prototype.parseChunks=function(t,r){var i=0,n=this._littleEndian;if(0===r){if(!(t.byteLength>13))return 0;i=e.probe(t).dataOffset||0}for(this._firstParse&&(this._firstParse=!1,r+i!==this._dataOffset&&c.a.warn(this.Tag,"First time parsing but chunk byteStart invalid!"),0!==(o=new DataView(t,i)).getUint32(0,!n)&&c.a.warn(this.Tag,"PrevTagSize0 !== 0 !!!"),i+=4);i<t.byteLength;){this._dispatch=!0;var o=new DataView(t,i);if(i+11+4>t.byteLength)break;var a=o.getUint8(0),s=16777215&o.getUint32(0,!n);if(i+11+s+4>t.byteLength)break;if(8===a||9===a||18===a){var l=o.getUint8(4),u=o.getUint8(5),d=o.getUint8(6)|u<<8|l<<16|o.getUint8(7)<<24;0!=(16777215&o.getUint32(7,!n))&&c.a.warn(this.Tag,"Meet tag which has StreamID != 0!");var p=i+11;switch(a){case 8:this._parseAudioData(t,p,s,d);break;case 9:this._parseVideoData(t,p,s,d,r+i);break;case 18:this._parseScriptData(t,p,s);break;default:c.a.warn(this.Tag,"Unsupported tag type "+a+", skipped"),i+=11+s+4}var h=o.getUint32(11+s,!n);h!==11+s&&c.a.warn(this.Tag,"Invalid PrevTagSize "+h),i+=11+s+4}else c.a.warn(this.Tag,"Unsupported tag type "+a+", skipped"),i+=11+s+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this.remuxer.remux(this._audioTrack,this._videoTrack),i},e.prototype._parseScriptData=function(e,t,r){var i=u.parseScriptData(e,t,r);if(void 0!==i.onMetaData){if(null==i.onMetaData||"object"!==x(i.onMetaData))return void c.a.warn(this.Tag,"Invalid onMetaData structure!");this._metadata&&c.a.warn(this.Tag,"Found another onMetaData tag!"),this._metadata=i;var n=i.onMetaData;if(this.eventEmitter.emit(h.MEDIA_DATA_ARRIVED,M({},n)),"boolean"==typeof n.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=n.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof n.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=n.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof n.audiodatarate&&(this._mediaInfo.audioDataRate=n.audiodatarate),"number"==typeof n.videodatarate&&(this._mediaInfo.videoDataRate=n.videodatarate),"number"==typeof n.width&&(this._mediaInfo.width=n.width),"number"==typeof n.height&&(this._mediaInfo.height=n.height),"number"==typeof n.duration){if(!this._durationOverrided){var o=Math.floor(n.duration*this._timescale);this._duration=o,this._mediaInfo.duration=o}}else this._mediaInfo.duration=0;if("number"==typeof n.framerate){var a=Math.floor(1e3*n.framerate);if(a>0){var s=a/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=s,this._referenceFrameRate.fpsNum=a,this._referenceFrameRate.fpsDen=1e3,this._mediaInfo.fps=s}}if("object"===x(n.keyframes)){this._mediaInfo.hasKeyframesIndex=!0;var l=n.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(l),n.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=n,c.a.info(this.Tag,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this.eventEmitter.emit(h.MEDIA_INFO,this._mediaInfo)}Object.keys(i).length>0&&this.eventEmitter.emit(h.SCRIPT_DATA_ARRIVED,M({},i))},e.prototype._parseKeyframesIndex=function(e){for(var t=[],r=[],i=1;i<e.times.length;i++){var n=this._timestampBase+Math.floor(1e3*e.times[i]);t.push(n),r.push(e.filepositions[i])}return{times:t,filepositions:r}},e.prototype._parseAudioData=function(e,t,r,i){if(r<=1)c.a.warn(this.Tag,"Flv: æ æçæ°æ®å, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var n=new DataView(e,t,r).getUint8(0),o=n>>>4;if(2===o||10===o){var a=0,s=(12&n)>>>2;if(s>=0&&s<=4){a=this._flvSoundRateTable[s];var l=1&n,u=this._audioMetadata,d=this._audioTrack;if(u||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),this._audioMetadata=Object.create(null),(u=this._audioMetadata).type="audio",u.id=d.id,u.timescale=this._timescale,u.duration=this._duration,u.audioSampleRate=a,u.channelCount=0===l?1:2),10===o){var p=this._parseAACAudioData(e,t+1,r-1);if(void 0===p)return;if(0===p.packetType){if(u.config&&c.a.warn(this.Tag,"Found another AudioSpecificConfig!"),"object"===p.type){var _=p.data;u.audioSampleRate=_.samplingRate,u.channelCount=_.channelCount,u.codec=_.codec,u.originalCodec=_.originalCodec,u.config=_.config;var g=u.audioSampleRate||0,b=u.timescale||0;u.refSampleDuration=1024/g*b,c.a.info(this.Tag,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this.remuxer.remux(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this.remuxer._onTrackMetadataReceived("audio",u),(S=this._mediaInfo).audioCodec=u.originalCodec,S.audioSampleRate=u.audioSampleRate,S.audioChannelCount=u.channelCount,S.hasVideo?null!=S.videoCodec&&(S.mimeType='video/x-flv; codecs="'+S.videoCodec+","+S.audioCodec+'"'):S.mimeType='video/x-flv; codecs="'+S.audioCodec+'"',S.isComplete()&&this.eventEmitter.emit(h.MEDIA_INFO,S)}}else if(1===p.packetType){var v=p.data,$=this._timestampBase+i,E={unit:v,length:v.byteLength,dts:$,pts:$,cts:0};d.samples.push(E),d.length+=v.length}else c.a.error(this.Tag,"Flv: Unsupported AAC data type "+p.packetType)}else if(2===o){if(!u.codec){if(void 0===(_=this._parseMP3AudioData(e,t+1,r-1,!0))||_ instanceof Uint8Array)return;u.audioSampleRate=_.samplingRate,u.channelCount=_.channelCount,u.codec=_.codec,u.originalCodec=_.originalCodec;var S,A=u.audioSampleRate||0,T=u.timescale||0;u.refSampleDuration=1152/A*T,c.a.info(this.Tag,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this.remuxer._onTrackMetadataReceived("audio",u),(S=this._mediaInfo).audioCodec=u.codec,S.audioSampleRate=u.audioSampleRate,S.audioChannelCount=u.channelCount,S.audioDataRate=_.bitRate,S.hasVideo?null!=S.videoCodec&&(S.mimeType='video/x-flv; codecs="'+S.videoCodec+","+S.audioCodec+'"'):S.mimeType='video/x-flv; codecs="'+S.audioCodec+'"',S.isComplete()&&this.eventEmitter.emit(h.MEDIA_INFO,S)}var w=this._parseMP3AudioData(e,t+1,r-1,!1);if(void 0===w||!(w instanceof Uint8Array))return;$=this._timestampBase+i;var I={unit:w,length:w.byteLength,dts:$,pts:$,cts:0};d.samples.push(I),d.length+=w.length}}else this.eventEmitter.emit(h.ERROR,{type:f,details:y,fatal:!1,reason:"Flv: é³é¢éæ ·çæ æ idx: "+s})}else this.eventEmitter.emit(h.ERROR,{type:f,details:m,fatal:!1,reason:"Flv: ä¸æ¯æçç±»å idx: "+o})}},e.prototype._parseAACAudioData=function(e,t,r){if(!(r<=1)){var i=Object.create(null),n=new Uint8Array(e,t,r);return i.packetType=n[0],0===n[0]?(i.type="object",i.data=this._parseAACAudioSpecificConfig(e,t+1,r-1)):(i.type="Unit8Array",i.data=n.subarray(1)),i}c.a.warn(this.Tag,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},e.prototype._parseAACAudioSpecificConfig=function(e,t,r){var i,n,o=new Uint8Array(e,t,r),a=null,s=0,l=null;if(s=i=o[0]>>>3,(n=(7&o[0])<<1|o[1]>>>7)<0||n>=this._mpegSamplingRates.length)this.eventEmitter.emit(h.ERROR,{type:f,details:y,fatal:!1,reason:"Flv: AAC invalid sampling frequency index!"});else{var u=this._mpegSamplingRates[n],c=(120&o[1])>>>3;if(!(c<0||c>=8)){5===s&&(l=(7&o[1])<<1|o[2]>>>7);var d=D.navigator.userAgent.toLowerCase();return-1!==d.indexOf("firefox")?n>=6?(s=5,a=new Array(4),l=n-3):(s=2,a=new Array(2),l=n):-1!==d.indexOf("android")?(s=2,a=new Array(2),l=n):(s=5,l=n,a=new Array(4),n>=6?l=n-3:1===c&&(s=2,a=new Array(2),l=n)),a[0]=s<<3,a[0]|=(15&n)>>>1,a[1]=(15&n)<<7,a[1]|=(15&c)<<3,5===s&&(a[1]|=(15&l)>>>1,a[2]=(1&l)<<7,a[2]|=8,a[3]=0),{config:a,samplingRate:u,channelCount:c,codec:"mp4a.40."+s,originalCodec:"mp4a.40."+i}}this.eventEmitter.emit(h.ERROR,{type:f,details:y,fatal:!1,reason:"Flv: AAC invalid channel configuration"})}},e.prototype._parseMP3AudioData=function(e,t,r,i){if(!(r<4)){this._littleEndian;var n=new Uint8Array(e,t,r),o=null;if(i){if(255!==n[0])return;var a=n[1]>>>3&3,s=(6&n[1])>>1,l=(240&n[2])>>>4,u=(12&n[2])>>>2,d=3!=(n[3]>>>6&3)?2:1,p=0,h=0;switch(a){case 0:p=this._mpegAudioV25SampleRateTable[u];break;case 2:p=this._mpegAudioV20SampleRateTable[u];break;case 3:p=this._mpegAudioV10SampleRateTable[u];break;default:p=this._mpegAudioV25SampleRateTable[u]}switch(s){case 1:l<this._mpegAudioL3BitRateTable.length&&(h=this._mpegAudioL3BitRateTable[l]);break;case 2:l<this._mpegAudioL2BitRateTable.length&&(h=this._mpegAudioL2BitRateTable[l]);break;case 3:l<this._mpegAudioL1BitRateTable.length&&(h=this._mpegAudioL1BitRateTable[l]);break;default:l<this._mpegAudioL3BitRateTable.length&&(h=this._mpegAudioL3BitRateTable[l])}o={bitRate:h,samplingRate:p,channelCount:d,codec:"mp3",originalCodec:"mp3"}}else o=n;return o}c.a.warn(this.Tag,"Flv: Invalid MP3 packet, header missing!")},e.prototype._parseVideoData=function(e,t,r,i,n){if(r<=1)c.a.warn(this.Tag,"Flv: Invalid video packet, missing VideoData payload!");else if(!0!==this._hasVideoFlagOverrided||!1!==this._hasVideo){var o=new Uint8Array(e,t,r)[0],a=(240&o)>>>4,s=15&o;7===s?this._parseAVCVideoPacket(e,t+1,r-1,i,n,a):this.eventEmitter.emit(h.ERROR,f,{type:f,code:-1,details:m,fatal:!1,reason:"Flv: Unsupported codec in video frame: "+s})}},e.prototype._parseAVCVideoPacket=function(e,t,r,i,n,o){if(r<4)c.a.warn(this.Tag,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var a=this._littleEndian,s=new DataView(e,t,r),l=s.getUint8(0),u=(16777215&s.getUint32(0,!a))<<8>>8;0===l?this._parseAVCDecoderConfigurationRecord(e,t+4,r-4):1===l?this._parseAVCVideoData(e,t+4,r-4,i,n,o,u):2===l||this.eventEmitter.emit(h.ERROR,{type:f,details:y,fatal:!1,reason:"Flv: Invalid video packet type "+l})}},e.prototype._parseAVCDecoderConfigurationRecord=function(e,t,r){if(r<7)c.a.warn(this.Tag,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var i=this._videoMetadata,n=this._videoTrack,o=this._littleEndian,a=new DataView(e,t,r);i?void 0!==i.avcc&&c.a.warn(this.Tag,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),this._videoMetadata=Object.create(null),(i=this._videoMetadata).type="video",i.id=n.id,i.timescale=this._timescale,i.duration=this._duration);var s=a.getUint8(0),l=a.getUint8(1);if(a.getUint8(2),a.getUint8(3),1===s&&0!==l)if(this._naluLengthSize=1+(3&a.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var u=31&a.getUint8(5);if(0!==u){u>1&&c.a.warn(this.Tag,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+u);for(var d=6,m=0;m<u;m++){var _=a.getUint16(d,!o);if(d+=2,0!==_){var g=new Uint8Array(e,t+d,_);d+=_;var b=p.parseSPS(g);if(0===m){i.codecWidth=b.codecSize.width,i.codecHeight=b.codecSize.height,i.presentWidth=b.presentSize.width,i.presentHeight=b.presentSize.height,i.profile=b.profileString,i.level=b.levelString,i.bitDepth=b.bitDepth,i.chromaFormat=b.chromaFormat,i.sarRatio=b.sarRatio,i.frameRate=b.frameRate,!1!==b.frameRate.fixed&&0!==b.frameRate.fpsNum&&0!==b.frameRate.fpsDen||(i.frameRate=this._referenceFrameRate);var v=i.frameRate,$=v.fpsDen,E=v.fpsNum;i.refSampleDuration=i.timescale*($/E);for(var S=g.subarray(1,4),A="avc1.",T=0;T<3;T++){var w=S[T].toString(16);w.length<2&&(w="0"+w),A+=w}i.codec=A;var I=this._mediaInfo;I.width=i.codecWidth,I.height=i.codecHeight,I.fps=i.frameRate.fps,I.profile=i.profile,I.level=i.level,I.refFrames=b.refFrames,I.chromaFormat=b.chromaFormatString;var R=i.sarRatio;I.sarNum=R.width,I.sarDen=R.height,I.videoCodec=A,I.hasAudio?null!=I.audioCodec&&(I.mimeType='video/x-flv; codecs="'+I.videoCodec+","+I.audioCodec+'"'):I.mimeType='video/x-flv; codecs="'+I.videoCodec+'"',I.isComplete()&&this.eventEmitter.emit(h.MEDIA_INFO,I)}}}var O=a.getUint8(d);if(0!==O){for(O>1&&c.a.warn(this.Tag,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+O),d++,m=0;m<O;m++)_=a.getUint16(d,!o),d+=2,0!==_&&(d+=_);i.avcc=new Uint8Array(r),i.avcc.set(new Uint8Array(e,t,r),0),c.a.info(this.Tag,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this.remuxer.remux(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this.remuxer._onTrackMetadataReceived("video",i)}else this.eventEmitter.emit(h.ERROR,{type:f,details:y,fatal:!1,reason:"Flv: Invalid AVCDecoderConfigurationRecord: No PPS"})}else this.eventEmitter.emit(h.ERROR,{type:f,details:y,fatal:!1,reason:"Flv: Invalid AVCDecoderConfigurationRecord: No SPS"})}else this.eventEmitter.emit(h.ERROR,{type:f,details:y,fatal:!1,reason:"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1)});else this.eventEmitter.emit(h.ERROR,{type:f,details:y,fatal:!1,reason:"Flv: Invalid AVCDecoderConfigurationRecord"})}},e.prototype._parseAVCVideoData=function(e,t,r,i,n,o,a){for(var s=this._littleEndian,l=new DataView(e,t,r),u=[],d=0,p=0,f=this._naluLengthSize,y=this._timestampBase+i,m=1===o;p<r;){if(p+4>=r){c.a.warn(this.Tag,"Malformed Nalu near timestamp "+y+", offset = "+p+", dataSize = "+r);break}var _=l.getUint32(p,!s);if(3===f&&(_>>>=8),_>r-f)return void c.a.warn(this.Tag,"Malformed Nalus near timestamp "+y+", NaluSize > DataSize!");var g=31&l.getUint8(p+f);5===g&&(m=!0);var b=new Uint8Array(e,t+p,f+_),v={type:g,data:b};if(6===v.type)try{var $=b.subarray(f);this.eventEmitter.emit(h.GET_SEI_INFO,{sei:$,tagPosition:n})}catch(e){c.a.log(this.Tag,"parse sei info error!")}u.push(v),d+=b.byteLength,p+=f+_}if(u.length){var E=this._videoTrack,S={units:u,length:d,isKeyframe:m,dts:y,cts:a,pts:y+a};m&&(S.fileposition=n),E.samples.push(S),E.length+=d}},e.probe=function(e){var t=new Uint8Array(e),r={match:!1};if(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])return r;var i,n,o=(4&t[4])>>>2!=0,a=0!=(1&t[4]),s=(i=t)[n=5]<<24|i[n+1]<<16|i[n+2]<<8|i[n+3];return s<9?r:{match:!0,consumed:s,dataOffset:s,hasAudioTrack:o,hasVideoTrack:a}},e.prototype.on=function(e,t){this.eventEmitter.on(e,t)},e.prototype.once=function(e,t){this.eventEmitter.once(e,t)},e.prototype.off=function(e,t){this.eventEmitter.off(e,t)},e.prototype.destroy=function(){this.eventEmitter.removeAllListeners(),delete this.eventEmitter},Object.defineProperty(e.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(e){this._timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedDuration",{get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasAudio",{set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasVideo",{set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e},enumerable:!1,configurable:!0}),e.prototype.resetMediaInfo=function(){this._mediaInfo=new _},e.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},e.prototype.insertDiscontinuity=function(){this.remuxer.insertDiscontinuity()},e.prototype.seek=function(){this.remuxer.seek()},e.prototype.flushStashedSamples=function(){this.remuxer.flushStashedSamples()},e}(),B={forceKeyFrameOnDiscontinuity:!0,maxBufferHole:.5,maxAudioFramesDrift:1,stretchShortVideoTrack:!1},U=function(){var e=window.MediaSource||window.WebKitMediaSource;return{mp4:e.isTypeSupported("video/mp4"),mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"')}};function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var F=function(){function e(e,t){this.Tag="FLVCodec",this.type="FLVCodec",this.eventEmitter=new n.a,this._config=j(Object.create(null),B,t),this._demuxer=new N(e,this.eventEmitter,t)}return e.prototype.appendData=function(e,t){this._demuxer.parseChunks(e,t)},e.prototype.resetMediaInfo=function(){this._demuxer.resetMediaInfo()},e.prototype.insertDiscontinuity=function(){this._demuxer.insertDiscontinuity()},e.prototype.seek=function(){this._demuxer.seek()},e.probe=function(e){return N.probe(new Uint8Array(e))},e.prototype.on=function(e,t){this.eventEmitter.on(e,t)},e.prototype.once=function(e,t){this.eventEmitter.once(e,t)},e.prototype.off=function(e,t){this.eventEmitter.off(e,t)},e.prototype.destroy=function(){this.eventEmitter.removeAllListeners(),this._demuxer.destroy(),delete this.eventEmitter},Object.defineProperty(e.prototype,"timestampBase",{set:function(e){this._demuxer.timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedDuration",{set:function(e){this._demuxer.overridedDuration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasAudio",{set:function(e){this._demuxer.overridedHasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasVideo",{set:function(e){this._demuxer.overridedHasVideo=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Events",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(e,"typeSupportFunc",{get:function(){return U},enumerable:!1,configurable:!0}),e.prototype.flushStashedSamples=function(){this._demuxer.flushStashedSamples()},e.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},e.prototype.parseChunks=function(e,t){return this._demuxer.parseChunks(e,t)},e}();t.a=F},function(e,t,r){var i=r(4),n=r.n(i),o=r(0),a="mediaError",s="muxError",l="fragParsingError",u="remuxAllocError",c=r(1);function d(e,t){return 255===e[t]&&240==(246&e[t+1])}function p(e,t){return 1&e[t+1]?7:9}function h(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function f(e,t){return!!(t+1<e.length&&d(e,t))}function y(e,t,r,i,n){if(!e.samplerate){var s=function(e,t,r,i){var n,s,u,d,p=navigator.userAgent.toLowerCase(),h=i,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];n=1+((192&t[r+2])>>>6);var y=(60&t[r+2])>>>2;if(!(y>f.length-1))return u=(1&t[r+2])<<2,u|=(192&t[r+3])>>>6,o.a.log("adts","manifest codec:"+i+",ADTS data:type:"+n+",sampleingIndex:"+y+"["+f[y]+"Hz],channelConfig:"+u),/firefox/i.test(p)?y>=6?(n=5,d=new Array(4),s=y-3):(n=2,d=new Array(2),s=y):-1!==p.indexOf("android")?(n=2,d=new Array(2),s=y):(n=5,d=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&y>=6?s=y-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(y>=6&&1===u||/vivaldi/i.test(p))||!i&&1===u)&&(n=2,d=new Array(2)),s=y)),d[0]=n<<3,d[0]|=(14&y)>>1,d[1]|=(1&y)<<7,d[1]|=u<<3,5===n&&(d[1]|=(14&s)>>1,d[2]=(1&s)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:f[y],channelCount:u,codec:"mp4a.40."+n,manifestCodec:h};e.emit(c.a.ERROR,{type:a,details:l,fatal:!0,reason:"invalid ADTS sampling index:"+y})}(t,r,i,n);if(!s)return;e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,o.a.log("initTrackConfig","parsed codec:"+e.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)}}function m(e){return 9216e4/e}function _(e,t,r,i,n){var o=function(e,t,r,i,n){var o,a=e.length,s=p(e,t);if(o=h(e,t),(o-=s)>0&&t+s+o<=a)return{headerLength:s,frameLength:o,stamp:r+i*n}}(t,r,i,n,m(e.samplerate));if(o){var a=o.stamp,s=o.headerLength,l=o.frameLength,u={unit:t.subarray(r+s,r+s+l),pts:a,dts:a};return e.samples.push(u),{sample:u,length:l+s}}}var g={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,i,n){if(!(r+24>t.length)){var o=this.parseHeader(t,r);if(o&&r+o.frameLength<=t.length){var a=i+n*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:t.subarray(r,r+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),{sample:s,length:o.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,n=e[t+2]>>4&15,o=e[t+2]>>2&3,a=e[t+2]>>1&1;if(1!==r&&0!==n&&15!==n&&3!==o){var s=void 0;s=3===r?3-i:3===i?3:4;var l=1e3*g.BitratesMap[14*s+n-1],u=void 0;u=3===r?0:2===r?1:2;var c=g.SamplingRateMap[3*u+o],d=e[t+3]>>6==3?1:2,p=g.SamplesCoefficients[r][i],h=g.BytesInSlot[i],f=8*p*h;return{sampleRate:c,channelCount:d,frameLength:parseInt(String(p*l/c+a),10)*h,samplesPerFrame:f}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),i=4;r&&r.frameLength&&(i=r.frameLength);var n=t+i;if(n===e.length||n+1<e.length&&this.isHeaderPattern(e,n))return!0}return!1}},b=g,v={ERROR:"ERROR",GET_SEI_INFO:"GET_SEI_INFO",FRAG_PARSED:"FRAG_PARSED",INIT_PTS_FOUND:"INIT_PTS_FOUND",FRAG_PARSING_INIT_SEGMENT:"FRAG_PARSING_INIT_SEGMENT",FRAG_PARSING_METADATA:"FRAG_PARSING_METADATA",FRAG_PARSING_USERDATA:"FRAG_PARSING_USERDATA",MEDIA_INFO:"MEDIA_INFO",INIT_SEGMENT:"INIT_SEGMENT",MEDIA_SEGMENT:"MEDIA_SEGMENT",LOAD_NEXT_FRAG:"LOAD_NEXT_FRAG",META_DATA:"META_DATA"},$=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),n=Math.min(4,t);if(0===n)throw new Error("no bytes available");i.set(e.subarray(r,r+n)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(t){var r=Math.min(this.bitsAvailable,t),i=this.word>>>32-r;return t>32&&o.a.error(e.Tag,"Cannot read more than 32 bits at a time"),this.bitsAvailable-=r,this.bitsAvailable>0?this.word<<=r:this.bytesAvailable>0&&this.loadWord(),(r=t-r)>0&&this.bitsAvailable?i<<r|this.readBits(r):i},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,r=8,i=8;for(t=0;t<e;t++)0!==i&&(i=(r+this.readEG()+256)%256),r=0===i?r:i},e.prototype.readSPS=function(){var e,t,r,i=0,n=0,o=0,a=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),p=this.skipEG.bind(this),h=this.skipUEG.bind(this),f=this.skipScalingList.bind(this);s();var y=s();if(l(5),d(3),s(),h(),100===y||110===y||122===y||244===y||44===y||83===y||86===y||118===y||128===y){var m=u();if(3===m&&d(1),h(),h(),d(1),c())for(t=3!==m?8:12,r=0;r<t;r++)c()&&f(r<6?16:64)}h();var _=u();if(0===_)u();else if(1===_)for(d(1),p(),p(),e=u(),r=0;r<e;r++)p();h(),d(1);var g=u(),b=u(),v=l(1);0===v&&d(1),d(1),c()&&(i=u(),n=u(),o=u(),a=u());var $=[1,1];if(c()&&c())switch(s()){case 1:$=[1,1];break;case 2:$=[12,11];break;case 3:$=[10,11];break;case 4:$=[16,11];break;case 5:$=[40,33];break;case 6:$=[24,11];break;case 7:$=[20,11];break;case 8:$=[32,11];break;case 9:$=[80,33];break;case 10:$=[18,11];break;case 11:$=[15,11];break;case 12:$=[64,33];break;case 13:$=[160,99];break;case 14:$=[4,3];break;case 15:$=[3,2];break;case 16:$=[2,1];break;case 255:$=[s()<<8|s(),s()<<8|s()];break;default:$=[1,1]}return{width:Math.ceil(16*(g+1)-2*i-2*n),height:(2-v)*(b+1)*16-(v?2:4)*(o+a),pixelRatio:$}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e.Tag="ExpGolomb",e}(),E=function(e,t,r,i){return{key:e,pts:t,dts:r,units:[],debug:i,frame:!1}},S=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),A=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a},T=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(A(arguments[t]));return e},w=Math.pow(2,32)-1,I=function(){function e(){}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},Object.keys(e.types).forEach((function(t){e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]}));var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:t,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);e.STCO=n,e.STSC=n,e.STTS=n,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,s,o,a),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var i=t,n=8,o=i.length,a=o;o--;)n+=i[o].byteLength;var s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=255&n,s.set(e,4),o=0,n=8;o<a;o++)s.set(i[o],n),n+=i[o].byteLength;return s},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var i=Math.floor(r/(w+1)),n=Math.floor(r%(w+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,r))},e.moov=function(t){for(var r,i=t.length,n=[];i--;)n[i]=e.trak(t[i]);return(r=e.box).call.apply(r,T([null,e.types.moov,e.mvhd(t[0].timescale,t[0].duration)],n,[e.mvex(t)]))},e.mvex=function(t){for(var r,i=t.length,n=[];i--;)n[i]=e.trex(t[i]);return(r=e.box).call.apply(r,T([null,e.types.mvex],n))},e.mvhd=function(t,r){r*=t;var i=Math.floor(r/(w+1)),n=Math.floor(r%(w+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)},e.sdtp=function(t){var r,i,n=t.samples||[],o=new Uint8Array(4+n.length);for(i=0;i<n.length;i++)r=n[i].flags,o[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,o)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,i,n,o=[],a=[];for(r=0;r<t.sps.length;r++)n=(i=t.sps[r]).byteLength,o.push(n>>>8&255),o.push(255&n),o=o.concat(Array.prototype.slice.call(i));for(r=0;r<t.pps.length;r++)n=(i=t.pps[r]).byteLength,a.push(n>>>8&255),a.push(255&n),a=a.concat(Array.prototype.slice.call(i));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config?e.config.length:0;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,n=t.width,o=t.height,a=Math.floor(i/(w+1)),s=Math.floor(i%(w+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,o>>8&255,255&o,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),n=t.id,o=Math.floor(r/(w+1)),a=Math.floor(r%(w+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var i,n,o,a,s,l,u=t.samples||[],c=u.length,d=12+16*c,p=new Uint8Array(d);for(r+=8+d,p.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),i=0;i<c;i++)o=(n=u[i]).duration,a=n.size,s=n.flags,l=n.cts,p.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,p)},e.initSegment=function(t){e.types||e.init();var r=e.moov(t),i=new Uint8Array(e.FTYP.byteLength+r.byteLength);return i.set(e.FTYP),i.set(r,e.FTYP.byteLength),i},e}(),R=r(12),O=function(){function e(e,t,r,i){this.emitter=e,this.config=t,this.typeSupported=r,this.agentInfo=i;var n=i.userAgent;this.isSafari=Boolean(i.vendor&&i.vendor.indexOf("Apple")>-1&&n&&!n.match("CriOS")),this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=void 0,this.nextAudioPts=void 0}return e.prototype.destroy=function(){delete this.config,delete this.typeSupported,this.emitter.removeAllListeners(),delete this.emitter,delete this.config,delete this.typeSupported,delete this.agentInfo},e.prototype.resetTimeStamp=function(e){this._initDTS=e,this._initPTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(t,r,i,n,a,s,l){if(this.ISGenerated||this.generateIS(t,r,a),this.ISGenerated){var u=t.samples.length,c=r.samples.length,d=a,p=a;if(u&&c){var h=(t.samples[0].pts-r.samples[0].pts)/r.inputTimeScale;d+=Math.max(0,h),p+=Math.max(0,-h)}if(u){t.timescale||(o.a.warn(e.Tag,"regenerate InitSegment as audio detected"),this.generateIS(t,r,a));var f=this.remuxAudio(t,d,s,l);if(c){var y=void 0;f&&(y=f.endPTS-f.startPTS),r.timescale||(o.a.warn(e.Tag,"regenerate InitSegment as video detected"),this.generateIS(t,r,a)),this.remuxVideo(r,p,s,y,l)}}else if(c){var m=this.remuxVideo(r,p,s,0,l);m&&t.codec&&this.remuxEmptyAudio(t,d,s,m)}}i.samples.length&&this.remuxID3(i),n.samples.length&&this.remuxText(n),this.emitter.emit(v.FRAG_PARSED),this.emitter.emit(v.LOAD_NEXT_FRAG)},e.prototype.generateIS=function(t,r,i){var n,s,u=this,c=this.emitter,d=t.samples,p=r.samples,h=this.typeSupported,f="audio/mp4",y=Object.create(null),m=void 0===this._initPTS;if(m&&(s=1/0,n=1/0),t.config&&d.length&&(t.timescale=t.samplerate,o.a.info(e.Tag,"audio sampling rate : "+t.samplerate),t.isAAC||(h.mpeg?(f="audio/mpeg",t.codec=""):h.mp3&&(t.codec="mp3")),y.audio={container:f,codec:t.codec,initSegment:!t.isAAC&&h.mpeg?new Uint8Array:I.initSegment([t]),metadata:{channelCount:t.channelCount},mediaDuration:t.duration||0},m&&(s=d[0].pts-t.inputTimeScale*i,n=s)),r.sps&&r.pps&&p.length){var _=r.inputTimeScale;r.timescale=_,y.video={container:"video/mp4",codec:r.codec,initSegment:I.initSegment([r]),metadata:{width:r.width,height:r.height},mediaDuration:r.duration},m&&(n=Math.min(n,p[0].pts-_*i),s=Math.min(s,p[0].dts-_*i),this.emitter.emit(v.INIT_PTS_FOUND,{initPTS:n}))}var g=Object.keys(y);g.length?g.forEach((function(t){var r=y[t],i=r.initSegment;o.a.debug(e.Tag,"main track:"+t+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]"),i&&c.emit(v.INIT_SEGMENT,"initSegment",{type:t,data:i,parent:"main",content:"initSegment",mediaDuration:r.mediaDuration,codec:r.codec,container:r.container}),u.ISGenerated=!0,m&&(u._initPTS=n,u._initDTS=s)})):c.emit(v.ERROR,{type:a,details:l,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(t,r,i,n,a){var l,c,d,p,h,f,y=8,m=t.timescale,_=t.samples,g=[],b=_.length,$=this._PTSNormalize,E=this._initPTS,S=this.nextAvcDts,A=this.isSafari,T=[];if(0!==b){if(A){var w=a&&Math.abs(r-S/m)<.1,O=Math.abs(_[0].pts-S-E)<m/5;i=Boolean(_.length&&S&&(w||O))||i}i||(S=r*m),h=1e3*_[0].dts/t.inputTimeScale,f=1e3*_[_.length-1].dts/t.inputTimeScale,_.forEach((function(e){e.pts=$(e.pts-E,S),e.dts=$(e.dts-E,S)})),_.sort((function(e,t){var r=e.dts-t.dts,i=e.pts-t.pts;return r||i||e.id-t.id}));var P=_.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)}),0);if(P<0){o.a.warn(e.Tag,"PTS < DTS detected in video samples, shifting DTS by "+Math.round(P/90)+" ms to overcome this issue");for(var C=0;C<_.length;C++)_[C].dts+=P}var L=_[0];p=Math.max(L.dts,0),d=Math.max(L.pts,0);var k=Math.round((p-S)/90);i&&k&&(k>1?o.a.log(e.Tag,"AVC:"+k+" ms hole between fragments detected,filling it"):k<-1&&o.a.log(e.Tag,"AVC:"+-k+" ms overlapping between fragments detected"),p=S,_[0].dts=p,d=Math.max(d-k,S),_[0].pts=d,o.a.log(e.Tag,"Video/PTS/DTS adjusted: "+Math.round(d/90)+"/"+Math.round(p/90)+",delta:"+k+" ms")),L=_[_.length-1];var x=Math.max(L.dts,0),M=Math.max(L.pts,0,x);A&&(l=Math.round((x-p)/(_.length-1)));var D=0,N=0;for(C=0;C<b;C++){for(var B=_[C],U=B.units,j=U.length,F=0,V=0;V<j;V++)F+=U[V].data.length;N+=F,D+=j,B.length=F,B.dts=A?p+C*l:Math.max(B.dts,p),B.pts=Math.max(B.pts,B.dts)}var G=N+4*D+8;try{c=new Uint8Array(G)}catch(e){return void this.emitter.emit(v.ERROR,{type:s,details:u,fatal:!1,bytes:G,reason:"fail allocating video mdat "+G})}var H=new DataView(c.buffer);for(H.setUint32(0,G),c.set(I.types.mdat,4),C=0;C<b;C++){var W=_[C],q=W.units,z=0,K=void 0;for(V=0,j=q.length;V<j;V++){var Y=q[V],Z=Y.data,X=Y.data.byteLength;H.setUint32(y,X),y+=4,c.set(Z,y),y+=X,z+=4+X}if(A)K=Math.max(0,l*Math.round((W.pts-W.dts)/l));else{if(C<b-1)l=_[C+1].dts-W.dts;else{var J=this.config,Q=W.dts-_[C>0?C-1:C].dts;if(J.stretchShortVideoTrack){var ee=J.maxBufferHole,te=Math.floor(ee*m),re=(n?d+n*m:this.nextAudioPts)-W.pts;re>te?((l=re-Q)<0&&(l=Q),o.a.log(e.Tag,"It is approximately "+re/90+" ms to the next segment; using duration "+l/90+" ms for the last video frame.")):l=Q}else l=Q}K=Math.round(W.pts-W.dts)}g.push({size:z,duration:l,cts:K,dts:W.dts,pts:W.pts,keyframe:W.key&&W.frame,originalDts:W.dts,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:W.key?2:1,isNonSync:W.key?0:1}})}this.nextAvcDts=x+l;var ie=t.dropped;if(t.nbNalu=0,t.dropped=0,g.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ne=g[0].flags;ne.dependsOn=2,ne.isNonSync=0}t.samples=g,g.forEach((function(e){e.keyframe&&T.push(new R.a(1e3*e.dts/t.inputTimeScale,1e3*e.pts/t.inputTimeScale,0,Math.ceil(1e3*e.pts/t.inputTimeScale),!0))}));var oe=new R.a(g[0].dts,g[0].pts,g[0].duration,g[0].originalDts,!1),ae=new R.a(g[g.length-1].dts,g[g.length-1].pts,g[g.length-1].duration,g[g.length-1].originalDts,!1),se=I.moof(t.sequenceNumber++,p,t);t.samples=[];var le=this._mergeBoxes(se,c),ue={data1:se,data2:c,startPTS:d/m,endPTS:(M+l)/m,startDTS:p/m,endDTS:this.nextAvcDts/m,type:"video",hasAudio:!1,hasVideo:!0,nb:g.length,dropped:ie},ce={type:"video",data:le,sampleCount:b,info:{beginDts:p/m,beginPts:d/m,endDts:this.nextAvcDts/m,endPts:(M+l)/m,originalBeginDts:h,originalEndDts:f,syncPoints:T,firstSample:oe,lastSample:ae}};return this.emitter.emit(v.MEDIA_SEGMENT,"video",ce),ue}},e.prototype.remuxAudio=function(t,r,i,n){var a,l,c,d,p,h=t.inputTimeScale,f=t.timescale,y=h/f,m=(t.isAAC?1024:1152)*y,_=this._PTSNormalize,g=this._initPTS,b=!t.isAAC&&this.typeSupported.mpeg,$=Object.create(null),E=b?0:8,A=t.samples,T=[],w=this.nextAudioPts,R=n&&Math.abs(r-w/h)<.1,O=Math.abs(A[0].pts-w-g)<20*m;if(i=Boolean(i||A.length&&w&&(R||O)),A.forEach((function(e){e.dts=_(e.pts-g,r*h),e.pts=e.dts})),0===(A=A.filter((function(e){return e.pts>=0}))).length)return null;var P=A[0].dts,C=A[A.length-1].dts;if(i||(w=n?r*h:A[0].pts),t.isAAC)for(var L=this.config.maxAudioFramesDrift,k=0,x=w;k<A.length;){var M=A[k],D=(q=M.pts)-x,N=Math.abs(1e3*D/h);if(D<=-L*m)o.a.warn(e.Tag,"Dropping 1 audio frame @ "+(x/h).toFixed(3)+"s due to "+Math.round(N)+" ms overlap."),A.splice(k,1);else if(D>=L*m&&N<1e4&&x){var B=Math.round(D/m);o.a.warn(e.Tag,"Injecting "+B+" audio frame @ "+(x/h).toFixed(3)+"s due to "+Math.round(1e3*D/h)+" ms gap.");for(var U=0;U<B;U++){var j=Math.max(x,0);(a=S.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.a.log(e.Tag,"Unable to get silent frame for given audio codec; duplicating last frame instead."),a=M.unit.subarray(0)),A.splice(k,0,{unit:a,pts:j,dts:j}),x+=m,k++}M.dts=x,M.pts=x,x+=m,k++}else M.dts=x,M.pts=x,x+=m,k++}for(var F=A.length,V=0;F--;)V+=A[F].unit.byteLength;U=0;for(var G=A.length;U<G;U++){var H=A[U],W=H.unit,q=H.pts;if(void 0!==p)$.duration=Math.round((q-p)/y);else{D=Math.round(1e3*(q-w)/h);var z=0;if(i&&t.isAAC&&D){if(D>0&&D<1e4)z=Math.round((q-w)/m),o.a.log(e.Tag,D+" ms hole between AAC samples detected,filling it"),z>0&&((a=S.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(a=W.subarray(0)),V+=z*a.length);else if(D<-12){o.a.log(e.Tag,"drop overlapping AAC sample, expected/parsed/delta:"+(w/h).toFixed(3)+"s/"+(q/h).toFixed(3)+"s/"+-D+"ms"),V-=W.byteLength;continue}q=w}if(d=q,!(V>0))return null;V+=E;try{l=new Uint8Array(V)}catch(e){return this.emitter.emit(v.ERROR,{type:s,details:u,fatal:!1,bytes:V,reason:"fail allocating audio mdat "+V}),null}for(b||(new DataView(l.buffer).setUint32(0,V),l.set(I.types.mdat,4)),k=0;k<z;k++)(a=S.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.a.log(e.Tag,"Unable to get silent frame for given audio codec; duplicating this frame instead."),a=W.subarray(0)),l.set(a,E),E+=a.byteLength,$={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push($)}l&&l.set(W,E);var K=W.byteLength;E+=K,$={size:K,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push($),p=q}var Y=0;if((F=T.length)>=2&&(Y=T[F-2].duration,$.duration=Y),F){w=p+y*Y,this.nextAudioPts=w,t.samples=T,c=b?new Uint8Array:I.moof(t.sequenceNumber++,d/y,t),t.samples=[];var Z=d/h,X=w/h,J={data1:c,data2:l,startPTS:Z,endPTS:X,startDTS:Z,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:F},Q={data:this._mergeBoxes(c,l),sampleCount:F,type:"audio",info:{beginDts:Z,beginPts:Z,endDts:X,endPts:X,syncPoints:[],originalBeginDts:P,originalEndDts:C}};return this.emitter.emit(v.MEDIA_SEGMENT,"audio",Q),J}return null},e.prototype.remuxEmptyAudio=function(t,r,i,n){var a=t.inputTimeScale,s=a/(t.samplerate?t.samplerate:a),l=this.nextAudioPts,u=(void 0!==l?l:n.startDTS*a)+this._initDTS,c=n.endDTS*a+this._initDTS,d=1024*s,p=Math.ceil((c-u)/d),h=S.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(o.a.warn(e.Tag,"remux empty Audio"),h){for(var f=[],y=0;y<p;y++){var m=u+y*d;f.push({unit:h,pts:m,dts:m})}t.samples=f,this.remuxAudio(t,r,i)}else o.a.info(e.Tag,"Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e){var t,r=e.samples.length,i=e.inputTimeScale,n=this._initPTS;if(this._initDTS,r){for(var o=0;o<r;o++)(t=e.samples[o]).pts=(t.pts-n)/i,t.dts=(t.dts-n)/i;this.emitter.emit(v.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.prototype.remuxText=function(e){e.samples.sort((function(e,t){return e.pts-t.pts}));var t,r=e.samples.length,i=e.inputTimeScale,n=this._initPTS;if(r){for(var o=0;o<r;o++)(t=e.samples[o]).pts=(t.pts-n)/i;this.emitter.emit(v.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e.prototype._PTSNormalize=function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e},e.prototype._mergeBoxes=function(e,t){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(e,0),r.set(t,e.byteLength),r},e}();function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var C={video:1,audio:2,id3:3,text:4},L=function(){function e(t,r,i,n){this._emitter=t,this.config=r,this.typeSupported=i,this.agentInfo=n,this.frag=null,this.remuxer=new O(this._emitter,r,i,n),this.sampleAes=null,this._onError=null,this._mediaInfo=Object.create(null),this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this.sequenceNumber=0,this._timestampBase=0,this._avcTrack=e.createVideoTrack(),this._audioTrack=e.createAudioTrack(0),this._id3Track=e.createId3Track(),this._txtTrack=e.createTextTrack(),this._hasAudioFlagOverrided=!1,this._hasAudio=!1,this._hasVideoFlagOverrided=!1,this._hasVideo=!1,this._durationOverrided=!1,this._duration=0,this.pmtParsed=!1,this._pmtId=-1,this.contiguous=!1,this.avcSample=null,this.aacOverFlow=null,this.aacLastPTS=void 0}return Object.defineProperty(e.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(e){this._timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedDuration",{get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasAudio",{set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasVideo",{set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t){this._emitter.on(e,t)},e.prototype.once=function(e,t){this._emitter.once(e,t)},e.prototype.off=function(e,t){this._emitter.off(e,t)},e.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},e.prototype.parseChunks=function(t,r){var i=r.fragCurrent,n=Number.isFinite(i.startPTS)?i.startPTS:i.start,a=i.decryptdata,s=this.frag,l=!(s&&i.cc===s.cc),u=!(s&&i.level===s.level),c=s&&i.sn===s.sn+1,d=!u&&c;l&&o.a.debug(e.Tag,this.id+":discontinuity detected"),u&&o.a.debug(e.Tag,this.id+":switch detected"),this.frag=i,this.pushDecrypted(t,a,new Uint8Array(r.initSegmentData),r.audioCodec,r.videoCodec,n,l,u,d,r.totalduration,r.accurateTimeOffset,r.defaultInitPTS)},e.prototype.pushDecrypted=function(e,t,r,i,n,o,a,s,l,u,c,d){(a||s)&&(this.resetInitSegment(r,i,n,u),this.remuxer.resetInitSegment()),a&&(this.resetTimeStamp(d),this.remuxer.resetTimeStamp(d)),this.append(new Uint8Array(e),o,l,c)},e.probe=function(t){var r=e._syncOffset(t);return!(r<0||(r&&o.a.warn(e.Tag,"MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:C[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.createVideoTrack=function(){return{container:"video/mp2t",type:"video",id:C.video,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,isAAC:void 0,duration:void 0}},e.createAudioTrack=function(e){return{container:"video/mp2t",type:"audio",id:C.audio,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:void 0,isAAC:!0,duration:e}},e.createId3Track=function(){return{container:void 0,type:"id3",id:C.id3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:void 0,isAAC:void 0,duration:void 0}},e.createTextTrack=function(){return{container:void 0,type:"text",id:C.text,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:void 0,isAAC:void 0,duration:void 0}},e.prototype.resetInitSegment=function(t,r,i,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createVideoTrack(),this._audioTrack=e.createAudioTrack(n),this._id3Track=e.createId3Track(),this._txtTrack=e.createTextTrack(),this.aacOverFlow=null,this.aacLastPTS=void 0,this.avcSample=null,this.audioCodec=r,this.videoCodec=i,this._duration=n},e.prototype.resetTimeStamp=function(e){},e.prototype.resetMediaInfo=function(){this._mediaInfo=Object.create(null)},e.prototype.append=function(t,r,i,n){var s,u,c,d,p=t.length,h=!1,f=!1;this.contiguous=i;var y=this.pmtParsed,m=this._avcTrack,_=this._audioTrack,g=this._id3Track,b=m?m.pid:-1,$=_?_.pid:-1,E=g?g.pid:-1,S=this._pmtId,A=m.pesData,T=_.pesData,w=g.pesData,I=this._parsePAT,R=this._parsePMT,O=this._parsePES,P=this._parseAVCPES.bind(this),C=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),k=this._parseID3PES.bind(this),x=e._syncOffset(t);for(p-=(p+x)%188,s=x;s<p;s+=188)if(71===t[s]){if(h=!!(64&t[s+1]),u=((31&t[s+1])<<8)+t[s+2],(48&t[s+3])>>4>1){if((c=s+5+t[s+4])===s+188)continue}else c=s+4;switch(u){case b:h&&(A&&(d=O(A)),A&&d&&void 0!==d.pts&&P(d,!1),A={data:[],size:0}),A&&(A.data.push(t.subarray(c,s+188)),A.size+=s+188-c);break;case $:h&&(T&&(d=O(T)),T&&d&&void 0!==d.pts&&(_.isAAC?C(d):L(d)),T={data:[],size:0}),T&&(T.data.push(t.subarray(c,s+188)),T.size+=s+188-c);break;case E:h&&(w&&(d=O(w)),w&&d&&void 0!==d.pts&&k(d),w={data:[],size:0}),w&&(w.data.push(t.subarray(c,s+188)),w.size+=s+188-c);break;case 0:h&&(c+=t[c]+1),this._pmtId=I(t,c),S=this._pmtId;break;case S:h&&(c+=t[c]+1);var M=R(t,c,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!==this.sampleAes);(b=M.avc)>0&&(m.pid=b),($=M.audio)>0&&(_.pid=$,_.isAAC=M.isAAC),(E=M.id3)>0&&(g.pid=E),f&&!y&&(o.a.log(e.Tag,"reparse from beginning"),f=!1,s=x-188),this.pmtParsed=!0,y=!0;break;case 17:case 8191:break;default:f=!0}}else this._emitter.emit(v.ERROR,{type:a,details:l,fatal:!1,code:-2,reason:"TS packet did not start with 0x47"});A&&(d=O(A)),A&&d&&void 0!==d.pts?(P(d,!0),m.pesData=void 0):m.pesData=A,T&&(d=O(T)),T&&d&&void 0!==d.pts?(_.isAAC?C(d,!0):L(d),_.pesData=void 0):(T&&T.size&&o.a.log(e.Tag,"last AAC PES packet truncated,might overlap between fragments"),_.pesData=T),w&&(d=O(w)),w&&d&&void 0!==d.pts?(k(d),g.pesData=void 0):g.pesData=w,this.sequenceNumber+=1;var D=this.sequenceNumber;_.sequenceNumber=D,m.sequenceNumber=D,this._parseMediaInfo(_,m),this._createMetadata(_,m),this.remuxer.remux(_,m,g,this._txtTrack,r,i,n)},e.prototype.destroy=function(){this._initDTS=void 0,this._initPTS=void 0,this._duration=0,this.sequenceNumber=0,this._emitter.removeAllListeners(),delete this._emitter,delete this.config,delete this.typeSupported,delete this.agentInfo,this.frag=null,delete this.remuxer,this.sampleAes=null,this._onError=null,delete this._mediaInfo,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this.sequenceNumber=0,this._timestampBase=0,delete this._avcTrack,delete this._audioTrack,delete this._id3Track,delete this._txtTrack,this._hasAudioFlagOverrided=!1,this._hasAudio=!1,this._hasVideoFlagOverrided=!1,this._hasVideo=!1,this._durationOverrided=!1,this._duration=0,this.pmtParsed=!1,this._pmtId=-1,this.contiguous=!1,this.avcSample=null,this.aacOverFlow=null,this.aacLastPTS=void 0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(t,r,i,n){var a,s={audio:-1,avc:-1,id3:-1,isAAC:!0},l=r+3+((15&t[r+1])<<8|t[r+2])-4;for(r+=12+((15&t[r+10])<<8|t[r+11]);r<l;){switch(a=(31&t[r+1])<<8|t[r+2],t[r]){case 207:if(!n){o.a.log(e.Tag,"unkown stream type:"+t[r]);break}case 15:-1===s.audio&&(s.audio=a);break;case 21:-1===s.id3&&(s.id3=a);break;case 219:if(!n){o.a.log(e.Tag,"unkown stream type:"+t[r]);break}case 27:-1===s.avc&&(s.avc=a);break;case 3:case 4:i?-1===s.audio&&(s.audio=a,s.isAAC=!1):o.a.log(e.Tag,"MPEG audio found, not supported in this browser for now");break;case 36:o.a.log(e.Tag,"HEVC stream type found, not supported for now");break;default:o.a.log(e.Tag,"unkown stream type:"+t[r])}r+=5+((15&t[r+3])<<8|t[r+4])}return s},e.prototype._parsePES=function(t){var r,i,n,a,s,l,u,c,d=0,p=t.data;if(!t||0===t.size)return null;for(;p[0].length<19&&p.length>1;){var h=new Uint8Array(p[0].length+p[1].length);h.set(p[0]),h.set(p[1],p[0].length),p[0]=h,p.splice(1,1)}if(1===((r=p[0])[0]<<16)+(r[1]<<8)+r[2]){if((n=(r[4]<<8)+r[5])&&n>t.size-6)return null;192&(i=r[7])&&((l=536870912*(14&r[9])+4194304*(255&r[10])+16384*(254&r[11])+128*(255&r[12])+(254&r[13])/2)>4294967295&&(l-=8589934592),64&i?((u=536870912*(14&r[14])+4194304*(255&r[15])+16384*(254&r[16])+128*(255&r[17])+(254&r[18])/2)>4294967295&&(u-=8589934592),l-u>54e5&&(o.a.warn(e.Tag,Math.round((l-u)/9e4)+"s delta between PTS and DTS, align them"),l=u)):u=l),c=(a=r[8])+9,t.size-=c,s=new Uint8Array(t.size);for(var f=0,y=p.length;f<y;f++){var m=(r=p[f]).byteLength;if(c){if(c>m){c-=m;continue}r=r.subarray(c),m-=c,c=0}s.set(r,d),d+=m}return n&&(n-=a+3),{data:s,pts:l,dts:u,len:n}}return null},e.prototype.pushAccesUnit=function(t,r){if(t.units.length&&t.frame){var i=r.samples,n=i.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||r.sps&&(n||this.contiguous)?(t.id=n,i.push(t)):void 0!==r.dropped&&r.dropped++}t.debug.length&&o.a.info(e.Tag,t.pts+"/"+t.dts+":"+t.debug)},e.prototype._parseAVCPES=function(e,t){var r,i,n=this,o=this._avcTrack,a=this._parseAVCNALu(e.data),s=this.avcSample,l=!1,u=!1,c=this.pushAccesUnit.bind(this);delete e.data,s&&a.length&&!o.audFound&&(c(s,o),this.avcSample=E(!1,e.pts,e.dts,""),s=this.avcSample),a.forEach((function(t){switch(t.type){case 1:if(l=!0,s||(n.avcSample=E(!0,e.pts,e.dts,""),s=n.avcSample),!s)return;s.frame=!0;var a=t.data;if(u&&a.length>4){var d=new $(a).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(s.key=!0)}break;case 5:if(l=!0,s||(n.avcSample=E(!0,e.pts,e.dts,""),s=n.avcSample),!s)return;s.key=!0,s.frame=!0;break;case 6:l=!0,(r=new $(n.discardEPB(t.data))).readUByte();for(var p=0,h=0,f=!1,y=0;!f&&r.bytesAvailable>1;){p=0;do{p+=y=r.readUByte()}while(255===y);h=0;do{h+=y=r.readUByte()}while(255===y);if(4===p&&0!==r.bytesAvailable){if(f=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var m=r.readUByte(),_=31&m,g=[m,r.readUByte()];for(i=0;i<_;i++)g.push(r.readUByte()),g.push(r.readUByte()),g.push(r.readUByte());n._insertSampleInOrder(n._txtTrack.samples,{type:3,pts:e.pts,bytes:g})}}else if(5===p&&0!==r.bytesAvailable){if(f=!0,h>16){var b=[],v=[];for(i=0;i<16;i++)b.push(r.readUByte().toString(16)),3!==i&&5!==i&&7!==i&&9!==i||b.push("-");for(i=16;i<h;i++)v.push(r.readUByte());n._insertSampleInOrder(n._txtTrack.samples,{pts:e.pts,payloadType:p,uuid:b.join(""),userData:String.fromCharCode.apply(null,v),userDataBytes:v})}}else if(h<r.bytesAvailable)for(i=0;i<h;i++)r.readUByte()}break;case 7:if(l=!0,u=!0,!o.sps){var S=(r=new $(t.data)).readSPS();o.width=S.width,o.height=S.height,o.pixelRatio=S.pixelRatio,o.sps=[t.data],o.duration=n._duration;var A=t.data.subarray(1,4),T="avc1.";for(i=0;i<3;i++){var w=A[i].toString(16);w.length<2&&(w="0"+w),T+=w}o.codec=T}break;case 8:l=!0,o.pps||(o.pps=[t.data]);break;case 9:l=!1,o.audFound=!0,s&&c(s,o),n.avcSample=E(!1,e.pts,e.dts,""),s=n.avcSample;break;case 12:l=!1;break;default:l=!1,s&&(s.debug+="unknown NAL "+t.type+" ")}s&&l&&s.units.push(t)})),t&&s&&(c(s,o),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts&&t.pts>=e[r-1].pts)e.push(t);else for(var i=r-1;i>=0;i--)if(t.pts&&t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},e.prototype._parseAVCNALu=function(e){var t,r,i,n=0,o=e.byteLength,a=this._avcTrack,s=a.naluState||0,l=s,u=[],c=-1,d=0;for(-1===s&&(c=0,d=31&e[0],s=0,n=1);n<o;){var p,h;t=e[n++],s?1!==s?t?1===t?(c>=0?(6===(i={data:e.subarray(c,n-s-1),type:d,state:void 0}).type&&this._emitter.emit(v.GET_SEI_INFO,new Uint8Array(i.data)),u.push(i)):(p=this._getLastNalUnit())&&(l&&n<=4-l&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-l)),(r=n-s-1)>0&&((h=new Uint8Array(p.data.byteLength+r)).set(p.data,0),h.set(e.subarray(0,r),p.data.byteLength),p.data=h)),n<o?(c=n,d=31&e[n],s=0):s=-1):s=0:s=3:s=t?0:2:s=t?0:1}return c>=0&&s>=0&&(i={data:e.subarray(c,o),type:d,state:s},u.push(i)),0===u.length&&(p=this._getLastNalUnit())&&((h=new Uint8Array(p.data.byteLength+e.byteLength)).set(p.data,0),h.set(e,p.data.byteLength),p.data=h),a.naluState=s,u},e.prototype.discardEPB=function(e){for(var t=e.byteLength,r=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return e;var n=t-r.length,o=new Uint8Array(n),a=0;for(i=0;i<n;a++,i++)a===r[0]&&(a++,r.shift()),o[i]=e[a];return o},e.prototype._parseAACPES=function(t,r){var i,n,s,u,c=this._audioTrack,d=t.data,p=t.pts,h=this.aacOverFlow,g=this.aacLastPTS;if(h){var b=new Uint8Array(h.byteLength+d.byteLength);b.set(h,0),b.set(d,h.byteLength),d=b}for(n=0,u=d.length;n<u-1&&!f(d,n);n++);if(n){var $=void 0,E=void 0;if(n<u-1?($="AAC PES did not start with ADTS header,offset:"+n,E=!1):($="no ADTS header found in AAC PES",E=!0),o.a.warn(e.Tag,"parsing error:"+$),this._emitter.emit(v.ERROR,{type:a,details:l,fatal:E,reason:$}),E)return}y(c,this._emitter,d,n,this.audioCodec),i=0;var S=m(c.samplerate);if(h&&g&&S){var A=g+S;p&&Math.abs(A-p)>1&&(o.a.log(e.Tag,"AAC: align PTS for overlapping frames by "+Math.round((A-p)/90)),p=A)}for(;n<u;)if(f(d,n)&&n+5<u&&c){var T=_(c,d,n,p,i);if(!T)break;n+=T.length,s=T.sample.pts,i++}else n++;h=n<u?d.subarray(n,u):null,this.aacOverFlow=h,this.aacLastPTS=s},e.prototype._parseMPEGPES=function(e){for(var t=e.data,r=t.length,i=0,n=0,o=e.pts;n<r;)if(b.isHeader(t,n)){var a=b.appendFrame(this._audioTrack,t,n,o,i);if(!a)break;n+=a.length,i++}else n++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e.prototype._parseMediaInfo=function(e,t){this._mediaInfo=P(Object.create(null),this._mediaInfo,{duration:Math.max(e.duration,t.duration),audioChannelCount:e.channelCount,audioCodec:e.codec,audioSampleRate:e.samplerate,fps:null,hasAudio:!!e,hasKeyframesIndex:!1,keyframesIndex:null,hasVideo:!!t,width:t.width,height:t.height,mimeType:(t.container||e.container)+'; codecs="'+t.codec+","+e.codec+'"',videoCodec:t.codec,pixelRatio:t.pixelRatio,pps:t.pps,sps:t.sps}),this._emitter.emit(v.MEDIA_INFO,this._mediaInfo)},e.prototype._createMetadata=function(e,t){var r={audiodatarate:0,audiosamplerate:e.samplerate,compatibleBrands:"isom",duration:t.duration,height:t.height,majorBrand:"isom",minorVersion:"1",width:t.width};this._emitter.emit(v.META_DATA,r)},e}(),k={forceKeyFrameOnDiscontinuity:!0,maxBufferHole:.5,maxAudioFramesDrift:1,stretchShortVideoTrack:!1},x=function(){var e=window.MediaSource||window.WebKitMediaSource;return{mp4:e.isTypeSupported("video/mp4"),mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"')}};function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var D=function(){function e(e,t,r){this.Tag="TSCodec",this.type="TSCodec",this.eventEmitter=new n.a,this._config=M(Object.create(null),k,e),this._demuxer=new L(this.eventEmitter,this._config,t,r),this.timestampBase=0}return e.prototype.appendData=function(e,t,r,i){this._demuxer.append(new Uint8Array(e),t,r,i)},e.probe=function(e){return L.probe(new Uint8Array(e))},e.prototype.on=function(e,t){this.eventEmitter.on(e,t)},e.prototype.once=function(e,t){this.eventEmitter.once(e,t)},e.prototype.off=function(e,t){this.eventEmitter.off(e,t)},e.prototype.destroy=function(){this.eventEmitter.removeAllListeners(),this._demuxer.destroy(),delete this._demuxer,delete this._config,delete this.eventEmitter},e.prototype.resetInitSegment=function(e,t,r,i){this._demuxer.resetInitSegment(e,t,r,i)},e.prototype.resetTimeStamp=function(e){this._demuxer.resetTimeStamp(e)},Object.defineProperty(e,"Events",{get:function(){return v},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(e,"typeSupportFunc",{get:function(){return x},enumerable:!1,configurable:!0}),e.prototype.seek=function(e){},e.prototype.insertDiscontinuity=function(){},e.prototype.flushStashedSamples=function(){},e.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},e.prototype.resetMediaInfo=function(){},e.prototype.parseChunks=function(e,t,r){var i=new Uint8Array(e);return this._demuxer.parseChunks(i,r),i.length},e}();t.a=D},function(e,t,r){var i,n,o,a,s;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,n=/^([^\/?#]*)([^]*)$/,o=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=s.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return r.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):t;var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=n.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var u={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(u.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var c=a.path,d=c.substring(0,c.lastIndexOf("/")+1)+o.path;u.path=s.normalizePath(d)}else u.path=a.path,o.params||(u.params=a.params,o.query||(u.query=a.query));return null===u.path&&(u.path=r.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(u)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(o,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},function(e,t,r){var i=function(){function e(){this.mimeType=null,this.duration=void 0,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return e.prototype.isComplete=function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!==this.mimeType&&void 0!==this.duration&&null!==this.metadata&&null!==this.hasKeyframesIndex&&e&&t},e.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},e.prototype.getNearestKeyframe=function(e){if(null==this.keyframesIndex)return null;var t=this.keyframesIndex,r=this._search(t.times,e);return{index:r,milliseconds:t.times[r],fileposition:t.filepositions[r]}},e.prototype._search=function(e,t){var r=0,i=e.length-1,n=0,o=0,a=i;for(t<e[0]&&(r=0,o=a+1);o<=a;){if((n=o+Math.floor((a-o)/2))===i||t>=e[n]&&t<e[n+1]){r=n;break}e[n]<t?o=n+1:a=n-1}return r},e}();t.a=i},function(e,t,r){var i=r(4),n=r.n(i),o=r(11),a=r(7),s=r(2),l=r(6),u=r(3),c=r(5);function d(e){return(d="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var p,h=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=Object(c.a)(),y=function(e){function t(t,r){var i=e.call(this,"FetchStreamLoader","flv")||this;return i.Tag="FetchStreamLoader",i.eventEmitter=new n.a,i.mediaConfig=null,i.userConfig=r,i.seekHandler=t,i.seekRange={from:0,to:0},i.requestAbort=!1,i.contentLength=null,i.receivedLength=0,i}return h(t,e),t.isSupported=function(){var e=!1;try{var t=a.a.msedge&&a.a.version.minor>=15048,r=!a.a.msedge||t;e=f.fetch&&f.ReadableStream&&r}catch(t){e=!1}return e},t.prototype.on=function(e,t){this.eventEmitter.on(e,t)},t.prototype.once=function(e,t){this.eventEmitter.once(e,t)},t.prototype.off=function(e,t){this.eventEmitter.off(e,t)},t.prototype.destroy=function(){this.abort(),this.eventEmitter.removeAllListeners(),delete this.eventEmitter,delete this.mediaConfig,delete this.seekRange,delete this.seekHandler,delete this.userConfig,this._status=s.a.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},t.prototype.startLoad=function(e,t){var r=this;this.mediaConfig=e,this.seekRange=t;var i=e.url;this.userConfig.reuseRedirectedURL&&void 0!==e.redirectedURL&&(i=e.redirectedURL);var n=this.seekHandler.getConfig(i,t),o=new f.Headers,a={method:"GET",headers:o,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade",credentials:"same-origin"};if("object"===d(n.headers)){var c=n.headers;Object.keys(c).forEach((function(e){o.append(e,c[e])}))}"object"===d(this.userConfig.headers)&&Object.keys(this.userConfig.headers).forEach((function(e){r.userConfig.headers&&o.append(e,r.userConfig.headers[e])})),!1===e.cors&&(a.mode="same-origin"),e.withCredentials&&(a.credentials="include"),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),this._status=s.a.kConnecting,f.fetch(n.url,a).then((function(e){if(r.requestAbort)return r.requestAbort=!1,void(r._status=s.a.kIdle);if(e&&e.ok&&e.status>=200&&e.status<=299){if(e.url!==n.url&&r._onURLRedirect){var t=r.seekHandler.removeURLParameters(e.url);r._onURLRedirect(t)}var i=e.headers.get("Content-Length");if(null!==i&&(r.contentLength=parseInt(i,10),0!==r.contentLength&&r._onContentLengthKnown&&r._onContentLengthKnown(r.contentLength)),null===e||null===e.body)return;return r._pump.call(r,e.body.getReader())}if(r._status=s.a.kError,!r._onError)throw new u.d("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);r._onError(l.a.HTTP_STATUS_CODE_INVALID,{code:e.status,reason:e.statusText})})).catch((function(e){if(r._status=s.a.kError,!r._onError)throw e;r._onError(l.a.EXCEPTION,{code:-1,reason:e.message})}))},t.prototype._pump=function(e){var t=this;return e.read().then((function(r){if(r.done)if(null!==t.contentLength&&t.receivedLength<t.contentLength){t._status=s.a.kError;var i=l.a.EARLY_EOF,n={code:-1,reason:"Fetch stream meet Early-EOF"};if(!t._onError)throw new u.d(n.reason);t._onError(i,n)}else t._status=s.a.kComplete,t._onComplete&&t._onComplete(t.seekRange.from,t.seekRange.from+t.receivedLength-1);else{if(!0===t.requestAbort)return t.requestAbort=!1,t._status=s.a.kComplete,e.cancel();t._status=s.a.kBuffering;var o=r.value.buffer,a=t.seekRange.from+t.receivedLength;t.receivedLength+=o.byteLength,t._onDataArrival&&t._onDataArrival(o,a,t.receivedLength),t._pump(e)}})).catch((function(e){if(11!==e.code||!a.a.msedge){t._status=s.a.kError;var r=l.a.EXCEPTION,i={code:e.code||-1,reason:e.message||"readable stream exception"};if(19!==e.code&&"network error"!==e.message||!(null===t.contentLength||null!==t.contentLength&&t.receivedLength<t.contentLength)||(r=l.a.EARLY_EOF,i={code:e.code,reason:e.message}),!t._onError){if(!i)return;throw new u.d(i.reason)}t._onError(r,i)}}))},t.prototype.abort=function(){this.requestAbort=!0},t}(o.a);t.a=y},function(e,t,r){var i=r(0),n=r(5),o=Object(n.a)(),a=o.performance,s=function(){function e(e){this.Tag="XhrLoader",this.xhrSetup=null,this.loader=null,this.requestTimeout=null,this.stats=null,this.retryTimeout=null,this.context=null,this.config=null,this.callbacks=null,this.retryDelay=0,this.context=null,e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),o.clearTimeout(this.requestTimeout),this.requestTimeout=null,o.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:a.now(),retry:0,tfirst:0,loaded:0,total:0,tload:0,aborted:!1},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e=this.context,t=new XMLHttpRequest,r=this.stats;r.tfirst=0,r.loaded=0;var i=this.xhrSetup;if(e&&this.callbacks&&this.config){try{if(i)try{i(t,e.url)}catch(r){t.open("GET",e.url,!0),i(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(r){return void this.callbacks.onError({code:t.status,text:r.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=o.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()}},e.prototype.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,n=this.stats,s=this.context,l=this.config;if(!n.aborted&&this.callbacks&&r>=2)if(o.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(a.now(),n.trequest)),4===r){var u=t.status;if(u>=200&&u<300){n.tload=Math.max(n.tfirst,a.now());var c=void 0,d=void 0;d="arraybuffer"===s.responseType?(c=t.response).byteLength:(c=t.responseText).length,n.total=d,n.loaded=d;var p={url:t.responseURL,data:c};this.callbacks.onSuccess(p,n,s,t)}else n.retry>=l.maxRetry||u>=400&&u<499?(i.a.error(this.Tag,u+" while loading "+s.url),this.callbacks.onError({code:u,text:t.statusText},s,t)):(i.a.warn(this.Tag,u+" while loading "+s.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=o.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,l.maxRetryDelay),n.retry++)}else this.requestTimeout=o.setTimeout(this.loadtimeout.bind(this),l.timeout)},e.prototype.loadtimeout=function(){this.context&&this.callbacks&&this.stats&&(i.a.warn(this.Tag,"timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null))},e.prototype.loadprogress=function(e){var t=e.currentTarget,r=this.stats;if(r&&this.callbacks&&this.context){r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var i=this.callbacks.onProgress;i&&i(r,this.context,"",t)}},e}();t.a=s},function(e,t,r){var i=function(){function e(e,t){this._startName=e,this._endName=t}return e.prototype.getConfig=function(e,t){var r=e;if(0!==t.from||-1!==t.to){var i=!0;-1===r.indexOf("?")&&(r+="?",i=!1),i&&(r+="&"),r+=this._startName+"="+t.from.toString(),-1!==t.to&&(r+="&"+this._endName+"="+t.to.toString())}return{url:r,headers:{}}},e.prototype.removeURLParameters=function(e){var t,r=e.split("?")[0],i=e.indexOf("?");-1!==i&&(t=e.substring(i+1));var n="";if(void 0!==t&&t.length>0)for(var o=t.split("&"),a=0;a<o.length;a++){var s=o[a].split("="),l=a>0;s[0]!==this._startName&&s[0]!==this._endName&&(l&&(n+="&"),n+=o[a])}return 0===n.length?r:r+"?"+n},e}();t.a=i},function(e,t,r){var i,n=r(4),o=r.n(n),a=r(21),s=r(18),l=r.n(s),u=r(0),c=function(){function e(e,t){this._uri=null,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}return Object.defineProperty(e.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=l.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!1,configurable:!0}),e}();!function(e){e.AUDIO="audio",e.VIDEO="video"}(i||(i={}));var d=function(){function e(){var e;this.Tag="Fragment",this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[i.AUDIO]=!1,e[i.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.sn=0,this.urlId=0,this.level=0}return e.prototype.setByteRange=function(e,t){var r=e.split("@",2),i=[];1===r.length?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(r[1],10),i[1]=parseInt(r[0],10)+i[0],this._byteRange=i},Object.defineProperty(e.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=l.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"byteRange",{get:function(){return this._byteRange?this._byteRange:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"decryptdata",{get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&u.a.warn(this.Tag,'missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endProgramDateTime",{get:function(){if(null===this.programDateTime)return null;if(!Number.isFinite(this.programDateTime))return null;var e=Number.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!1,configurable:!0}),e.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},e.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},e.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},e.prototype.setDecryptDataFromLevelKey=function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new c(e.baseuri,e.reluri)).method=e.method,r.iv=this.createInitializationVector(t)),r},e}(),p=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null,this.averagetargetduration=0}return Object.defineProperty(e.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!Number.isFinite(this.fragments[0].programDateTime))},enumerable:!1,configurable:!0}),e}(),h=/^(\d+)x(\d+)$/,f=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,y=function(){function e(t){var r=this;this.AUDIO="","string"==typeof t&&(t=e.parseAttrList(t)),Object.keys(t).forEach((function(e){r[e]=t[e]}))}return e.prototype.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},e.prototype.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},e.prototype.enumeratedString=function(e){return this[e]},e.prototype.decimalResolution=function(e){var t=h.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r=Object.create(null);for(f.lastIndex=0;null!==f.exec(e);){var i=f.exec(e);0===(t=i[2]).indexOf('"')&&t.lastIndexOf('"')===t.length-1&&(t=t.slice(1,-1)),r[i[1]]=t}return r},e}(),m={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},_=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,g=/#EXT-X-MEDIA:(.*)/g,b=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),v=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,$=/\.(mp4|m4s|m4v|m4a)$/i,E=function(){function e(){}return e.findGroup=function(e,t){if(!e)return null;for(var r=null,i=0;i<e.length;i++){var n=e[i];n.id===t&&(r=n)}return r},e.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return l.a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var i,n=[];function o(e,t){["video","audio"].forEach((function(r){var i=e.filter((function(e){return function(e,t){var r=m[t];return!!r&&!0===r[e.slice(0,4)]}(e,r)}));if(i.length){var n=i.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[r+"Codec"]=n.length>0?n[0]:i[0],e=e.filter((function(e){return-1===i.indexOf(e)}))}})),t.unknownCodecs=e}for(_.lastIndex=0;null!=(i=_.exec(t));){var a={},s=a.attrs=new y(i[1]);a.url=e.resolve(i[2],r);var l=s.decimalResolution("RESOLUTION");l&&(a.width=l.width,a.height=l.height),a.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),a.name=s.NAME,o([].concat((s.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=e.convertAVC1ToAVCOTI(a.videoCodec)),n.push(a)}return n},e.parseMasterPlaylistMedia=function(t,r,i,n){var o;void 0===n&&(n=[]);var a=[],s=0;for(g.lastIndex=0;null!==(o=g.exec(t));){var l=new y(o[1]);if(l.TYPE===i){var u={id:s++,groupId:l["GROUP-ID"],name:l.NAME||l.LANGUAGE,type:i,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=e.resolve(l.URI,r)),n.length){var c=e.findGroup(n,u.groupId);u.audioCodec=c?c.codec:n[0].codec}a.push(u)}}return a},e.parseLevelPlaylist=function(e,t,r,i,n){var o,a,s,l=0,h=0,f=new p(t),m=0,_=null,g=new d,E=null;for(b.lastIndex=0;null!==(a=b.exec(e));){var A=a[1];if(A){g.duration=parseFloat(A);var T=(" "+a[2]).slice(1);g.title=T||null,g.tagList.push(T?["INF",A,T]:["INF",A])}else if(a[3]){if(Number.isFinite(g.duration)){var w=l++;g.type=i,g.start=h,g.levelkey=o,g.sn=w,g.level=r,g.cc=m,g.urlId=n,g.baseurl=t,g.relurl=(" "+a[3]).slice(1),S(g,_),f.fragments.push(g),_=g,h+=g.duration,g=new d}}else if(a[4]){var I=(" "+a[4]).slice(1);_?g.setByteRange(I,_):g.setByteRange(I)}else if(a[5])g.rawProgramDateTime=(" "+a[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),null===E&&(E=f.fragments.length);else{for(a=a[0].match(v),s=1;s<a.length&&void 0===a[s];s++);var R=(" "+a[s+1]).slice(1),O=(" "+a[s+2]).slice(1);switch(a[s]){case"#":g.tagList.push(O?[R,O]:[R]);break;case"PLAYLIST-TYPE":f.type=R.toUpperCase();break;case"MEDIA-SEQUENCE":l=f.startSN=parseInt(R);break;case"TARGETDURATION":f.targetduration=parseFloat(R);break;case"VERSION":f.version=parseInt(R);break;case"EXTM3U":break;case"ENDLIST":f.live=!1;break;case"DIS":m++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":m=parseInt(R);break;case"KEY":var P=new y(R),C=P.enumeratedString("METHOD"),L=P.URI,k=P.hexadecimalInteger("IV");C&&(o=new c(t,L),L&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(C)>=0&&(o.method=C,o.baseuri=t,o.reluri=L,o.key=null,o.iv=k));break;case"START":var x=new y(R).decimalFloatingPoint("TIME-OFFSET");Number.isFinite(x)&&(f.startTimeOffset=x);break;case"MAP":var M=new y(R);g.relurl=M.URI,M.BYTERANGE&&g.setByteRange(M.BYTERANGE),g.baseurl=t,g.level=r,g.type=i,g.sn="initSegment",f.initSegment=g,(g=new d).rawProgramDateTime=f.initSegment.rawProgramDateTime;break;default:u.a.warn(this.Tag,"line parsed but not handled: "+a)}}}return(g=_)&&!g.relurl&&(f.fragments.pop(),h-=g.duration),f.totalduration=h,f.averagetargetduration=h/f.fragments.length,f.endSN=l-1,f.startCC=f.fragments[0]?f.fragments[0].cc:0,f.endCC=m,!f.initSegment&&f.fragments.length&&f.fragments.every((function(e){return $.test(e.relurl)}))&&(u.a.warn(this.Tag,"MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(g=new d).relurl=f.fragments[0].relurl,g.baseurl=t,g.level=r,g.type=i,g.sn="initSegment",f.initSegment=g,f.needSidxRanges=!0),E&&function(e,t){for(var r=e[t],i=t-1;i>=0;i--){var n=e[i];n.programDateTime=r.programDateTime-1e3*n.duration,r=n}}(f.fragments,E),f},e.Tag="M3U8Parser",e}();function S(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Number.isFinite(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var A,T,w=r(10),I=r(5),R=Object(I.a)();!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(A||(A={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(T||(T={}));var O,P=Object(I.a)();!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(O||(O={}));var C=function(){function e(e){this._emitter=new o.a,this._requestAbort=!1,this.timer=0,this.currentPlaylist=null,this.lastestM3U8Content="",this.Tag="PlayListLoader",this.dataSource=e,this.url=e.url}return e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.load=function(){var e={onSuccess:this.loadSuccess.bind(this),onError:this.loadError.bind(this),onTimeout:this.loadTimeout.bind(this)},t={url:this.url,type:O.MANIFEST,level:0,id:null,responseType:"text"};(new a.a).load(t,{maxRetry:2,maxRetryDelay:1e3,retryDelay:1e3,timeout:1e4},e)},e.prototype.stop=function(){},e.prototype.loadSuccess=function(e,t,r,i){if(void 0===i&&(i=null),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var n=e.data;this.lastestM3U8Content=n,t.tload=performance.now(),0===n.indexOf("#EXTM3U")?n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,i):this._handleMasterPlaylist(e,t,r,i):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",i)},e.prototype.abort=function(){this._requestAbort=!0,clearInterval(this.timer),this._emitter&&this._emitter.removeAllListeners(),delete this._emitter,delete this.dataSource,delete this.currentPlaylist,u.a.info(this.Tag,this.Tag+" has been abort")},e.prototype.destroy=function(){this.abort(),u.a.info(this.Tag,this.Tag+" has been destroy")},e.prototype._handleTrackOrLevelPlaylist=function(e,t,r,i){var n=this,o=r.id,a=r.level,s=r.type,l=this._getResponseUrl(e,r),u=Number.isFinite(o)?o:0,c=Number.isFinite(a)?a:u,d=this.mapContextToLevelType(r),p=E.parseLevelPlaylist(e.data,l,c,d,u);if(p.tload=t.tload,s===O.MANIFEST){var h={url:l,details:p};if(this._emitter.emit(w.a.MANIFEST_PARSED,{type:"levelPlaylist",levels:[h],audioTracks:[],url:l,stats:t,networkDetails:i}),!0===p.live&&!1===this._requestAbort){var f=function(e,t,r){var i=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),n=i/2;return e&&t.endSN===e.endSN&&(i=n),r&&(i=Math.max(n,i-(R.performance.now()-r))),Math.round(i)}(this.currentPlaylist,p,t.trequest);this.timer=P.setTimeout((function(){n.load()}),f)}this.currentPlaylist=p}},e.prototype._handleMasterPlaylist=function(e,t,r,i){var n=e.data,o=this._getResponseUrl(e,r),a=E.parseMasterPlaylist(n,o);if(a.length){var s=a.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),l=E.parseMasterPlaylistMedia(n,o,"AUDIO",s),c=E.parseMasterPlaylistMedia(n,o,"SUBTITLES");if(l.length){var d=!1;l.forEach((function(e){e.url||(d=!0)})),!1===d&&a[0].audioCodec&&!a[0].attrs.AUDIO&&(u.a.log(this.Tag,"audio codec signaled in quality level, but no embedded audio track signaled, create one"),l.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:0}))}a.sort((function(e,t){return e.bitrate-t.bitrate})),this._emitter.emit(w.a.MANIFEST_PARSED,{type:"masterPlaylist",levels:a,audioTracks:l,subtitles:c,url:o,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,r,"no level found in manifest",i)},e.prototype._handleManifestParsingError=function(e,t,r,i){this._emitter.emit(w.a.PARSE_ERROR,{url:e.url,reason:r,fatal:!0,networkDetails:i})},e.prototype._getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r},e.prototype.mapContextToLevelType=function(e){switch(e.type){case O.AUDIO_TRACK:return T.AUDIO;case O.SUBTITLE_TRACK:return T.SUBTITLE;default:return T.MAIN}},e.prototype.loadError=function(e,t,r){e.text="playlist not found",this._emitter.emit(w.a.LOADING_ERROR,{response:e,context:t,xhr:r})},e.prototype.loadTimeout=function(e,t,r){e.text="download playlist timeout",this._emitter.emit(w.a.LOADIND_TIMEOUT,{stats:e,context:t,xhr:r})},e}();t.a=C},function(e,t,r){var i=r(0),n=r(5),o=Object(n.a)(),a=function(){function e(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,o.performance&&o.performance.now?this._now=o.performance.now.bind(o.performance):this._now=Date.now}return e.prototype.reset=function(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._totalBytes=0,this._intervalBytes=0,this._lastSecondBytes=0},e.prototype.addBytes=function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())},Object.defineProperty(e.prototype,"currentKBps",{get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return 0===e&&(e=1),this._intervalBytes/e/1024},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"averageKBps",{get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024},enumerable:!1,configurable:!0}),e}(),s=r(9),l=r(1),u=r(20),c=r(11),d=r(3),p=r(2),h=r(6);function f(e){return(f="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var y,m=(y=function(e,t){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),_=function(e){function t(t,r){var i=e.call(this,"xhr-moz-chunked-loader","moz-chunked")||this;return i.Tag="MozChunkedLoader",i._needStash=!0,i._xhr=null,i._requestURL="",i._requestAbort=!1,i._contentLength=0,i._receivedLength=0,i._dataSource=null,i._range={from:0,to:-1},i._seekHandler=t,i._config=r,i}return m(t,e),t.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===e.responseType}catch(e){return i.a.warn("MozChunkedLoader",e.message),!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),e.prototype.destroy.call(this)},t.prototype.startLoad=function(e,t){this._dataSource=e,this._range=t;var r=e.url;this._config.reuseRedirectedURL&&void 0!==e.redirectedURL&&(r=e.redirectedURL);var i=this._seekHandler.getConfig(r,t);this._requestURL=i.url,this._xhr=new XMLHttpRequest;var n=this._xhr;if(n.open("GET",i.url,!0),n.responseType="moz-chunked-arraybuffer",n.onreadystatechange=this._onReadyStateChange.bind(this),n.onprogress=this._onProgress.bind(this),n.onloadend=this._onLoadEnd.bind(this),n.onerror=this._onXhrError.bind(this),e.withCredentials&&(n.withCredentials=!0),"object"===f(i.headers)){var o=i.headers;Object.keys(o).forEach((function(e){n.setRequestHeader(e,o[e])}))}if("object"===f(this._config.headers)){var a=this._config.headers;Object.keys(a).forEach((function(e){n.setRequestHeader(e,a[e])}))}this._status=p.a.kConnecting,n.send()},t.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=p.a.kComplete},t.prototype._onReadyStateChange=function(e){var t=e.target;if(2===t.readyState){if(void 0!==t.responseURL&&t.responseURL!==this._requestURL&&this._onURLRedirect){var r=this._seekHandler.removeURLParameters(t.responseURL);this._onURLRedirect(r)}if(0!==t.status&&(t.status<200||t.status>299)){if(this._status=p.a.kError,!this._onError)throw new d.d("MozChunkedLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(h.a.HTTP_STATUS_CODE_INVALID,{code:t.status,reason:t.statusText})}else this._status=p.a.kBuffering}},t.prototype._onProgress=function(e){if(this._status!==p.a.kError){null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var t=e.target.response,r=this._range.from+this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,r,this._receivedLength)}},t.prototype._onLoadEnd=function(e){!0!==this._requestAbort?this._status!==p.a.kError&&(this._status=p.a.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1},t.prototype._onXhrError=function(e){this._status=p.a.kError;var t=0,r=null;if(this._contentLength&&e.loaded<this._contentLength?(t=h.a.EARLY_EOF,r={code:-1,reason:"Moz-Chunked stream meet Early-Eof"}):(t=h.a.EXCEPTION,r={code:-1,reason:e.constructor.name+" "+e.type}),!this._onError)throw new d.d(r.reason);this._onError(t,r)},t}(c.a),g=r(4),b=r.n(g),v=Object(n.a)(),$=function(){function e(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,v.performance&&v.performance.now?this._now=v.performance.now.bind(v.performance):this._now=Date.now}return e.prototype.reset=function(){this._lastCheckpoint=0,this._firstCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0},e.prototype.addBytes=function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())},Object.defineProperty(e.prototype,"currentKBps",{get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return 0===e&&(e=1),this._intervalBytes/e/1024},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"averageKBps",{get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024},enumerable:!1,configurable:!0}),e}();function E(e){return(E="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var S,A,T=(A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),w=function(e){function t(t,r){var i=e.call(this,"xhr-range-laoder","flv")||this;return i.eventEmitter=new b.a,i.Tag="RangerLoader",i.seekHandler=t,i.userConfig=r,i._needStash=!1,i._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],i._currentChunkSizeKB=384,i._currentSpeedNormalized=0,i._zeroSpeedChunkCount=0,i._xhr=null,i._speedSampler=new $,i._requestAbort=!1,i._waitForTotalLength=!1,i._totalLengthReceived=!1,i._currentRequestURL=null,i._currentRedirectedURL=null,i._currentRequestRange=null,i._totalLength=null,i._contentLength=null,i._receivedLength=0,i._lastTimeLoaded=0,i._range=null,i.mediaConfig=null,i}return T(t,e),t.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="arraybuffer","arraybuffer"===e.responseType}catch(e){return i.a.warn("RangeLoader",e.message),!1}},t.prototype.destory=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),t.prototype.startLoad=function(e,t){this.mediaConfig=e,this._range=t,this._status=p.a.kConnecting;var r=!1;void 0!==this.mediaConfig.fileSize&&0!==this.mediaConfig.fileSize&&(r=!0,this._totalLength=this.mediaConfig.fileSize),this._totalLengthReceived||r?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this.mediaConfig,{from:0,to:-1}))},t.prototype._openSubRange=function(){if(this._range){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength,r=t+e;null!=this._contentLength&&r-this._range.from>=this._contentLength&&(r=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:r},this._internalOpen(this.mediaConfig,this._currentRequestRange)}},t.prototype._internalOpen=function(e,t){if(e&&this.mediaConfig){this._lastTimeLoaded=0;var r=e.url;this.userConfig.reuseRedirectedURL&&(this._currentRedirectedURL?r=this._currentRedirectedURL:void 0!==e.redirectedURL&&(r=e.redirectedURL));var i=this.seekHandler.getConfig(r,t);this._currentRequestURL=i.url,this._xhr=new XMLHttpRequest;var n=this._xhr;if(n.open("GET",i.url,!0),n.responseType="arraybuffer",n.onreadystatechange=this._onReadyStateChange.bind(this),n.onprogress=this._onProgress.bind(this),n.onload=this._onLoad.bind(this),n.onerror=this._onXhrError.bind(this),e.withCredentials&&(n.withCredentials=!0),"object"===E(i.headers)){var o=i.headers;Object.keys(o).forEach((function(e){n.setRequestHeader(e,o[e])}))}if("object"===E(this.userConfig.headers)){var a=this.userConfig.headers;Object.keys(a).forEach((function(e){n.setRequestHeader(e,a[e])}))}n.send()}},t.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=p.a.kComplete},t.prototype._onReadyStateChange=function(e){var t=e.target;if(2===t.readyState){if(void 0!==t.responseURL){var r=this.seekHandler.removeURLParameters(t.responseURL);t.responseURL!==this._currentRequestURL&&r!==this._currentRedirectedURL&&(this._currentRedirectedURL=r,this._onURLRedirect&&this._onURLRedirect(r))}if(t.status>=200&&t.status<=299){if(this._waitForTotalLength)return;this._status=p.a.kBuffering}else{if(this._status=p.a.kError,!this._onError)throw new d.d("RangeLoader: http code invalid, "+t.status+" "+t.statusText);this._onError(h.a.HTTP_STATUS_CODE_INVALID,{code:t.status,reason:t.statusText})}}},t.prototype._onProgress=function(e){if(this._status!==p.a.kError&&this._range){if(null===this._contentLength){var t=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,t=!0;var r=e.total;this._internalAbort(),null!=r&&0!==r&&(this._totalLength=r)}if(-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var i=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(i)}},t.prototype._onLoad=function(e){if(this._range&&e.target&&this._status!==p.a.kError)if(this._waitForTotalLength)this._waitForTotalLength=!1;else{this._lastTimeLoaded=0;var t=this._speedSampler.lastSecondKBps;if(0===t&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(t=this._speedSampler.currentKBps)),0!==t){var r=this._normalizeSpeed(t);this._currentSpeedNormalized!==r&&(this._currentSpeedNormalized=r,this._currentChunkSizeKB=r)}var i=e.target.response,n=this._range.from+this._receivedLength;this._receivedLength+=i.byteLength;var o=!1;null!==this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():o=!0,this._onDataArrival&&this._onDataArrival(i,n,this._receivedLength),o&&(this._status=p.a.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},t.prototype._onXhrError=function(e){this._status=p.a.kError;var t,r=0;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(r=h.a.EARLY_EOF,t={code:-1,reason:"RangeLoder meet Early-Eof"}):(r=h.a.EXCEPTION,t={code:-1,reason:e.constructor.name+" "+e.type}),!this._onError)throw new d.d(t.reason);this._onError(r,t)},t.prototype._normalizeSpeed=function(e){var t=this._chunkSizeKBList,r=t.length-1,i=0,n=0,o=r;if(e<t[0])return t[0];for(;n<=o;){if((i=n+Math.floor((o-n)/2))===r||e>=t[i]&&e<t[i+1])return t[i];t[i]<e?n=i+1:o=i-1}return t[0]},t.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},t.prototype.on=function(e,t){this.eventEmitter.on(e,t)},t.prototype.once=function(e,t){this.eventEmitter.once(e,t)},t.prototype.off=function(e,t){this.eventEmitter.off(e,t)},t}(c.a),I=(S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),R=Object(n.a)(),O=function(e){function t(){var t=e.call(this,"websocket-loader","flv")||this;return t._needStash=!0,t._ws=null,t._requestAbort=!1,t._receivedLength=0,t}return I(t,e),t.isSupported=function(){try{return void 0!==R.WebSocket}catch(e){return!1}},t.prototype.destroy=function(){this._ws&&this.abort(),e.prototype.destroy.call(this)},t.prototype.startLoad=function(e){try{this._ws=new R.WebSocket(e.url);var t=this._ws;if(!t)return;t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=p.a.kConnecting}catch(e){this._status=p.a.kError;var r={code:e.code,reason:e.message};if(!this._onError)throw new d.d(r.reason);this._onError(h.a.EXCEPTION,r)}},t.prototype.abort=function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=p.a.kComplete},t.prototype._onWebSocketOpen=function(){this._status=p.a.kBuffering},t.prototype._onWebSocketClose=function(){!0!==this._requestAbort?(this._status=p.a.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},t.prototype._onWebSocketMessage=function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var r=new FileReader;r.onload=function(){t._dispatchArrayBuffer(r.result)},r.readAsArrayBuffer(e.data)}else{this._status=p.a.kError;var i={code:-1,reason:"Unsupported WebSocket message type: "+e.data.constructor.name};if(!this._onError)throw new d.d(i.reason);this._onError(h.a.EXCEPTION,i)}},t.prototype._dispatchArrayBuffer=function(e){var t=e,r=this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,r,this._receivedLength)},t.prototype._onWebSocketError=function(){this._status=p.a.kError;var e={code:-1,reason:"websoket error"};if(!this._onError)throw new d.d(e.reason);this._onError(h.a.EXCEPTION,e)},t}(c.a),P=r(15),C=function(){function e(e){this._zeroStart=e||!1}return e.prototype.getConfig=function(e,t){var r=Object.create(null);if(0!==t.from||-1!==t.to){var i=void 0;i=-1!==t.to?"bytes="+t.from.toString()+"-"+t.to.toString():"bytes="+t.from.toString()+"-",r.Range=i}else this._zeroStart&&(r.Range="bytes=0-");return{url:e,headers:r}},e.prototype.removeURLParameters=function(e){return e},e}(),L=r(22),k=function(){return(k=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},x=function(){function e(e,t,r){this.Tag="IOController",this._config=t,this._extraData=r,this._stashInitialSize=393216,void 0!==t.stashInitialSize&&t.stashInitialSize>0&&(this._stashInitialSize=1024*t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,!1===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._mediaConfig=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.fileSize?e.fileSize:null,this._totalLength=this._refTotalLength,this._tsExtraData=void 0,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedChecker=new a,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._onManifestParsed=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return e.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,delete this._mediaConfig,delete this._stashBuffer,this._stashByteStart=0,this._bufferSize=0,this._stashSize=0,this._stashUsed=0,this._currentRange=null,delete this._speedChecker,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._onManifestParsed=null,this._extraData=null},e.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},e.prototype.isPaused=function(){return this._paused},Object.defineProperty(e.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extraData",{get:function(){return this._extraData},set:function(e){this._extraData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(e){this._onSeeked=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(e){this._onRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onManifestParsed",{get:function(){return this._onManifestParsed},set:function(e){this._onManifestParsed=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentURL",{get:function(){return this._mediaConfig.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRedirect",{get:function(){return null!=this._redirectedURL||void 0!==this._mediaConfig.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._mediaConfig.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentSpeed",{get:function(){return this._loader instanceof w?this._loader.currentSpeed:this._speedChecker.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),e.prototype._selectSeekHandler=function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new C(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",r=e.seekParamEnd||"bend";this._seekHandler=new L.a(t,r)}else{if("custom"!==e.seekType)throw new d.b("Invalid seekType in config: "+e.seekType);if("function"!=typeof e.CustomSeekHandler)throw new d.b("Custom seekType specified in config but invalid CustomSeekHandler!");this._seekHandler=new e.CustomSeekHandler}},e.prototype._selectLoader=function(){if("flv"===this._mediaConfig.type)if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=O;else if(u.a.isSupported())this._loaderClass=u.a;else if(_.isSupported())this._loaderClass=_;else{if(!w.isSupported())throw new d.d("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=w}else"m3u8"===this._mediaConfig.type&&(this._loaderClass=P.a)},e.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),this._bindLoaderEvents()},e.prototype._bindLoaderEvents=function(){var e=this;this._loader&&(!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this),"m3u8"===this._mediaConfig.type&&this._loader.on(l.a.MANIFEST_PARSED,(function(t){e._onManifestParsed&&e._onManifestParsed(t)})))},e.prototype.open=function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedChecker.reset(),e||(this._fullRequestFlag=!0),this._loader&&this._loader.startLoad(this._mediaConfig,k({},this._currentRange))},e.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},e.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),this._currentRange&&(0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1),this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},e.prototype.resume=function(){if(this._paused){this._paused=!1;var e=this._resumeFrom;this._resumeFrom=0,this._internalSeek(e,!0)}},e.prototype.seek=function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)},e.prototype.tsSeek=function(e){this._loader instanceof P.a&&this._loader.seek(e)},e.prototype.loadNextFrag=function(){this._loader instanceof P.a&&this._loader.loadNextFrag()},e.prototype._internalSeek=function(e,t){if(this._loader.isWorking()&&this._loader.abort(),"flv"===this._mediaConfig.type){this._flushStashBuffer(t),this._loader.destroy(),this._loader=null;var r={from:e,to:-1};this._currentRange={from:r.from,to:-1},this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.startLoad(this._mediaConfig,r)}else this._loader instanceof P.a&&(this._loader.resume(),this._loader.loadNextFrag());this._speedChecker.reset(),this._onSeeked&&this._onSeeked()},e.prototype._expandBuffer=function(e){for(var t=this._stashSize;t+1048576<e;)t*=2;if((t+=1048576)!==this._bufferSize){var r=new ArrayBuffer(t);if(this._stashUsed>0){var i=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(r,0,t).set(i,0)}this._stashBuffer=r,this._bufferSize=t}},e.prototype._normalizeSpeed=function(e){var t=this._speedNormalizeList,r=t.length-1,i=0,n=0,o=r;if(e<t[0])return t[0];for(;n<=o;){if((i=n+Math.floor((o-n)/2))===r||e>=t[i]&&e<t[i+1])return t[i];t[i]<e?n=i+1:o=i-1}},e.prototype._adjustStashSize=function(e){var t=0;(t=this._config.isLive||e<512?e:e>=512&&e<=1024?Math.floor(1.5*e):2*e)>8192&&(t=8192);var r=1024*t+1048576;this._bufferSize<r&&this._expandBuffer(r),this._stashSize=1024*t},e.prototype._dispatchChunks=function(e,t,r){return this._currentRange&&(this._currentRange.to=t+e.byteLength-1),this._onDataArrival?this._onDataArrival(e,t,r):0},e.prototype._onURLRedirect=function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)},e.prototype._onContentLengthKnown=function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)},e.prototype._onLoaderChunkArrival=function(e,t,r,i){if(!this._onDataArrival)throw new d.a("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedChecker.addBytes(new Uint8Array(e).length),this._tsExtraData=i;var n=this._speedChecker.lastSecondKBps;if(0!==n){var o=this._normalizeSpeed(n);this._speedNormalized!==o&&(this._speedNormalized=Number(o),this._adjustStashSize(o))}if("m3u8"!==this._mediaConfig.type)if(this._enableStash)if(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize)(l=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength;else if(l=new Uint8Array(this._stashBuffer,0,this._bufferSize),this._stashUsed>0){var a=this._stashBuffer.slice(0,this._stashUsed);(u=this._dispatchChunks(a,this._stashByteStart,i))<a.byteLength?u>0&&(c=new Uint8Array(a,u),l.set(c,0),this._stashUsed=c.byteLength,this._stashByteStart+=u):(this._stashUsed=0,this._stashByteStart+=u),this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),l=new Uint8Array(this._stashBuffer,0,this._bufferSize)),l.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength}else(u=this._dispatchChunks(e,t,i))<e.byteLength&&((s=e.byteLength-u)>this._bufferSize&&(this._expandBuffer(s),l=new Uint8Array(this._stashBuffer,0,this._bufferSize)),l.set(new Uint8Array(e,u),0),this._stashUsed+=s,this._stashByteStart=t+u);else if(0===this._stashUsed){var s;(u=this._dispatchChunks(e,t,i))<e.byteLength&&((s=e.byteLength-u)>this._bufferSize&&this._expandBuffer(s),(l=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e,u),0),this._stashUsed+=s,this._stashByteStart=t+u)}else{var l,u;if(this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength),(l=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength,(u=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart,i))<this._stashUsed&&u>0){var c=new Uint8Array(this._stashBuffer,u);l.set(c,0)}this._stashUsed-=u,this._stashByteStart+=u}else this._dispatchChunks(e,this._stashByteStart,this._tsExtraData)}},e.prototype._flushStashBuffer=function(e){if(this._stashUsed>0){var t=this._stashBuffer.slice(0,this._stashUsed),r=this._dispatchChunks(t,this._stashByteStart,this._tsExtraData),n=t.byteLength-r;if(r<t.byteLength){if(!e){if(r>0){var o=new Uint8Array(this._stashBuffer,0,this._bufferSize),a=new Uint8Array(t,r);o.set(a,0),this._stashUsed=a.byteLength,this._stashByteStart+=r}return 0}i.a.warn(this.Tag,n+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,n}return 0},e.prototype._onLoaderComplete=function(){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},e.prototype._onLoaderError=function(e,t){switch(i.a.error(this.Tag,"Loader error, code = "+t.code+", msg = "+t.reason),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=s.a.UNRECOVERABLE_EARLY_EOF),e){case s.a.EARLY_EOF:if(!this._config.isLive&&this._totalLength&&this._currentRange){var r=this._currentRange.to+1;return void(r<this._totalLength&&(i.a.warn(this.Tag,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(r,!1)))}e=s.a.UNRECOVERABLE_EARLY_EOF;break;case s.a.UNRECOVERABLE_EARLY_EOF:case s.a.CONNECTING_TIMEOUT:case s.a.HTTP_STATUS_CODE_INVALID:case s.a.EXCEPTION:}if(!this._onError)throw new d.d("IOException: "+t.reason);this._onError(e,t)},e}();t.a=x},function(e,t,r){function i(){var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!i}r.d(t,"a",(function(){return i}))},function(e,t,r){function i(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var i=r(r.s=ENTRY_MODULE);return i.default||i}function n(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e,t,i){var o={};o[i]=[];var a=t.toString(),s=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return o;for(var l,u=s[1],c=new RegExp("(\\\\n|\\W)"+n(u)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");l=c.exec(a);)"dll-reference"!==l[3]&&o[i].push(l[3]);for(c=new RegExp("\\("+n(u)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");l=c.exec(a);)e[l[2]]||(o[i].push(l[1]),e[l[2]]=r(l[1]).m),o[l[2]]=o[l[2]]||[],o[l[2]].push(l[4]);for(var d,p=Object.keys(o),h=0;h<p.length;h++)for(var f=0;f<o[p[h]].length;f++)d=o[p[h]][f],isNaN(1*d)||(o[p[h]][f]=1*o[p[h]][f]);return o}function a(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}e.exports=function(e,t){t=t||{};var n={main:r.m},s=t.all?{main:Object.keys(n.main)}:function(e,t){for(var r={main:[t]},i={main:[]},n={main:{}};a(r);)for(var s=Object.keys(r),l=0;l<s.length;l++){var u=s[l],c=r[u].pop();if(n[u]=n[u]||{},!n[u][c]&&e[u][c]){n[u][c]=!0,i[u]=i[u]||[],i[u].push(c);for(var d=o(e,e[u][c],u),p=Object.keys(d),h=0;h<p.length;h++)r[p[h]]=r[p[h]]||[],r[p[h]]=r[p[h]].concat(d[p[h]])}}return i}(n,e),l="";Object.keys(s).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;s[e][t];)t++;s[e].push(t),n[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s[e].map((function(t){return JSON.stringify(t)+": "+n[e][t].toString()})).join(",")+"});\n"})),l=l+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s.main.map((function(e){return JSON.stringify(e)+": "+n.main[e].toString()})).join(",")+"}))(self);";var u=new window.Blob([l],{type:"text/javascript"});if(t.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),d=new window.Worker(c);return d.objectURL=c,d}},function(e,t,r){r.r(t);var i=r(13),n=r(14),o=r(1),a=r(8);t.default=function(e){var t=null,r=function(t,r){e.postMessage({msg:o.a.WORKER_LOG,data:{type:t,msg:r}})}.bind(e);function s(t,r){var i={msg:o.a.INIT_SEGMENT,data:{type:t,data:r}},n=r.data;r.data instanceof Uint8Array&&(n=r.data.buffer),e.postMessage(i,[n])}function l(t,r){var i={msg:o.a.MEDIA_SEGMENT,data:{type:t,data:r}},n=r.data;r.data instanceof Uint8Array&&(n=r.data.buffer),e.postMessage(i,[n])}function u(){var t={msg:o.a.LOAD_COMPLETE};e.postMessage(t)}function c(){var t={msg:o.a.RECOVERED_EARLY_EOF};e.postMessage(t)}function d(t){var r={msg:o.a.MEDIA_INFO,data:t};e.postMessage(r)}function p(t){var r={msg:o.a.METADATA_ARRIVED,data:t};e.postMessage(r)}function h(t){var r={msg:o.a.SCRIPTDATA_ARRIVED,data:t};e.postMessage(r)}function f(t){var r={msg:o.a.STATISTICS_INFO,data:t};e.postMessage(r)}function y(t,r){e.postMessage({msg:o.a.IO_ERROR,data:{type:t,info:r}})}function m(t,r){e.postMessage({msg:o.a.DEMUX_ERROR,data:{type:t,info:r}})}function _(t){e.postMessage({msg:o.a.RECOMMEND_SEEKPOINT,data:t})}function g(t){e.postMessage({msg:o.a.GET_SEI_INFO,data:t})}function b(t){e.postMessage({msg:o.a.MANIFEST_PARSED,data:t})}e.addEventListener("message",(function(v){switch(v.data.cmd){case a.a.INIT:(t=new n.a(v.data.param[0],v.data.param[1],v.data.param[2],v.data.param[3])).on(o.a.IO_ERROR,y.bind(e)),t.on(o.a.DEMUX_ERROR,m.bind(e)),t.on(o.a.INIT_SEGMENT,s.bind(e)),t.on(o.a.MEDIA_SEGMENT,l.bind(e)),t.on(o.a.LOAD_COMPLETE,u.bind(e)),t.on(o.a.RECOVERED_EARLY_EOF,c.bind(e)),t.on(o.a.MEDIA_INFO,d.bind(e)),t.on(o.a.METADATA_ARRIVED,p.bind(e)),t.on(o.a.SCRIPTDATA_ARRIVED,h.bind(e)),t.on(o.a.STATISTICS_INFO,f.bind(e)),t.on(o.a.RECOMMEND_SEEKPOINT,_.bind(e)),t.on(o.a.GET_SEI_INFO,g.bind(e)),t.on(o.a.MANIFEST_PARSED,b.bind(e));break;case a.a.DESTROY:t&&(t.destroy(),t=null),e.postMessage({msg:"destroyed"});break;case a.a.START:t&&t.start();break;case a.a.STOP:t&&t.stop();break;case a.a.SEEK:t&&t.seek(v.data.param);break;case a.a.PAUSE:t&&t.pause();break;case a.a.RESUME:t&&t.resume();break;case a.a.LOG_CONFIG_CHANGE:var $=v.data.param;i.a.applyConfig($),!0===$.enableCallback?i.a.addLogListener(r):i.a.removeLogListener(r)}}))}},function(e,t,r){(function(t,r){
/*!
	         * @overview es6-promise - a tiny implementation of Promises/A+.
	         * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	         * @license   Licensed under MIT license
	         *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	         * @version   v4.2.8+1e68dce6
	         */
var i;i=function(){function e(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,o=void 0,a=void 0,s=function(e,t){f[n]=e,f[n+1]=t,2===(n+=2)&&(a?a(y):v())},l="undefined"!=typeof window?window:void 0,u=l||{},c=u.MutationObserver||u.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var e=setTimeout;return function(){return e(y,1)}}var f=new Array(1e3);function y(){for(var e=0;e<n;e+=2)(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0;n=0}var m,_,g,b,v=void 0;function $(e,t){var r=this,i=new this.constructor(A);void 0===i[S]&&x(i);var n=r._state;if(n){var o=arguments[n-1];s((function(){return L(n,i,o,r._result)}))}else P(r,i,e,t);return i}function E(e){if(e&&"object"==_typeof(e)&&e.constructor===this)return e;var t=new this(A);return w(t,e),t}d?v=function(){return t.nextTick(y)}:c?(_=0,g=new c(y),b=document.createTextNode(""),g.observe(b,{characterData:!0}),v=function(){b.data=_=++_%2}):p?((m=new MessageChannel).port1.onmessage=y,v=function(){return m.port2.postMessage(0)}):v=void 0===l?function(){try{var e=Function("return this")().require("vertx");return void 0!==(o=e.runOnLoop||e.runOnContext)?function(){o(y)}:h()}catch(e){return h()}}():h();var S=Math.random().toString(36).substring(2);function A(){}function T(t,r,i){r.constructor===t.constructor&&i===$&&r.constructor.resolve===E?function(e,t){1===t._state?R(e,t._result):2===t._state?O(e,t._result):P(t,void 0,(function(t){return w(e,t)}),(function(t){return O(e,t)}))}(t,r):void 0===i?R(t,r):e(i)?function(e,t,r){s((function(e){var i=!1,n=function(e,t,r,i){try{e.call(t,r,i)}catch(e){return e}}(r,t,(function(r){i||(i=!0,t!==r?w(e,r):R(e,r))}),(function(t){i||(i=!0,O(e,t))}),e._label);!i&&n&&(i=!0,O(e,n))}),e)}(t,r,i):R(t,r)}function w(e,t){if(e===t)O(e,new TypeError("You cannot resolve a promise with itself"));else if(n=_typeof(i=t),null===i||"object"!==n&&"function"!==n)R(e,t);else{var r=void 0;try{r=t.then}catch(t){return void O(e,t)}T(e,t,r)}var i,n}function I(e){e._onerror&&e._onerror(e._result),C(e)}function R(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length&&s(C,e))}function O(e,t){void 0===e._state&&(e._state=2,e._result=t,s(I,e))}function P(e,t,r,i){var n=e._subscribers,o=n.length;e._onerror=null,n[o]=t,n[o+1]=r,n[o+2]=i,0===o&&e._state&&s(C,e)}function C(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var i=void 0,n=void 0,o=e._result,a=0;a<t.length;a+=3)i=t[a],n=t[a+r],i?L(r,i,n,o):n(o);e._subscribers.length=0}}function L(t,r,i,n){var o=e(i),a=void 0,s=void 0,l=!0;if(o){try{a=i(n)}catch(e){l=!1,s=e}if(r===a)return void O(r,new TypeError("A promises callback cannot return that same promise."))}else a=n;void 0!==r._state||(o&&l?w(r,a):!1===l?O(r,s):1===t?R(r,a):2===t&&O(r,a))}var k=0;function x(e){e[S]=k++,e._state=void 0,e._result=void 0,e._subscribers=[]}var M=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(A),this.promise[S]||x(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&R(this.promise,this._result))):O(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;void 0===this._state&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,i=r.resolve;if(i===E){var n=void 0,o=void 0,a=!1;try{n=e.then}catch(e){a=!0,o=e}if(n===$&&void 0!==e._state)this._settledAt(e._state,t,e._result);else if("function"!=typeof n)this._remaining--,this._result[t]=e;else if(r===D){var s=new r(A);a?O(s,o):T(s,e,n),this._willSettleAt(s,t)}else this._willSettleAt(new r((function(t){return t(e)})),t)}else this._willSettleAt(i(e),t)},e.prototype._settledAt=function(e,t,r){var i=this.promise;void 0===i._state&&(this._remaining--,2===e?O(i,r):this._result[t]=r),0===this._remaining&&R(i,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;P(e,void 0,(function(e){return r._settledAt(1,t,e)}),(function(e){return r._settledAt(2,t,e)}))},e}(),D=function(){function t(e){this[S]=k++,this._result=this._state=void 0,this._subscribers=[],A!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){w(e,t)}),(function(t){O(e,t)}))}catch(t){O(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var r=this.constructor;return e(t)?this.then((function(e){return r.resolve(t()).then((function(){return e}))}),(function(e){return r.resolve(t()).then((function(){throw e}))})):this.then(t,t)},t}();return D.prototype.then=$,D.all=function(e){return new M(this,e).promise},D.race=function(e){var t=this;return i(e)?new t((function(r,i){for(var n=e.length,o=0;o<n;o++)t.resolve(e[o]).then(r,i)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},D.resolve=E,D.reject=function(e){var t=new this(A);return O(t,e),t},D._setScheduler=function(e){a=e},D._setAsap=function(e){s=e},D._asap=s,D.polyfill=function(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=D},D.Promise=D,D},e.exports=i()}).call(this,r(29),r(30))},function(e,t){var r,i,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,u=[],c=!1,d=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&h())}function h(){if(!c){var e=s(p);c=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function y(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new f(e,t)),1!==u.length||c||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=y,n.addListener=y,n.once=y,n.off=y,n.removeListener=y,n.removeAllListeners=y,n.emit=y,n.prependListener=y,n.prependOnceListener=y,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":_typeof(window))&&(r=window)}e.exports=r},function(e,t,r){r.r(t);var i=r(4),n=r.n(i),o=r(1),a=r(3),s=function(){function e(e,t){if(this.Tag="NativePlayer",this._type="NativePlayer",this._emitter=new n.a,this.Codec=null,e.segments)throw new a.b("NativePlayer("+e.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReportTimer=null,this.mediaConfig=e,this.userConfig=t,this._mediaElement=null}return e.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,delete this.mediaConfig,this._emitter.removeAllListeners(),delete this._emitter},e.prototype.on=function(e,t){var r=this;e===o.a.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){r._emitter.emit(o.a.MEDIA_INFO,r.mediaInfo)})):e===o.a.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){r._emitter.emit(o.a.STATISTICS_INFO,r.statisticsInfo)})),this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},e.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReportTimer&&(window.clearInterval(this._statisticsReportTimer),this._statisticsReportTimer=null)},e.prototype.load=function(){if(!this._mediaElement)throw new a.a("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this.mediaConfig.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReportTimer=window.setInterval(this._reportStatisticsInfo.bind(this),this.userConfig.statisticsInfoReportInterval)},e.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReportTimer&&(window.clearInterval(this._statisticsReportTimer),this._statisticsReportTimer=null)},e.prototype.play=function(){if(this._mediaElement)return this._mediaElement.play()},e.prototype.pause=function(){this._mediaElement&&this._mediaElement.pause()},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this._mediaElement?this._mediaElement.buffered:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._mediaElement?this._mediaElement.duration:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._mediaElement?this._mediaElement.volume:0},set:function(e){this._mediaElement&&(this._mediaElement.volume=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return!!this._mediaElement&&this._mediaElement.muted},set:function(e){this._mediaElement&&(this._mediaElement.muted=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaInfo",{get:function(){var e=this._mediaElement instanceof HTMLAudioElement?"audio/":"video/",t=Object.create(null);return t.mimeType=e+this.mediaConfig.type,this._mediaElement&&(t.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(t.width=this._mediaElement.videoWidth,t.height=this._mediaElement.videoHeight)),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statisticsInfo",{get:function(){var e=Object.create(null);if(e.playerType=this._type,e.url=this.mediaConfig.url,!(this._mediaElement instanceof HTMLVideoElement))return e;var t=!0,r=0,i=0;if(this._mediaElement.getVideoPlaybackQuality){var n=this._mediaElement.getVideoPlaybackQuality();r=n.totalVideoFrames,i=n.droppedVideoFrames}else void 0!==this._mediaElement.webkitDecodedFrameCount?(r=this._mediaElement.webkitDecodedFrameCount,i=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=r,e.droppedFrames=i),e},enumerable:!1,configurable:!0}),e.prototype._onvLoadedMetadata=function(){null!=this._pendingSeekTime&&this._mediaElement&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(o.a.MEDIA_INFO,this.mediaInfo)},e.prototype._reportStatisticsInfo=function(){this._emitter.emit(o.a.STATISTICS_INFO,this.statisticsInfo)},e}(),l=r(9),u=r(0),c=r(13),d=r(14),p=r(19),h=function(){var e=window.MediaSource||window.WebKitMediaSource;return e?{mp4:e.isTypeSupported("video/mp4"),mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"')}:{mp4:!1,mpeg:!1,mp3:!1}},f=r(8),y=r(26),m=h(),_={vendor:window.navigator.vendor||"",userAgent:window.navigator.userAgent},g=function(){function e(e,t){this.Tag="Transmuxer",this._emitter=new n.a;var r=y;if(t.enableWorker&&"undefined"!=typeof Worker)try{this._worker=r(27),this._workerDestroying=!1,this._worker&&this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker&&this._worker.postMessage({cmd:f.a.INIT,param:[e,t,m,_]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},c.a.registerListener(this.e.onLoggingConfigChanged),this._worker&&this._worker.postMessage({cmd:f.a.LOG_CONFIG_CHANGE,param:c.a.getConfig()})}catch(r){u.a.error(this.Tag,"Error while initialize transmuxing worker, fallback to inline transmuxing"),delete this._worker,this._controller=new d.a(e,t,m,_)}else this._controller=new d.a(e,t,m,_);if(this._controller){var i=this._controller;i.on(o.a.IO_ERROR,this._onIOError.bind(this)),i.on(o.a.DEMUX_ERROR,this._onDemuxError.bind(this)),i.on(o.a.INIT_SEGMENT,this._onInitSegment.bind(this)),i.on(o.a.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),i.on(o.a.LOAD_COMPLETE,this._onLoadingComplete.bind(this)),i.on(o.a.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),i.on(o.a.MEDIA_INFO,this._onMediaInfo.bind(this)),i.on(o.a.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),i.on(o.a.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),i.on(o.a.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),i.on(o.a.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this)),i.on(o.a.GET_SEI_INFO,this._onGetSeiInfo.bind(this)),i.on(o.a.MANIFEST_PARSED,this._onMainfestParsed.bind(this))}}return e.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:f.a.DESTROY}),c.a.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller&&this._controller.destroy(),delete this._controller),this._emitter.removeAllListeners(),delete this._emitter},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.hasWorker=function(){return null!=this._worker},e.prototype.open=function(){this._worker?this._worker.postMessage({cmd:f.a.START}):this._controller&&this._controller.start()},e.prototype.close=function(){this._worker?this._worker.postMessage({cmd:f.a.STOP}):this._controller&&this._controller.stop()},e.prototype.seek=function(e){this._worker?this._worker.postMessage({cmd:f.a.SEEK,param:e}):this._controller&&this._controller.seek(e)},e.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:f.a.PAUSE}):this._controller&&this._controller.pause()},e.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:f.a.RESUME}):this._controller&&this._controller.resume()},e.prototype._onInitSegment=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(o.a.INIT_SEGMENT,e,t)}))},e.prototype._onMediaSegment=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(o.a.MEDIA_SEGMENT,e,t)}))},e.prototype._onLoadingComplete=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(o.a.LOAD_COMPLETE)}))},e.prototype._onRecoveredEarlyEof=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(o.a.RECOVERED_EARLY_EOF)}))},e.prototype._onMediaInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(o.a.MEDIA_INFO,e)}))},e.prototype._onMetaDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(o.a.METADATA_ARRIVED,e)}))},e.prototype._onScriptDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(o.a.SCRIPTDATA_ARRIVED,e)}))},e.prototype._onStatisticsInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(o.a.STATISTICS_INFO,e)}))},e.prototype._onIOError=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(o.a.IO_ERROR,e,t)}))},e.prototype._onDemuxError=function(e,t){var r=this;Promise.resolve().then((function(){r._emitter.emit(o.a.DEMUX_ERROR,e,t)}))},e.prototype._onRecommendSeekpoint=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(o.a.RECOMMEND_SEEKPOINT,e)}))},e.prototype._onGetSeiInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(o.a.GET_SEI_INFO,e)}))},e.prototype._onLoggingConfigChanged=function(e){this._worker&&this._worker.postMessage({cmd:f.a.LOG_CONFIG_CHANGE,param:e})},e.prototype._onMainfestParsed=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(o.a.MANIFEST_PARSED,e)}))},e.prototype._onWorkerMessage=function(e){var t=e.data,r=t.data;if("destroyed"===t.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker&&this._worker.terminate(),void delete this._worker;switch(t.msg){case o.a.INIT_SEGMENT:case o.a.MEDIA_SEGMENT:this._emitter.emit(t.msg,r.type,r.data);break;case o.a.LOAD_COMPLETE:case o.a.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case o.a.MEDIA_INFO:Object.setPrototypeOf(r,p.a.prototype),this._emitter.emit(t.msg,r);break;case o.a.METADATA_ARRIVED:case o.a.SCRIPTDATA_ARRIVED:case o.a.STATISTICS_INFO:this._emitter.emit(t.msg,r);break;case o.a.IO_ERROR:case o.a.DEMUX_ERROR:this._emitter.emit(t.msg,r.type,r.info);break;case o.a.RECOMMEND_SEEKPOINT:case o.a.GET_SEI_INFO:case o.a.MANIFEST_PARSED:this._emitter.emit(t.msg,r);break;case o.a.WORKER_LOG:u.a.emitter.emit(o.a.HJ_PLAYER_LOG,r.type,r.msg)}},e}(),b=r(7),v=function(){function e(){this._list=[]}return e.prototype.clear=function(){this._list=[]},e.prototype.appendArray=function(e){var t=this._list;0!==e.length&&(t.length>0&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))},e.prototype.getLastSyncPointBeforeDts=function(e){if(0===this._list.length)return null;var t=this._list,r=0,i=t.length-1,n=0,o=0,a=i;for(e<t[0].dts&&(r=0,o=a+1);o<=a;){if((n=o+Math.floor((a-o)/2))===i||e>=t[n].dts&&e<t[n+1].dts){r=n;break}t[n].dts<e?o=n+1:a=n-1}return this._list[r]},e}(),$=function(){function e(e){this.TAG="MSEController",this._emitter=new n.a,this.on=this._emitter.on.bind(this._emitter),this.off=this._emitter.off.bind(this._emitter),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:function(){},onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSourceObjectURL=null,this._mediaSource=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new v,this._config=e,this._config.isLive&&void 0===this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0)}return e.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this._emitter.removeAllListeners(),delete this._emitter,delete this.e},e.prototype.attachMediaElement=function(e){if(this._mediaSource)throw new a.a("MediaSource has been attached to an HTMLMediaElement!");var t=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaSource=t,this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL},e.prototype.detachMediaElement=function(){var e=this;if(this._mediaSource){var t=this._mediaSource;if(Object.keys(this._sourceBuffers).forEach((function(r){var i=e._pendingSegments[r];i.splice(0,i.length),e._pendingSegments[r]=null,e._pendingRemoveRanges[r]=null,e._lastInitSegments[r]=null;var n=e._sourceBuffers[r];if(n){if("closed"!==t.readyState){try{t.removeSourceBuffer(n)}catch(t){u.a.error(e.TAG,t.message)}e.e&&(n.removeEventListener("error",e.e.onSourceBufferError),n.removeEventListener("updateend",e.e.onSourceBufferUpdateEnd))}e._mimeTypes[r]=null,e._sourceBuffers[r]=null}})),"open"===t.readyState)try{t.endOfStream()}catch(e){u.a.error(this.TAG,e.message)}this.e&&(t.removeEventListener("sourceopen",this.e.onSourceOpen),t.removeEventListener("sourceended",this.e.onSourceEnded),t.removeEventListener("sourceclose",this.e.onSourceClose)),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},e.prototype.appendInitSegment=function(e,t){if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(e),void this._pendingSegments[e.type].push(e);var r=e,i=""+r.container;r.codec&&r.codec.length>0&&(i+=";codecs="+r.codec);var n=!1;if(this._lastInitSegments[r.type]=r,i!==this._mimeTypes[r.type]){if(this._mimeTypes[r.type])u.a.info(this.TAG,"Notice: "+r.type+" mimeType changed, origin: "+this._mimeTypes[r.type]+", target: "+i);else{n=!0;try{var a=this._mediaSource.addSourceBuffer(i);this.e&&(a.addEventListener("error",this.e.onSourceBufferError),a.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)),this._sourceBuffers[r.type]=a}catch(e){return u.a.error(this.TAG,e.message),void this._emitter.emit(o.a.ERROR,{code:e.code,reason:e.message})}}this._mimeTypes[r.type]=i}t||this._pendingSegments[r.type].push(r),n||this._sourceBuffers[r.type]&&!this._sourceBuffers[r.type].updating&&this._doAppendSegments(),b.a.safari&&"audio/mpeg"===r.container&&r.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=r.mediaDuration/1e3,this._updateMediaSourceDuration())},e.prototype.appendMediaSegment=function(e){var t=e;this._pendingSegments[t.type].push(t),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var r=this._sourceBuffers[t.type];!r||r.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},e.prototype.seek=function(){var e=this;Object.keys(this._sourceBuffers).forEach((function(t){if(e._sourceBuffers[t]){var r=e._sourceBuffers[t];if("open"===e._mediaSource.readyState)try{r.abort()}catch(t){u.a.error(e.TAG,t.message)}e._idrList.clear();var i=e._pendingSegments[t];if(i.splice(0,i.length),"closed"!==e._mediaSource.readyState){for(var n=0;n<r.buffered.length;n++){var o=r.buffered.start(n),a=r.buffered.end(n);e._pendingRemoveRanges[t].push({start:o,end:a})}if(r.updating||e._doRemoveRanges(),b.a.safari){var s=e._lastInitSegments[t];s&&(e._pendingSegments[t].push(s),r.updating||e._doAppendSegments())}}}}))},e.prototype.endOfStream=function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},e.prototype.getNearestKeyframe=function(e){return this._idrList.getLastSyncPointBeforeDts(e)},e.prototype._needCleanupSourceBuffer=function(){var e=this,t=!1;if(!this._config.autoCleanupSourceBuffer)return t;var r=(this._mediaElement||{currentTime:0}).currentTime;return Object.keys(this._sourceBuffers).some((function(i){var n=e._sourceBuffers[i];if(n){var o=n.buffered;o.length>=1&&r-o.start(0)>=e._config.autoCleanupMaxBackwardDuration&&(t=!0)}return t})),t},e.prototype._doCleanupSourceBuffer=function(){var e=this,t=(this._mediaElement||{currentTime:0}).currentTime;Object.keys(this._sourceBuffers).forEach((function(r){var i=e._sourceBuffers[r];if(i){for(var n=i.buffered,o=!1,a=0;a<n.length;a++){var s=n.start(a),l=n.end(a);if(s<=t&&t<l+3){if(t-s>=e._config.autoCleanupMaxBackwardDuration){o=!0;var u=t-e._config.autoCleanupMinBackwardDuration;e._pendingRemoveRanges[r].push({start:s,end:u})}}else l<t&&(o=!0,e._pendingRemoveRanges[r].push({start:s,end:l}))}o&&!i.updating&&e._doRemoveRanges()}}))},e.prototype._updateMediaSourceDuration=function(){var e=this._sourceBuffers;if((!this._mediaElement||0!==this._mediaElement.readyState&&"open"===this._mediaSource.readyState)&&!(e.video&&e.video.updating||e.audio&&e.audio.updating)){var t=this._mediaSource.duration,r=this._pendingMediaDuration;r>0&&(Number.isNaN(t)||r>t)&&(u.a.info(this.TAG,"Update MediaSource duration from "+t+" to "+r),this._mediaSource.duration=r),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},e.prototype._doRemoveRanges=function(){var e=this;Object.keys(this._pendingRemoveRanges).forEach((function(t){if(e._sourceBuffers[t]&&!e._sourceBuffers[t].updating)for(var r=e._sourceBuffers[t],i=e._pendingRemoveRanges[t];i&&i.length&&!r.updating;){var n=i.shift();r.remove(n.start,n.end)}}))},e.prototype._doAppendSegments=function(){var e=this,t=this._pendingSegments;Object.keys(t).forEach((function(r){if(e._sourceBuffers[r]&&!e._sourceBuffers[r].updating&&t[r].length>0){var i=t[r].shift();if(i&&i.timestampOffset){var n=e._sourceBuffers[r].timestampOffset,a=i.timestampOffset/1e3;Math.abs(n-a)>.1&&(u.a.info(e.TAG,"Update MPEG audio timestampOffset from "+n+" to "+a),e._sourceBuffers[r].timestampOffset=a),delete i.timestampOffset}if(!i.data||0===i.data.byteLength)return;try{e._sourceBuffers[r].appendBuffer(i.data),e._isBufferFull=!1,"video"===r&&Object.prototype.hasOwnProperty.call(i,"info")&&e._idrList.appendArray(i.info.syncPoints)}catch(t){e._pendingSegments[r].unshift(i),22===t.code?(e._isBufferFull||e._emitter.emit(o.a.BUFFER_FULL),e._isBufferFull=!0):(u.a.error(e.TAG,t.message),e._emitter.emit(o.a.ERROR,{code:t.code,reason:t.message}))}}}))},e.prototype._onSourceOpen=function(){if(u.a.info(this.TAG,"MediaSource onSourceOpen"),this.e&&this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var e=this._pendingSourceBufferInit;e.length;){var t=e.shift();this.appendInitSegment(t,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(o.a.SOURCE_OPEN)},e.prototype._onSourceEnded=function(){u.a.info(this.TAG,"MediaSource onSourceEnded")},e.prototype._onSourceClose=function(){u.a.info(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},e.prototype._hasPendingSegments=function(){var e=this._pendingSegments;return e.video.length>0||e.audio.length>0},e.prototype._hasPendingRemoveRanges=function(){var e=this._pendingRemoveRanges;return e.video.length>0||e.audio.length>0},e.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(o.a.UPDATE_END)},e.prototype.setMediaSourceDuration=function(e){this._mediaSource.duration=e},e}(),E=function(){return(E=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},S=function(){function e(e,t){this.Tag="MSEPlayer",this._type="MSEPlayer",this._emitter=new n.a,this.userConfig=t,this.mediaConfig=e,this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},window.performance&&window.performance.now?this._now=window.performance.now.bind(window.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressCheckTimer=void 0,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var r=b.a.chrome&&(b.a.version.major<50||50===b.a.version.major&&b.a.version.build<2661);this._alwaysSeekKeyframe=!!(r||b.a.msedge||b.a.msie),this._alwaysSeekKeyframe&&(this.userConfig.accurateSeek=!1),this._manifestParsed=!1,this._startPosition=0,this._currentDetail=null}return e.prototype.destroy=function(){void 0!==this._progressCheckTimer&&(window.clearInterval(this._progressCheckTimer),this._progressCheckTimer=void 0),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._emitter&&this._emitter.removeAllListeners(),this._manifestParsed=!1,this._startPosition=0,this._currentDetail=null,this._statisticsInfo=null,this._mediaInfo=null,this._seekpointRecord=null,delete this._emitter,delete this.mediaConfig,delete this.userConfig,this._emitter=null,this.mediaConfig=null,this.userConfig=null},e.prototype.on=function(e,t){var r=this;this._emitter&&(e===o.a.MEDIA_INFO?null!==this._mediaInfo&&Promise.resolve().then((function(){r._emitter&&r._emitter.emit(o.a.MEDIA_INFO,r.mediaInfo)})):e===o.a.STATISTICS_INFO&&null!==this._statisticsInfo&&Promise.resolve().then((function(){r._emitter&&r._emitter.emit(o.a.STATISTICS_INFO,r.statisticsInfo)})),this._emitter.addListener(e,t))},e.prototype.off=function(e,t){this._emitter&&this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){var t=this;if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this.userConfig&&(this._msectl=new $(this.userConfig)),this._msectl.on(o.a.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(o.a.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(o.a.SOURCE_OPEN,(function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())})),this._msectl.on(o.a.ERROR,(function(e){t._emitter&&t._emitter.emit(o.a.ERROR,l.a.MEDIA_ERROR,l.a.MEDIA_MSE_ERROR,e)})),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},e.prototype.detachMediaElement=function(){this._mediaElement&&this.e&&(this._msectl&&this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null),this._startPosition=0},e.prototype.load=function(){var e=this;if(!this._mediaElement)throw new a.a("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new a.a("FlvPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this.userConfig.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(this._mediaElement.readyState>0&&this._setMediaCurrentTime(0),this.mediaConfig&&this.userConfig&&(this._transmuxer=new g(this.mediaConfig,this.userConfig)),this._transmuxer.on(o.a.INIT_SEGMENT,(function(t,r){e._msectl&&e._msectl.appendInitSegment(r)})),this._transmuxer.on(o.a.MEDIA_SEGMENT,(function(t,r){if(e._msectl&&e._msectl.appendMediaSegment(r),e.userConfig.lazyLoad&&!e.userConfig.isLive&&e._mediaElement){var i=e._mediaElement.currentTime;r.info&&r.info.endDts>=1e3*(i+e.userConfig.lazyLoadMaxDuration)&&void 0===e._progressCheckTimer&&(u.a.info(e.Tag,"Maximum buffering duration exceeded, suspend transmuxing task"),u.a.info(e.Tag,"start load at "+r.info.endDts),e._suspendTransmuxer())}})),this._transmuxer.on(o.a.LOAD_COMPLETE,(function(){e._msectl&&e._msectl.endOfStream(),e._emitter.emit(o.a.LOAD_COMPLETE)})),this._transmuxer.on(o.a.RECOVERED_EARLY_EOF,(function(){e._emitter.emit(o.a.RECOVERED_EARLY_EOF)})),this._transmuxer.on(o.a.IO_ERROR,(function(t,r){e._emitter.emit(o.a.ERROR,l.a.NETWORK_ERROR,t,r)})),this._transmuxer.on(o.a.DEMUX_ERROR,(function(t,r){e._emitter.emit(o.a.ERROR,l.a.MEDIA_ERROR,t,{code:-1,reason:r})})),this._transmuxer.on(o.a.MEDIA_INFO,(function(t){e._mediaInfo=t,e._emitter.emit(o.a.MEDIA_INFO,E({},t))})),this._transmuxer.on(o.a.METADATA_ARRIVED,(function(t){e._emitter.emit(o.a.METADATA_ARRIVED,t)})),this._transmuxer.on(o.a.SCRIPTDATA_ARRIVED,(function(t){e._emitter.emit(o.a.SCRIPTDATA_ARRIVED,t)})),this._transmuxer.on(o.a.STATISTICS_INFO,(function(t){e._statisticsInfo=e._fillStatisticsInfo(t),e._emitter.emit(o.a.STATISTICS_INFO,E({},e._statisticsInfo))})),this._transmuxer.on(o.a.RECOMMEND_SEEKPOINT,(function(t){e._mediaElement&&!e.userConfig.accurateSeek&&e._setMediaCurrentTime(t/1e3)})),this._transmuxer.on(o.a.GET_SEI_INFO,(function(t){e._emitter.emit(o.a.GET_SEI_INFO,t)})),this._transmuxer.on(o.a.MANIFEST_PARSED,(function(t){e._manifestParsed||(e._manifestParsed=!0,!0===t.details.live?e.setMediaSourceDuration(1/0):e.setMediaSourceDuration(t.details.totalduration)),e._emitter.emit(o.a.MANIFEST_PARSED,t),e._currentDetail=t.details})),this._transmuxer&&this._transmuxer.open()))},e.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null),this._manifestParsed=!1,this._startPosition=0,this._currentDetail=null},e.prototype.play=function(){if(this._mediaElement)return this._mediaElement.play()},e.prototype.pause=function(){this._mediaElement&&this._mediaElement.pause()},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this._mediaElement?this._mediaElement.buffered:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._mediaElement?this._mediaElement.duration:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._mediaElement?this._mediaElement.volume:0},set:function(e){this._mediaElement&&(this._mediaElement.volume=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return!!this._mediaElement&&this._mediaElement.muted},set:function(e){this._mediaElement&&(this._mediaElement.muted=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaInfo",{get:function(){return E({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statisticsInfo",{get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),E({},this._statisticsInfo)},enumerable:!1,configurable:!0}),e.prototype._fillStatisticsInfo=function(e){if(e.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return e;var t=!0,r=0,i=0;if(this._mediaElement.getVideoPlaybackQuality){var n=this._mediaElement.getVideoPlaybackQuality();r=n.totalVideoFrames,i=n.droppedVideoFrames}else void 0!==this._mediaElement.webkitDecodedFrameCount?(r=this._mediaElement.webkitDecodedFrameCount,i=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=r,e.droppedFrames=i),e},e.prototype._onmseUpdateEnd=function(){if(this.userConfig.lazyLoad&&!this.userConfig.isLive&&this._mediaElement){for(var e=this._mediaElement.buffered,t=this._mediaElement.currentTime,r=0,i=0;i<e.length;i++){var n=e.start(i),o=e.end(i);if(n<=t&&t<o){r=o;break}}r>=t+this.userConfig.lazyLoadMaxDuration&&void 0===this._progressCheckTimer&&(u.a.info(this.Tag,"Maximum buffering duration exceeded, suspend transmuxing task"),u.a.info(this.Tag,"start load at "+r),this._suspendTransmuxer())}},e.prototype._onmseBufferFull=function(){u.a.info(this.Tag,"MSE SourceBuffer is full, suspend transmuxing task"),void 0===this._progressCheckTimer&&this._suspendTransmuxer()},e.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),void 0===this._progressCheckTimer&&(this._progressCheckTimer=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},e.prototype._checkProgressAndResume=function(){if(this._mediaElement){for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,r=!1,i=0;i<t.length;i++){var n=t.start(i),o=t.end(i);if(e>=n&&e<o){e>=o-this.userConfig.lazyLoadRecoverDuration&&(r=!0);break}}r&&(window.clearInterval(this._progressCheckTimer),this._progressCheckTimer=void 0,r&&(u.a.info(this.Tag,"Continue loading from paused position"),this._transmuxer&&this._transmuxer.resume()))}},e.prototype._isTimepointBuffered=function(e){if(!this._mediaElement)return!1;for(var t=this._mediaElement.buffered,r=0;r<t.length;r++){var i=t.start(r),n=t.end(r);if(e>=i&&e<n)return!0}return!1},e.prototype._internalSeek=function(e){if(!this._mediaElement)return!1;var t=this._isTimepointBuffered(e),r=!1,i=0;if(e<1&&this._mediaElement.buffered.length>0){var n=this._mediaElement.buffered.start(0);(n<1&&e<n||b.a.safari)&&(r=!0,i=b.a.safari?.1:n)}if(r)this._setMediaCurrentTime(i);else if(t){if(this._alwaysSeekKeyframe){var o=this._msectl?this._msectl.getNearestKeyframe(Math.floor(1e3*e)):null,a=null!==o?o.dts/1e3:e;this._setMediaCurrentTime(a)}else this._setMediaCurrentTime(e);void 0!==this._progressCheckTimer&&this._checkProgressAndResume()}else void 0!==this._progressCheckTimer&&(window.clearInterval(this._progressCheckTimer),this._progressCheckTimer=void 0),this._msectl&&this._msectl.seek(),this._transmuxer&&this._transmuxer.seek(Math.floor(1e3*e)),this.userConfig.accurateSeek&&this._setMediaCurrentTime(e)},e.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord&&this._mediaElement)if(this._seekpointRecord.recordTime<=this._now()-100){var e=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(e)||(void 0!==this._progressCheckTimer&&(window.clearTimeout(this._progressCheckTimer),this._progressCheckTimer=void 0),this._msectl&&this._msectl.seek(),this._transmuxer&&this._transmuxer.seek(Math.floor(1e3*e)),this.userConfig.accurateSeek&&this._mediaElement&&this._setMediaCurrentTime(e))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},e.prototype._checkAndResumeStuckPlayback=function(e){if(!this._mediaElement)return!1;var t=this._mediaElement;if(e||!this._receivedCanPlay||t.readyState<2){var r=t.buffered;r.length>0&&t.currentTime<r.start(0)&&(u.a.warn(this.Tag,"Playback seems stuck at "+t.currentTime+", seek to "+r.start(0)),this._setMediaCurrentTime(r.start(0)),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},e.prototype._onvLoadedMetadata=function(){null!=this._pendingSeekTime&&this._mediaElement&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},e.prototype._onvSeeking=function(){if(!this._mediaElement)return!1;var e=this._mediaElement.currentTime,t=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(e<1&&t.length>0){var r=t.start(0);if(r<1&&e<r||b.a.safari)return void this._setMediaCurrentTime(b.a.safari?.1:r)}if(this._isTimepointBuffered(e)){if(this._alwaysSeekKeyframe&&this._msectl){var i=this._msectl.getNearestKeyframe(Math.floor(1e3*e));null!=i&&this._setMediaCurrentTime(i.dts/1e3)}void 0!==this._progressCheckTimer&&this._checkProgressAndResume()}else this._seekpointRecord={seekPoint:e,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}},e.prototype._onvCanPlay=function(){this._receivedCanPlay=!0,this._mediaElement&&this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},e.prototype._onvStalled=function(){this._checkAndResumeStuckPlayback(!0)},e.prototype._onvProgress=function(){this._checkAndResumeStuckPlayback()},e.prototype._setMediaCurrentTime=function(e){this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=e)},e.prototype.setMediaSourceDuration=function(e){this._msectl.setMediaSourceDuration(e)},e}(),A=r(16),T=r(17),w=function(){function e(){this.Tag="Codec",this.eventEmitter=new n.a}return e.getSupportCodec=function(e,t){return"FLV"===(e=e.toUpperCase())&&A.a.probe(t).match?A.a:"M3U8"===e&&T.a.probe(t)?T.a:null},Object.defineProperty(e,"FLVCodec",{get:function(){return A.a},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TSCodec",{get:function(){return T.a},enumerable:!1,configurable:!0}),e}(),I={FORCE_GLOBAL_TAG:!1,GLOBAL_TAG:"HJPLAYER",ENABLE_CALLBACK:!1,ENABLE_ERROR:!0,ENABLE_INFO:!1,ENABLE_WARN:!1,ENABLE_DEBUG:!1,enableWorker:!1,enableStashBuffer:!0,stashInitialSize:384,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:1e3,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,CustomSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0,tsAutoLevelChoose:!1,maxFragLookUpTolerance:.25,defaultAudioCodec:void 0},R=r(25),O=r(15),P=r(20),C=r(22),L=r(23),k=r(24),x=function(){return(x=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},M=function(){function e(e,t){if(this.Tag="HJPlayer",this.mediaConfig=e,this.userConfig=x(x({},I),t),u.a.config=this.userConfig,u.a.GLOBAL_TAG=this.userConfig.GLOBAL_TAG,!this.mediaConfig)throw new Error("mediaConfig is needed");if(!this.mediaConfig.type||"string"!=typeof this.mediaConfig.type)throw new Error("mediaConfig need correct type option");if(!this.mediaConfig.url||"string"!=typeof this.mediaConfig.url)throw new Error("mediaConfig need correct url option");switch(this.mediaConfig.type.toLowerCase()){case"mp4":return new s(this.mediaConfig,this.userConfig);case"flv":case"m3u8":return new S(this.mediaConfig,this.userConfig);default:throw new Error("unsupport media type")}}return e.isSupported=function(){return Object(R.a)()},Object.defineProperty(e,"Events",{get:function(){return o.a},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Errors",{get:function(){return l.a},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Codec",{get:function(){return w},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Logger",{get:function(){return u.a},enumerable:!1,configurable:!0}),Object.defineProperty(e,"FragmentLoader",{get:function(){return O.a},enumerable:!1,configurable:!0}),Object.defineProperty(e,"FetchSteamLoader",{get:function(){return P.a},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ParamSeekHandler",{get:function(){return C.a},enumerable:!1,configurable:!0}),Object.defineProperty(e,"PlayListLoader",{get:function(){return L.a},enumerable:!1,configurable:!0}),Object.defineProperty(e,"IOController",{get:function(){return k.a},enumerable:!1,configurable:!0}),Object.defineProperty(e,"HJPlayerDefaultConfig",{get:function(){return I},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TransmuxingController",{get:function(){return d.a},enumerable:!1,configurable:!0}),Object.defineProperty(e,"typeSupported",{get:function(){return h()},enumerable:!1,configurable:!0}),e}(),D=r(28);(function(){function e(){}return e.install=function(){e.addIsNaN(),e.addIsInfinite(),e.addPromise()},e.addIsNaN=function(){Number.isNaN=Number.isNaN||self.isNaN},e.addIsInfinite=function(){Number.isFinite=Number.isFinite||self.isFinite},e.addPromise=function(){"function"!=typeof self.Promise&&D.polyfill()},e})().install(),t.default=M}]).default;var HJPlayer=getDefaultExportFromCjs(hjplayer.exports),Player=function(){function e(e,t,r,i){void 0===e&&(e=e),void 0===t&&(t=t),void 0===r&&(r=r),void 0===i&&(i=i),this.$store=e,this.whiteboardEngine=t,this.docEngine=r,this.playbackEvent=i,this.layoutEngine=layoutEngine,this.playInfo={step:500,beginTime:null,currentWb:null,volume:0,isStartWbTask:!1,status:PlayState.NoPlay,lastAddWb:null},this.preloadCmd={whiteboard:[],stream:[],layout:[]},this.wbCmdTask=[],this.modMap={},this.mediaViewMap={}}return e.prototype.init=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,r,i;return __generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.playTask||this.playInfo.status!==PlayState.NoPlay?(i=transError(ZegoPlaybackError.ZegoPlaybackErrorOnPlaying),this.playbackEvent.actionCustomListener(ZegoEventName.error,i),[2]):(e=this.$store.metaInfo,t=Math.abs(e.start_time-e.stop_time),this.playInfo=__assign({metaInfo:{width:e.width,height:e.height,startTime:e.start_time,endTime:e.stop_time},duringTime:t,currentTime:0},this.playInfo),this.playInfo.volume=this.$store.volume,this.whiteboardEngine.zegoWhiteboard.serviceHandle.enablePlayback(),this.bindEvent(),this.initPreloadCmd(),[4,this.initTimeLine()]);case 1:return n.sent(),[3,3];case 2:return r=n.sent(),console.warn("initTimeLine",r),i=transError(ZegoPlaybackError.ZegoPlaybackInitErrorInternal),this.playbackEvent.actionCustomListener(ZegoEventName.error,i),[3,3];case 3:return[2]}}))}))},e.prototype.unInit=function(){for(var e in this.$store.playView&&(this.$store.playView.innerHTML=""),clearInterval(this.playTask),this.playTask=null,this.mediaViewMap={},this.modMap={},this.preloadCmd={},this.playInfo.status=PlayState.NoPlay,this.mediaViewMap){var t=this.mediaViewMap[e].player;t.task&&(clearInterval(t.task),t.task=null),t.unload,t.pause(),t.unload(),t.detachMediaElement(),t.destroy(),this.mediaViewMap[e].player=null,delete this.mediaViewMap[e]}if(this.whiteboardEngine.zegoWhiteboard.off("viewAdd"),this.whiteboardEngine.zegoWhiteboard.modIdMapInstance)for(var e in this.whiteboardEngine.zegoWhiteboard.modIdMapInstance)this.whiteboardEngine.zegoWhiteboard.removedModPushCallback(e);if(this.docEngine.zegoDocsService.docsviews)for(var e in this.docEngine.zegoDocsService.docsviews){this.docEngine.zegoDocsService.docsviews[e].unloadFile()}this.whiteboardEngine.zegoWhiteboard.fileInfoMap&&(this.whiteboardEngine.zegoWhiteboard.fileInfoMap={}),this.wbCmdTask.length=0},e.prototype.bindEvent=function(){var e=this;this.playbackEvent.off(LayoutEvent.whiteboardChange),this.playbackEvent.on(LayoutEvent.whiteboardChange,(function(){setTimeout((function(){e.reloadWbView()}),100)})),this.whiteboardEngine.zegoWhiteboard.off("viewAdd"),this.whiteboardEngine.zegoWhiteboard.enableHandwriting(!1)},e.prototype.compute=function(e){return{execute:this.whiteboardEngine.zegoWhiteboard.serviceHandle.execute,whiteboardView:this.whiteboardEngine.zegoWhiteboard.modIdMapInstance[e]}},e.prototype.initPreloadCmd=function(){var e=this.$store.recordInfo.whiteboardInfo.whiteboard,t=this.$store.recordInfo,r=t.layoutInfo,i=t.customInfo,n=void 0===i?[]:i,o=this.playInfo.metaInfo.startTime;this.preloadCmd.whiteboard=e.filter((function(e){return e.timestamp-o<0})),this.preloadCmd.layout=r.filter((function(e){return e.timestamp-o<=0})),this.preloadCmd.custom=n.filter((function(e){return e.timestamp-o<=0}))},e.prototype.createModCommand=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,r,i,n;return __generator(this,(function(o){switch(o.label){case 0:e=this.$store.recordInfo.whiteboardInfo.whiteboard,t=[],e.forEach((function(e){e.sub_cmd==PushCommand.SetMod&&(e.payload.action_list[0].action==ModAction.Add&&t.push(e))})),r=0,i=t.length,o.label=1;case 1:return r<i?(n=t[r],[4,this.asyncPushAddMod(n)]):[3,4];case 2:o.sent(),r++,o.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.initTimeLine=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,r,i,n,o,a,s,l,u,c,d,p,h,f,y,m,_;return __generator(this,(function(g){switch(g.label){case 0:e=new DoublyLinkedList(equalsFrame),t=this.playInfo,r=t.step,i=t.duringTime,n=t.metaInfo.startTime,o=this.$store.metaInfo.stream,a=__spreadArray([],void 0===o?[]:o),s=a.length,g.label=1;case 1:return s?(l=a[a.length-s],[4,this.getMediaMessage(l.url)]):[3,3];case 2:return u=g.sent(),c=u.SEI,d=u.info,null==c&&(p=transError(ZegoPlaybackError.ZegoPlaybackErrorNoHaveSEI),this.playbackEvent.actionCustomListener(ZegoEventName.error,p)),l.SEI=c,c&&(console.warn("---------startTime",c[0]-n),l.startPlayTime=c[0]-n,l.during=d.duration),s--,[3,1];case 3:for(a=a.filter((function(e){return!!e.SEI})),h=this.$store.recordInfo.whiteboardInfo.whiteboard,f=this.$store.recordInfo.layoutInfo,y=this.$store.recordInfo.customInfo||[],m=function(t){var i=h.findIndex((function(e){return e.timestamp>t+n})),o=h.findIndex((function(e){return e.timestamp>t+r+n})),s=h.slice(i,o),l=[],u=[],c=[];i>0&&o<0&&(s=h.slice(i)),f.forEach((function(e){e.timestamp-n>t&&e.timestamp-n<=t+r&&u.push(e)})),y.forEach((function(e){e.timestamp-n>t&&e.timestamp-n<=t+r&&c.push(e)})),a.forEach((function(e){if(e.frameTime=t,e.status!=MediaStatus.end&&(t>=e.startPlayTime&&t<e.startPlayTime+e.during&&(e.status?e.status==MediaStatus.start&&(e.status=MediaStatus.playing):e.status=MediaStatus.start,l.push(__assign({},e))),t>=e.startPlayTime+e.during)){e.status=MediaStatus.end,l.push(__assign({},e));var r=a.findIndex((function(t){return e.stream_id==t.stream_id}));a.splice(r,1)}})),l.sort((function(e,t){return e.startPlayTime-t.startPlayTime}));var d={key:t/r,value:{wbCmd:s,streamCmd:l,layoutCmd:u,customCmd:c}};e.push(d)},_=0;_<i+r;_+=r)m(_);return this.timeLine=e,[2]}}))}))},e.prototype.stopPlayTask=function(){this.playTask&&clearInterval(this.playTask),this.playTask=null},e.prototype.pushWhiteboard=function(e,t){var r=this;void 0===t&&(t=!1),console.warn("----pushWhiteboard");var i=this.layoutEngine.createView("whiteboard"),n=e.getFileInfo();if(n){var o=n.fileName,a=n.fileID,s=n.authKey,l=this.docEngine.createView(i.id,e.whiteboardID,o);t&&l.loadFile(a,s,(function(t){r.whiteboardEngine.zegoWhiteboard.attachView(e,t.viewID)}))}else t&&this.whiteboardEngine.zegoWhiteboard.attachView(e,i.id).catch((function(e){console.warn("attachView error",e)}))},e.prototype.asyncPushAddMod=function(e){var t=this;return new Promise((function(r){var i=e.payload.action_list[0];t.whiteboardEngine.zegoWhiteboard.off("viewAdd"),t.whiteboardEngine.zegoWhiteboard.on("viewAdd",(function(e){t.playInfo.currentWb=e.whiteboardID,t.pushWhiteboard(e,!0)})),t.whiteboardEngine.zegoWhiteboard.serviceHandle.bindListener("attachedView",(function(){r()})),t.compute().execute.pushAddMod(i),t.docEngine.on("onError",(function(e){r()}))}))},e.prototype.pushWbCmdHandle=function(e,t){var r=this;if(null==e?void 0:e.length){var i=e.length;console.warn("----pushWbCmdHandle",e);for(var n=function(){var n=e.length-i,a=e[n],s=null;switch(a.sub_cmd){case PushCommand.SetMod:s=function(){return __awaiter(r,void 0,void 0,(function(){var e,t,r,i,n,o,s;return __generator(this,(function(l){return e=a.payload.action_list[0],t=e.action,r=e.mod_id,(s=this.modMap)[r]||(s[r]={}),t==ModAction.Add?(this.modMap[r].addModData=a,(n=this.playbackEvent).actionCustomListener.apply(n,__spreadArray([ZegoEventName.whiteboardStreamStart],[r]))):t==ModAction.Removed?(a.reverseData=this.modMap[r].addModData,this.modMap[r].graphicList&&(a.graphicList=deepClone(this.modMap[r].graphicList)),this.layoutEngine.setShowWhiteboard(!1).setWhiteboardPosition(),(o=this.playbackEvent).actionCustomListener.apply(o,__spreadArray([ZegoEventName.whiteboardStreamStop],[r]))):t==ModAction.Modify&&(i=a.payload.action_list[0],this.updateModModify(a),this.compute().execute.pushModifyMod(deepClone(i)),this.reloadWbView()),[2]}))}))};break;case PushCommand.DrawPageGraphics:s=function(){return __awaiter(r,void 0,void 0,(function(){var e,t;return __generator(this,(function(r){return e=a.payload.mod_id,(t=this.modMap)[e]||(t[e]={}),!this.modMap[e].graphicList&&(this.modMap[e].graphicList=[]),this.updateLocalGraphic(a,e),this.compute(e).whiteboardView&&a.params&&this.compute().execute.pushDrawPageGraphicsHandle(deepClone(a.params)),[2]}))}))};break;case PushCommand.ClearPageGraphics:s=function(){var e=a.payload.mod_id;a.reverseData=null,r.modMap[e].graphicList.length=0,!t&&r.compute().execute.pushClearPageGraphicsHandle(__assign({},a.payload)),t&&r.whiteboardEngine.zegoWhiteboard.undoClearAction()}}o.wbCmdTask.push(s),i--},o=this;i;)n()}},e.prototype.updateModModify=function(e){var t=this,r=e.payload.action_list[0],i=(r=deepClone(r)).mod_id;try{for(var n in this.modMap[i]||(this.modMap[i]={}),this.modMap[i].lastModifiedData||(this.modMap[i].lastModifiedData=r),this.modMap[i].lastModifiedData=Object.assign(deepClone(this.modMap[i].lastModifiedData),r),["mod_vertical_percent","mod_horizontal_percent"].forEach((function(e){(void 0!==r[e]||r["is_modify_"+e])&&(t.modMap[i].lastModifiedData[e]=r[e]||0,r.mod_extra||(t.modMap[i].lastModifiedData.mod_extra=""))})),r)n.includes("is_modify_mod")&&(this.modMap[i].lastModifiedData[n]=!0)}catch(e){console.warn("updateModModify error",e)}},e.prototype.updateLocalGraphic=function(e,t){var r=this.modMap[t],i=this.compute().execute.parseGraphicsHandle(e.payload);try{i&&(e.params=deepClone(i))}catch(t){e.params=i}if(e.params&&e.params.whiteboardID==t){var n=deepClone(e.params),o=n.graphicList,a=n.delGraphicIdList,s=n.graphicListSeqs;r||(this.modMap[t]={}),o.map((function(e){999==e.type&&(e.type=1)})),r.graphicList||(r.graphicList=[]),e.reverseData||(e.reverseData=deepClone(r.graphicList)),o.forEach((function(e){var t=r.graphicList.find((function(t){return t.graphic_id==e.graphic_id}));if(t)for(var i in t)t[i]=e[i];else r.graphicList.push(e)})),r.graphicList=r.graphicList.filter((function(e){return!a.find((function(t){return e.graphic_id==t}))})),r.graphicListSeqs=s}},e.prototype.pushWbCommandHandle=function(e){for(var t,r=this.$store.recordInfo.layoutInfo.filter((function(e){return!!e.data.whiteboard_id})),i=function(i,o){var a=e[i];if(a.sub_cmd==PushCommand.DrawPageGraphics){var s=a.payload.mod_id;if(!r.some((function(e){return e.data.whiteboard_id==s})))return"continue";n.updateLocalGraphic(a,s)}if(a.sub_cmd==PushCommand.SetMod){var l=a.payload.action_list[0],u=l.mod_id;if((t=n.modMap)[u]||(t[u]={}),!r.some((function(e){return e.data.whiteboard_id==u})))return"continue";l.action==ModAction.Modify&&n.updateModModify(a)}if(a.sub_cmd==PushCommand.ClearPageGraphics){var c=a.payload.mod_id;if(!r.some((function(e){return e.data.whiteboard_id==c})))return"continue";n.modMap[c].graphicList&&(n.modMap[c].graphicList.length=0)}},n=this,o=0,a=e.length;o<a;o++)i(o)},e.prototype.seekWbCommandPush=function(e){var t,r,i,n,o,a,s=this;if(e){for(var l in this.modMap)if("undefined"!==l&&l==this.playInfo.currentWb){if((a=this.modMap)[l]||(a[l]={}),this.modMap[l].lastModifiedData){var u=this.modMap[l].lastModifiedData;u.mod_vertical_percent=0,u.mod_horizontal_percent=0,delete u.mod_extra,this.compute().execute.pushModifyMod(deepClone(u))}this.modMap[l].graphicList?this.modMap[l].graphicList.length=0:this.modMap[l].graphicList=[]}var c=this.preloadCmd.whiteboard;this.pushWbCommandHandle(c),this.pushWbCommandHandle(e);var d=function(e){if("undefined"==e)return{value:void 0};var a=p.compute(e).whiteboardView;a&&(null===(t=null==a?void 0:a.toolInstance)||void 0===t||t.background.clearBackgroundImageLocal(),null===(r=null==a?void 0:a.toolInstance)||void 0===r||r.clearLocalHandle());try{!(null===(i=p.modMap[e])||void 0===i?void 0:i.graphicList)&&(p.modMap[e].graphicList=[]);var l={whiteboardID:e,graphicList:deepClone((null===(n=p.modMap[e])||void 0===n?void 0:n.graphicList)||[]),delGraphicIdList:[],graphicListSeqs:deepClone((null===(o=p.modMap[e])||void 0===o?void 0:o.graphicListSeqs)||[])},u=void 0;try{u=deepClone(p.modMap[e].lastModifiedData)}catch(t){u=p.modMap[e].lastModifiedData}e==p.playInfo.currentWb&&p.compute().execute.pushModifyMod(u),console.warn("seekWbCommandPush params",l),a.toolInstance&&p.compute().execute.pushDrawPageGraphicsHandle(l),setTimeout((function(){s.updateWbBackground(e)}),200)}catch(e){var c=transError(ZegoPlaybackError.ZegoPlaybackError);p.playbackEvent.actionCustomListener(ZegoEventName.error,c)}},p=this;for(var l in this.modMap){var h=d(l);if("object"===_typeof(h))return h.value}}},e.prototype.execStreamCmdHandle=function(e,t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,(function(){var r,i,n,o,a=this;return __generator(this,(function(s){switch(s.label){case 0:r=function(r,n){var o,s,l,u,c,d,p,h,f;return __generator(this,(function(n){switch(n.label){case 0:return o=e[r],s=o.stream_id,l=o.status,u=o.startPlayTime,c=i.getStreamMediaID(s,u),l!=MediaStatus.start?[3,4]:i.mediaViewMap[c]?[3,2]:((h=i.playbackEvent).actionCustomListener.apply(h,__spreadArray([ZegoEventName.mediaStreamStart],[o.stream_id])),[4,i.startPlayMedia(o)]);case 1:return n.sent(),(d=i.mediaViewMap[c].player)&&!(null==d?void 0:d.paused)&&d.pause(),[3,3];case 2:i.updateMediaProgress(o,t),n.label=3;case 3:return[3,10];case 4:return l!=MediaStatus.end?[3,5]:(i.MediaPlayEndHandle(c),[3,10]);case 5:return l!=MediaStatus.playing?[3,10]:i.mediaViewMap[c]?[3,7]:((f=i.playbackEvent).actionCustomListener.apply(f,__spreadArray([ZegoEventName.mediaStreamStart],[o.stream_id])),[4,i.startPlayMedia(o)]);case 6:return n.sent(),[3,9];case 7:return(null==(p=document.getElementById(ZegoPrefixName.Media+"-"+c))?void 0:p.paused)?(i.mediaViewMap[c].player.pause(),p.pause(),[4,i.delayPlayMedia((function(){return a.mediaViewMap[c].player.play()}))]):[3,9];case 8:n.sent(),n.label=9;case 9:i.updateMediaProgress(o,t),n.label=10;case 10:return[2]}}))},i=this,n=0,o=e.length,s.label=1;case 1:return n<o?[5,r(n,o)]:[3,4];case 2:s.sent(),s.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.execLayoutCmdHandle=function(e){var t;return __awaiter(this,void 0,void 0,(function(){var r,i,n,o,a,s,l,u,c,d,p,h;return __generator(this,(function(f){for(r=0,i=e.length;r<i;r++)if((n=e[r]).type==ChangeType.layout)h=n.data,o=h.mix_max_resolution_stream_id,a=h.mix_mode,console.warn("mix_max_resolution_stream_id",h),this.layoutEngine.setMainMediaID(o).setMode(a).setWhiteboardPosition(),this.playbackEvent.actionCustomListener(ZegoEventName.layoutChange,a);else if(n.type==ChangeType.whiteboard&&(s=n.data,l=s.whiteboard_id,u=s.horizontal_ratio,c=s.vertical_ratio,l&&(d=this.compute(l).whiteboardView))){if(this.layoutEngine.setShowWhiteboard(!0).setMode().setWhiteboardPosition(!1),u&&c&&this.layoutEngine.calcWhiteboardSize(u,c),(p=this.docEngine.zegoDocsService.docsviews[this.playInfo.currentWb])&&p.stopPlay(0),this.pushWhiteboard(d,!0),null===(t=this.modMap[l])||void 0===t?void 0:t.lastModifiedData){h=void 0;try{h=deepClone(this.modMap[l].lastModifiedData)}catch(e){h=this.modMap[l].lastModifiedData}l==this.playInfo.currentWb&&this.compute().execute.pushModifyMod(h)}this.playInfo.currentWb=l,this.playbackEvent.actionCustomListener(ZegoEventName.whiteboardSwitch,l)}return[2]}))}))},e.prototype.execCustomCmdHandle=function(e){for(var t=0,r=e.length;t<r;t++){var i=e[t];this.playbackEvent.actionCustomListener(ZegoEventName.customCommandUpdate,i.cmd)}},e.prototype.mediaGoBackHandle=function(e){return __awaiter(this,void 0,void 0,(function(){var t,r,i,n,o,a,s=this;return __generator(this,(function(l){switch(l.label){case 0:for(t=e.element.value.streamCmd,console.warn("mediaGoBackHandle",e),r=Object.keys(this.mediaViewMap),i=function(e,i){var o=r[e];t.find((function(e){return s.getStreamMediaID(e.stream_id,e.startPlayTime)==o}))||(n.MediaPlayEndHandle(o),t=t.filter((function(e){return e.stream_id!==o})))},n=this,o=0,a=r.length;o<a;o++)i(o);return[4,this.execStreamCmdHandle(t,!0)];case 1:return l.sent(),[2]}}))}))},e.prototype.updateMediaProgress=function(e,t){if(void 0===t&&(t=!1),!t){var r=e.frameTime,i=e.stream_id,n=e.during,o=e.startPlayTime,a=e.mediaTimestamp,s=this.getStreamMediaID(i,o),l=document.getElementById(s),u=this.mediaViewMap[s].player;if(r<o||r>=n+o)this.MediaPlayEndHandle(s);else{if(!l)return;if(a){if(null==u.reloadCount&&(u.reloadCount=0),Math.abs(1e3*u.currentTime-(a-e.SEI[0]))/1e3>.5){if((a-e.SEI[0])/1e3-u.currentTime>e.during/1e3)return;console.warn("fix time by SEI",i,(a-e.SEI[0])/1e3,u.currentTime,(a-e.SEI[0])/1e3-u.currentTime,l.paused,e,u),l.paused&&(u.unload(),u.load(),u.play()),u.reloadCount||(u.reloadCount=1),((a-e.SEI[0])/1e3-u.currentTime<0||u.isWating||u.lastCurrentTime==u.currentTime)&&(u.reloadCount=u.reloadCount+1,5==u.reloadCount&&(u.unload(),u.load(),u.play(),u.reloadCount=0,u.isWating=!1)),u.lastCurrentTime,u.currentTime,u.currentTime=(a-e.SEI[0])/1e3}}else Math.abs((e.frameTime-e.startPlayTime)/1e3-u.currentTime)>5&&e.frameTime%5e3==0&&(console.warn("fix time by frameTime",Math.abs((e.frameTime-e.startPlayTime)/1e3-u.currentTime),(e.frameTime-e.startPlayTime)/1e3,u.currentTime,e,u),(l.paused||0==l.currentTime)&&(u.unload(),u.load(),u.play()),u.reloadCount||(u.reloadCount=1),((e.frameTime-e.startPlayTime)/1e3-u.currentTime<0||u.isWating||u.lastCurrentTime==u.currentTime)&&(u.reloadCount=u.reloadCount+1,5==u.reloadCount&&(u.unload(),u.load(),u.play(),u.reloadCount=0,u.isWating=!1)),u.lastCurrentTime=u.currentTime,u.currentTime=(e.frameTime-e.startPlayTime)/1e3)}}},e.prototype.seekMediaProcessByTimestamp=function(e){return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(r){return console.warn("seekMediaProcessByTimestamp",e),[2,new Promise((function(r){return __awaiter(t,void 0,void 0,(function(){var t,i,n,o,a,s;return __generator(this,(function(l){switch(l.label){case 0:for(o in t=function(t){var r,n;return __generator(this,(function(o){switch(o.label){case 0:return r=i.mediaViewMap[t].player,e-=i.mediaViewMap[t].cmd.startPlayTime,n=document.getElementById(t),r?[4,i.stepExecuteMediaCurrent(t,e/1e3)]:[3,4];case 1:return o.sent(),n.paused?[4,i.delayPlayMedia((function(){return n.play()}))]:[3,3];case 2:o.sent(),o.label=3;case 3:o.label=4;case 4:return[2]}}))},i=this,n=[],this.mediaViewMap)n.push(o);a=0,l.label=1;case 1:return a<n.length?(s=n[a],[5,t(s)]):[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return r(),[2]}}))}))}))]}))}))},e.prototype.stepExecuteMediaCurrent=function(e,t){var r=this;return new Promise((function(i){var n=r.mediaViewMap[e].player;n.task=setInterval((function(){var r=document.getElementById(e);(null==r?void 0:r.paused)&&(null==r||r.play());var o=t,a=o<n.process;console.warn("--------",o,n.process,n.currentTime,a),n&&(a?(n.currentTime=o,clearInterval(n.task),n.task=null,r.paused?(n.unload(),n.load()):i()):r.currentTime=n.process-2),o>=n.duration&&(clearInterval(n.task),n.task=null,i()),o<=0&&(clearInterval(n.task),n.task=null,i())}),100)}))},e.prototype.actionCurrentTime=function(){if(this.playInfo.currentTime/1e3%1==0){var e={second:this.playInfo.currentTime/1e3};this.playbackEvent.actionCustomListener(ZegoEventName.playingProcess,e)}},e.prototype.execFrameAction=function(e){var t=this,r=0;this.playTask||(this.playTask=setInterval((function(){return __awaiter(t,void 0,void 0,(function(){var t,i,n,o,a,s,l,u,c,d,p;return __generator(this,(function(h){switch(h.label){case 0:if(this.wbCmdTask.length||(this.playInfo.isStartWbTask=!1,r=0),e=null==e?void 0:e.next,this.playInfo.currentTime+=this.playInfo.step,this.actionCurrentTime(),t=(null==e?void 0:e.element.value)||{},i=t.wbCmd,n=void 0===i?[]:i,o=t.streamCmd,a=void 0===o?[]:o,s=t.layoutCmd,l=void 0===s?[]:s,u=t.customCmd,n=n,a=a,l=l,c=c=void 0===u?[]:u,this.pushWbCmdHandle(n),this.playInfo.isStartWbTask)return[3,5];this.playInfo.isStartWbTask=!0,h.label=1;case 1:return r<this.wbCmdTask.length?[4,(0,this.wbCmdTask[r])()]:[3,4];case 2:h.sent(),r++,h.label=3;case 3:return[3,1];case 4:this.wbCmdTask.length=0,this.playInfo.isStartWbTask=!1,h.label=5;case 5:return this.checkCurrWhiteboard(),this.execCustomCmdHandle(c),[4,this.execStreamCmdHandle(a)];case 6:return h.sent(),[4,this.execLayoutCmdHandle(l)];case 7:if(h.sent(),this.checkMediaStatus(),(this.playInfo.currentTime-this.playInfo.duringTime)/1e3>0){for(d in clearInterval(this.playTask),this.playTask=null,this.wbCmdTask.length=0,this.mediaViewMap)null==(p=this.mediaViewMap[d].player)||p.pause();this.pauseAction(!1),this.playInfo.currentTime+=this.playInfo.step,this.actionCurrentTime(),this.playbackEvent.actionCustomListener(ZegoEventName.playStateUpdate,PlayState.PlayEnded),this.playInfo.status=PlayState.PlayEnded}return[2]}}))}))}),this.playInfo.step))},e.prototype.checkCurrWhiteboard=function(){var e,t=this.compute(this.playInfo.currentWb).whiteboardView;if((null==t?void 0:t.viewInfo)&&(null===(e=this.modMap[this.playInfo.currentWb])||void 0===e?void 0:e.lastModifiedData)){var r=t.viewInfo,i=r.page,n=r.pageCount,o=0;if(o=1==r.direction?this.modMap[this.playInfo.currentWb].lastModifiedData.mod_horizontal_percent*n:this.modMap[this.playInfo.currentWb].lastModifiedData.mod_vertical_percent*n,Math.abs(i-o)>1){console.warn("fix page position");var a=deepClone(this.modMap[this.playInfo.currentWb].lastModifiedData);this.compute().execute.pushModifyMod(a)}}},e.prototype.checkMediaStatus=function(){for(var e in this.mediaViewMap){var t=document.getElementById(e),r=this.mediaViewMap[e].player;t&&t.paused&&(null==r||r.pause(),null==r||r.play())}},e.prototype.MediaPlayEndHandle=function(e,t){void 0===t&&(t=!0);var r=this.mediaViewMap[e];r&&((null==r?void 0:r.player)&&(!r.player.paused&&r.player.pause(),this.layoutEngine.removeMediaView(e),r.player.unload(),r.player.detachMediaElement(),r.player.destroy(),r.player=null,t&&this.playbackEvent.actionCustomListener(ZegoEventName.mediaStreamStop,e)),delete this.mediaViewMap[e],this.layoutEngine.setWhiteboardPosition())},e.prototype.reversePlay=function(){var e=this,t=this.timeLine.getNodeAt(this.getNodeIndex());this.playTask=null,this.playTask=setInterval((function(){return __awaiter(e,void 0,void 0,(function(){var e;return __generator(this,(function(r){return this.playInfo.currentTime-=this.playInfo.step,t=null==t?void 0:t.prev,e=[],((null==t?void 0:t.element.value.wbCmd)||[]).map((function(t){return e.unshift(t)})),e.length&&this.pushWbCmdHandle(e,!0),console.warn({currentTime:this.playInfo.currentTime/1e3}),0==this.playInfo.currentTime&&(clearInterval(this.playTask),this.playTask=null),[2]}))}))}),this.playInfo.step)},e.prototype.getNodeIndex=function(){var e=this.timeLine.count-1,t=this.playInfo.currentTime/this.playInfo.step;return t>e?e:t},e.prototype.delayPlayMedia=function(e){return new Promise((function(t){setTimeout((function(){null==e||e(),t()}),20)}))},e.prototype.preExecCmdHandle=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,r,i,n,o,a;return __generator(this,(function(s){switch(s.label){case 0:return e=this.preloadCmd,t=e.whiteboard,r=void 0===t?[]:t,i=e.layout,n=void 0===i?[]:i,o=e.customCmd,a=void 0===o?[]:o,r.length&&this.seekWbCommandPush(r),n.length?[4,this.execLayoutCmdHandle(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return(null==a?void 0:a.length)&&this.execCustomCmdHandle(a),[2]}}))}))},e.prototype.start=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,r,i,n;return __generator(this,(function(o){switch(o.label){case 0:if(this.playTask)return[2,Promise.reject({code:1,msg:"å·²ç»å¼å§æ­æ¾"})];o.label=1;case 1:return o.trys.push([1,5,,6]),console.warn("start"),[4,this.createModCommand()];case 2:return o.sent(),[4,this.preExecCmdHandle()];case 3:return o.sent(),this.playInfo.isStartPlay=!0,e=this.timeLine.getHead(),t=(null==e?void 0:e.element.value)||{},r=t.wbCmd,i=t.streamCmd,r=r,i=i,this.pushWbCmdHandle(r),[4,this.execStreamCmdHandle(i)];case 4:return o.sent(),this.execFrameAction(e),!this.playInfo.beginTime&&(this.playInfo.beginTime=(new Date).getTime()),this.playbackEvent.actionCustomListener(ZegoEventName.playStateUpdate,PlayState.Playing),this.playInfo.status=PlayState.Playing,[3,6];case 5:return n=o.sent(),console.error(n),[3,6];case 6:return[2]}}))}))},e.prototype.stop=function(){for(var e in this.stopPlayTask(),this.mediaViewMap){var t=this.mediaViewMap[e].player;!t.paused&&t.pause()}this.playbackEvent.actionCustomListener(ZegoEventName.playStateUpdate,PlayState.Pausing),this.playInfo.status=PlayState.Pausing},e.prototype.pauseAction=function(e){for(var t in void 0===e&&(e=!0),this.stopPlayTask(),this.mediaViewMap){var r=this.mediaViewMap[t].player;if(!r.paused){var i=document.getElementById(t);r.pause(),i.pause()}}e&&this.playbackEvent.actionCustomListener(ZegoEventName.playStateUpdate,PlayState.Pausing)},e.prototype.execWbTaskFunc=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<this.wbCmdTask.length?[4,(0,this.wbCmdTask[e])()]:[3,4];case 2:t.sent(),e++,t.label=3;case 3:return[3,1];case 4:return this.wbCmdTask.length=0,[2]}}))}))},e.prototype.pause=function(){var e=this.docEngine.zegoDocsService.docsviews[this.playInfo.currentWb];e&&e.stopPlay(0),this.pauseAction(),this.playInfo.status=PlayState.Pausing},e.prototype.resume=function(e){return void 0===e&&(e=!1),__awaiter(this,void 0,void 0,(function(){var t,r,i,n,o,a,s;return __generator(this,(function(l){switch(l.label){case 0:return this.playTask?[2,Promise.reject()]:e||this.playInfo.status!=PlayState.PlayEnded?[3,2]:[4,this.seekTo(0)];case 1:return l.sent(),[2];case 2:for(n in t=function(e){var t,i,n;return __generator(this,(function(o){switch(o.label){case 0:if(t=document.getElementById(e),!(i=r.mediaViewMap[e].player))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),null==t||t.pause(),null==i||i.pause(),[4,r.delayPlayMedia((function(){return null==t?void 0:t.play()}))];case 2:return o.sent(),[3,4];case 3:return n=o.sent(),console.warn("play",n),[3,4];case 4:return[2]}}))},r=this,i=[],this.mediaViewMap)i.push(n);o=0,l.label=3;case 3:return o<i.length?(a=i[o],[5,t(a)]):[3,6];case 4:l.sent(),l.label=5;case 5:return o++,[3,3];case 6:return s=this.timeLine.getNodeAt(this.getNodeIndex()),this.execFrameAction(s),this.playbackEvent.actionCustomListener(ZegoEventName.playStateUpdate,PlayState.Playing),this.playInfo.status=PlayState.Playing,[2]}}))}))},e.prototype.updateWbBackground=function(e){var t,r,i=this.compute(e).whiteboardView,n=null===(r=null===(t=this.modMap[e])||void 0===t?void 0:t.graphicList)||void 0===r?void 0:r.find((function(e){return 512==e.type}));n&&(this.whiteboardEngine.zegoWhiteboard.serviceHandle.module.setGraphicItem(n),i.toolInstance.background.remoteAddBackgroundImageGraphic(n))},e.prototype.seekTo=function(e){return __awaiter(this,void 0,void 0,(function(){var t,r,i,n,o,a,s,l,u,c,d,p,h=this;return __generator(this,(function(f){switch(f.label){case 0:return this.playInfo.status=PlayState.Playing,e=+e,this.playInfo.status==PlayState.NoPlay?(t=transError(ZegoPlaybackError.ZegoPlaybackErrorNoPlaySeek),this.playbackEvent.actionCustomListener(ZegoEventName.error,t),[2]):e>this.playInfo.duringTime||e<0?(t=transError(ZegoPlaybackError.ZegoPlaybackErrorSeek),this.playbackEvent.actionCustomListener(ZegoEventName.error,t),[2]):(this.stopPlayTask(),this.wbCmdTask.length=0,r=[],this.playInfo.isStartPlay?[3,2]:[4,this.preExecCmdHandle()]);case 1:f.sent(),f.label=2;case 2:if(i=__spreadArray([],this.$store.recordInfo.layoutInfo).reverse(),n=i.find((function(t){return t.data.whiteboard_id&&t.timestamp<=h.playInfo.metaInfo.startTime+e+h.playInfo.step})),o=i.find((function(t){return void 0!==t.data.mix_max_resolution_stream_id&&t.timestamp<=h.playInfo.metaInfo.startTime+e+h.playInfo.step})),console.warn({lastSteamLayoutCmd:o,timestamp:e,startTime:this.playInfo.metaInfo.startTime}),a=[],!(e>this.playInfo.currentTime))return[3,9];c=Math.floor((e-this.playInfo.currentTime)/this.playInfo.step)+1,s=Math.floor(e/this.playInfo.step)+1,d=this.timeLine.getNodeAt(this.getNodeIndex()),console.warn("å¿«è¿",{s:c}),f.label=3;case 3:return c?d?(l=d.element.value.streamCmd,(null==d?void 0:d.next)&&(d=d.next),l?[4,this.execStreamCmdHandle(l,!0)]:[3,5]):[3,6]:[3,7];case 4:f.sent(),f.label=5;case 5:c--,f.label=6;case 6:return[3,3];case 7:for(u=this.timeLine.getHead();s;)u&&((p=u.element.value.wbCmd)&&r.push.apply(r,p),(null==u?void 0:u.next)&&(u=u.next),s--);return[4,this.seekMediaProcessByTimestamp(e)];case 8:return f.sent(),n&&a.push(n),[3,11];case 9:for(this.layoutEngine.setMainMediaID(""),c=Math.ceil(e/this.playInfo.step)+1,d=this.timeLine.getHead();c;)d&&((p=d.element.value.wbCmd)&&r.push.apply(r,p),(null==d?void 0:d.next)&&(d=d.next),c--);return[4,this.mediaGoBackHandle(d)];case 10:f.sent(),n?a.push(n):this.layoutEngine.setShowWhiteboard(!1).setWhiteboardPosition(),f.label=11;case 11:return this.playInfo.currentTime=e,this.actionCurrentTime(),o&&a.push(o),[4,this.execLayoutCmdHandle(a)];case 12:return f.sent(),this.seekWbCommandPush(r),[4,this.resume(!0)];case 13:return f.sent(),[2]}}))}))},e.prototype.reloadWbView=function(){var e;if(this.layoutEngine.isShowWhiteboard){this.layoutEngine.calcWhiteboardSize();var t=this.compute(this.playInfo.currentWb).whiteboardView;if(t&&(null===(e=null==t?void 0:t.viewInfo)||void 0===e?void 0:e.parent))try{t.getFileInfo()?t.reloadView():t.viewInfo.parent&&t.reinitView()}catch(e){console.error("reloadWbView",e)}else;}},e.prototype.setVolume=function(){for(var e in this.playInfo.volume=this.$store.playInfo.volume,this.mediaViewMap){this.mediaViewMap[e].player.volume=this.playInfo.volume}},e.prototype.getStreamMediaID=function(e,t){return ZegoPrefixName.Media+"-"+e+"-"+parseInt(String(t))},e.prototype.startPlayMedia=function(e){var t=this;return new Promise((function(r){return __awaiter(t,void 0,void 0,(function(){var t,i,n,o,a,s,l=this;return __generator(this,(function(u){return t=e.stream_id,i=e.url,HJPlayer.isSupported()&&((n=document.createElement("video")).style.width="100%",n.style.height="100%",o=this.getStreamMediaID(t,e.startPlayTime),n.id=o,n.crossOrigin="anonymous",n.setAttribute("data-index",e.create_timestamp.toString()),this.layoutEngine.createView("media",n),(s=this.mediaViewMap)[o]||(s[o]={}),this.mediaViewMap[o].cmd=e,(a=this.mediaViewMap[o].player=new HJPlayer({type:"flv",cors:!0,url:i,isLive:!1,lazyLoad:!1},{ENABLE_ERROR:!0,lazyLoad:!1,lazyLoadRecoverDuration:5})).attachMediaElement(n),a.load(),a.volume=this.playInfo.volume,n.addEventListener("waiting",(function(){a.isWating=!0})),n.addEventListener("playing",(function(){a.isWating=!1})),n.pause(),a.pause(),a.play().then((function(){r()})),a.on(HJPlayer.Events.METADATA_ARRIVED,(function(e){console.warn("METADATA_ARRIVED",e)})),n.addEventListener("progress",(function(){n.buffered.length&&(console.warn("progress",n.buffered.length,n.buffered.end(n.buffered.length-1)),a.process=n.buffered.end(n.buffered.length-1))})),a.on(HJPlayer.Events.LOAD_COMPLETE,(function(e){console.warn("LOAD_COMPLETE",e)})),a.on(HJPlayer.Events.ERROR,(function(e){a.unload(),a.load(),console.warn("ERROR",e)})),a.on(HJPlayer.Events.GET_SEI_INFO,(function(e){var r,i;try{if(e.sei&&(null===(r=l.mediaViewMap)||void 0===r?void 0:r[o])){var n=utf8ByteToTimestamp(e.sei),a=l.mediaViewMap[o].cmd,s=a.SEI,u=a.startPlayTime,c=Math.round((n-s[0]+u)/l.playInfo.step),d=l.timeLine.getElementAt(c);if(null==d?void 0:d.value.streamCmd){var p=null===(i=null==d?void 0:d.value)||void 0===i?void 0:i.streamCmd.find((function(e){return e.stream_id==t}));p&&(p.mediaTimestamp=n)}}}catch(e){console.warn("GET_SEI_INFO error",e)}}))),[2]}))}))}))},e.prototype.getMediaMessage=function(e){var t=this;return new Promise((function(r){return __awaiter(t,void 0,void 0,(function(){var t,i,n,o,a,s,l,u=this;return __generator(this,(function(c){switch(c.label){case 0:if(!HJPlayer.isSupported())return[3,5];(t=document.createElement("video")).crossOrigin="anonymous",(i=new HJPlayer({type:"flv",cors:!0,url:e,isLive:!1})).attachMediaElement(t),i.load(),i.pause(),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,i.play()];case 2:return c.sent(),[3,4];case 3:return c.sent(),n=transError(ZegoPlaybackError.ZegoPlaybackErrorLoaded),this.playbackEvent.actionCustomListener(ZegoEventName.error,n),[3,4];case 4:i.volume=0,a=[],i.on(HJPlayer.Events.GET_SEI_INFO,(function(e){var t=e.sei,r=e.tagPosition;console.warn("------_totalLength",i._transmuxer._controller._ioctl._totalLength,r);var n=r/i._transmuxer._controller._ioctl._totalLength,o=utf8ByteToTimestamp(t);o<u.playInfo.metaInfo.endTime&&o>=u.playInfo.metaInfo.startTime&&(a.length||a.push({s:o,percent:n}))})),s=function(){i&&(i.unload,!i.paused&&i.pause(),i.unload(),i.detachMediaElement(),i.destroy(),i=null,t=null,o=null,l=0),o&&clearInterval(o),o=null},l=0,o=setInterval((function(){if(1==a.length&&(null==i?void 0:i.mediaInfo.duration)){var t=i.mediaInfo.duration*a[0].percent.toFixed(2);console.warn("video----",e,{SEI:a,tagPosition:t}),r({SEI:[a[0].s-t],info:__assign({},i.mediaInfo)}),s()}50==(l+=1)&&(r({SEI:null,info:null}),s())}),100),c.label=5;case 5:return[2]}}))}))}))},e}(),$$2=_export,global$1=global$E;$$2({global:!0},{globalThis:global$1});var createTypedArrayConstructor$1=typedArrayConstructor.exports;createTypedArrayConstructor$1("Float32",(function(e){return function(t,r,i){return e(this,t,r,i)}}));var createTypedArrayConstructor=typedArrayConstructor.exports;createTypedArrayConstructor("Float64",(function(e){return function(t,r,i){return e(this,t,r,i)}}));var fails$1=fails$z,freezing=!fails$1((function(){return Object.isExtensible(Object.preventExtensions({}))})),internalMetadata={exports:{}},hiddenKeys=hiddenKeys$6,isObject$2=isObject$l,has=has$h,defineProperty=objectDefineProperty.f,uid=uid$5,FREEZING$1=freezing,METADATA=uid("meta"),id=0,isExtensible=Object.isExtensible||function(){return!0},setMetadata=function(e){defineProperty(e,METADATA,{value:{objectID:"O"+ ++id,weakData:{}}})},fastKey=function(e,t){if(!isObject$2(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!has(e,METADATA)){if(!isExtensible(e))return"F";if(!t)return"E";setMetadata(e)}return e[METADATA].objectID},getWeakData=function(e,t){if(!has(e,METADATA)){if(!isExtensible(e))return!0;if(!t)return!1;setMetadata(e)}return e[METADATA].weakData},onFreeze$1=function(e){return FREEZING$1&&meta.REQUIRED&&isExtensible(e)&&!has(e,METADATA)&&setMetadata(e),e},meta=internalMetadata.exports={REQUIRED:!1,fastKey:fastKey,getWeakData:getWeakData,onFreeze:onFreeze$1};hiddenKeys[METADATA]=!0;var $$1=_export,FREEZING=freezing,fails=fails$z,isObject$1=isObject$l,onFreeze=internalMetadata.exports.onFreeze,$freeze=Object.freeze,FAILS_ON_PRIMITIVES=fails((function(){$freeze(1)}));$$1({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES,sham:!FREEZING},{freeze:function(e){return $freeze&&isObject$1(e)?$freeze(onFreeze(e)):e}});var isObject=isObject$l,floor=Math.floor,isInteger$1=function(e){return!isObject(e)&&isFinite(e)&&floor(e)===e},$=_export,isInteger=isInteger$1;$({target:"Number",stat:!0},{isInteger:isInteger});var TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS=typedArrayConstructorsRequireWrappers,exportTypedArrayStaticMethod=arrayBufferViewCore.exportTypedArrayStaticMethod,typedArrayFrom=typedArrayFrom$2;exportTypedArrayStaticMethod("from",typedArrayFrom,TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS);var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),i=0,n=2,o=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise((function(n,a){r[i]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}};try{e.apply(t||null,r)}catch(e){o&&(o=!1,a(e))}}))}var base64$1={};!function(e){var t=base64$1;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var r=new Array(64),i=new Array(123),n=0;n<64;)i[r[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;t.encode=function(e,t,i){for(var n,o=null,a=[],s=0,l=0;t<i;){var u=e[t++];switch(l){case 0:a[s++]=r[u>>2],n=(3&u)<<4,l=1;break;case 1:a[s++]=r[n|u>>4],n=(15&u)<<2,l=2;break;case 2:a[s++]=r[n|u>>6],a[s++]=r[63&u],l=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return l&&(a[s++]=r[n],a[s++]=61,1===l&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var o="invalid encoding";t.decode=function(e,t,r){for(var n,a=r,s=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&s>1)break;if(void 0===(u=i[u]))throw Error(o);switch(s){case 0:n=u,s=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,s=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,s=3;break;case 3:t[r++]=(3&n)<<6|u,s=0}}if(1===s)throw Error(o);return r-a},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}();var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],i=0;i<r.length;)r[i].fn===t?r.splice(i,1):++i;return this},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],i=1;i<arguments.length;)r.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,r)}return this};var _float=factory(factory);function factory(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),i=128===r[3];function n(e,i,n){t[0]=e,i[n]=r[0],i[n+1]=r[1],i[n+2]=r[2],i[n+3]=r[3]}function o(e,i,n){t[0]=e,i[n]=r[3],i[n+1]=r[2],i[n+2]=r[1],i[n+3]=r[0]}function a(e,i){return r[0]=e[i],r[1]=e[i+1],r[2]=e[i+2],r[3]=e[i+3],t[0]}function s(e,i){return r[3]=e[i],r[2]=e[i+1],r[1]=e[i+2],r[0]=e[i+3],t[0]}e.writeFloatLE=i?n:o,e.writeFloatBE=i?o:n,e.readFloatLE=i?a:s,e.readFloatBE=i?s:a}():function(){function t(e,t,r,i){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,r,i);else if(isNaN(t))e(2143289344,r,i);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,r,i);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,r,i);else{var o=Math.floor(Math.log(t)/Math.LN2);e((n<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,i)}}function r(e,t,r){var i=e(t,r),n=2*(i>>31)+1,o=i>>>23&255,a=8388607&i;return 255===o?a?NaN:n*(1/0):0===o?1401298464324817e-60*n*a:n*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),i=128===r[7];function n(e,i,n){t[0]=e,i[n]=r[0],i[n+1]=r[1],i[n+2]=r[2],i[n+3]=r[3],i[n+4]=r[4],i[n+5]=r[5],i[n+6]=r[6],i[n+7]=r[7]}function o(e,i,n){t[0]=e,i[n]=r[7],i[n+1]=r[6],i[n+2]=r[5],i[n+3]=r[4],i[n+4]=r[3],i[n+5]=r[2],i[n+6]=r[1],i[n+7]=r[0]}function a(e,i){return r[0]=e[i],r[1]=e[i+1],r[2]=e[i+2],r[3]=e[i+3],r[4]=e[i+4],r[5]=e[i+5],r[6]=e[i+6],r[7]=e[i+7],t[0]}function s(e,i){return r[7]=e[i],r[6]=e[i+1],r[5]=e[i+2],r[4]=e[i+3],r[3]=e[i+4],r[2]=e[i+5],r[1]=e[i+6],r[0]=e[i+7],t[0]}e.writeDoubleLE=i?n:o,e.writeDoubleBE=i?o:n,e.readDoubleLE=i?a:s,e.readDoubleBE=i?s:a}():function(){function t(e,t,r,i,n,o){var a=i<0?1:0;if(a&&(i=-i),0===i)e(0,n,o+t),e(1/i>0?0:2147483648,n,o+r);else if(isNaN(i))e(0,n,o+t),e(2146959360,n,o+r);else if(i>17976931348623157e292)e(0,n,o+t),e((a<<31|2146435072)>>>0,n,o+r);else{var s;if(i<22250738585072014e-324)e((s=i/5e-324)>>>0,n,o+t),e((a<<31|s/4294967296)>>>0,n,o+r);else{var l=Math.floor(Math.log(i)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(s=i*Math.pow(2,-l))>>>0,n,o+t),e((a<<31|l+1023<<20|1048576*s&1048575)>>>0,n,o+r)}}}function r(e,t,r,i,n){var o=e(i,n+t),a=e(i,n+r),s=2*(a>>31)+1,l=a>>>20&2047,u=4294967296*(1048575&a)+o;return 2047===l?u?NaN:s*(1/0):0===l?5e-324*s*u:s*Math.pow(2,l-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0),e.readDoubleLE=r.bind(null,readUintLE,0,4),e.readDoubleBE=r.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8$2={},t;t=utf8$2,t.length=function(e){for(var t=0,r=0,i=0;i<e.length;++i)(r=e.charCodeAt(i))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},t.read=function(e,t,r){if(r-t<1)return"";for(var i,n=null,o=[],a=0;t<r;)(i=e[t++])<128?o[a++]=i:i>191&&i<224?o[a++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(i>>10),o[a++]=56320+(1023&i)):o[a++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,o)),a=0);return n?(a&&n.push(String.fromCharCode.apply(String,o.slice(0,a))),n.join("")):String.fromCharCode.apply(String,o.slice(0,a))},t.write=function(e,t,r){for(var i,n,o=r,a=0;a<e.length;++a)(i=e.charCodeAt(a))<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):55296==(64512&i)&&56320==(64512&(n=e.charCodeAt(a+1)))?(i=65536+((1023&i)<<10)+(1023&n),++a,t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128);return r-o};var pool_1=pool;function pool(e,t,r){var i=r||8192,n=i>>>1,o=null,a=i;return function(r){if(r<1||r>n)return e(r);a+r>i&&(o=e(i),a=0);var s=t.call(o,a,a+=r);return 7&a&&(a=1+(7|a)),s}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var r=e>>>0,i=(e-r)/4294967296>>>0;return t&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new LongBits$2(r,i)},LongBits$2.from=function(e){if("number"==typeof e)return LongBits$2.fromNumber(e);if(util$5.isString(e)){if(!util$5.Long)return LongBits$2.fromNumber(parseInt(e,10));e=util$5.Long.fromString(e)}return e.low||e.high?new LongBits$2(e.low>>>0,e.high>>>0):zero},LongBits$2.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},LongBits$2.prototype.toLong=function(e){return util$5.Long?new util$5.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function(e){return e===zeroHash?zero:new LongBits$2((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits$2.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits$2.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits$2.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits$2.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10},function(e){var t=minimal$1;function r(e,t,r){for(var i=Object.keys(t),n=0;n<i.length;++n)void 0!==e[i[n]]&&r||(e[i[n]]=t[i[n]]);return e}function i(e){function t(e,i){if(!(this instanceof t))return new t(e,i);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&r(this,i)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}t.asPromise=aspromise,t.base64=base64$1,t.EventEmitter=eventemitter,t.float=_float,t.inquire=inquire_1,t.utf8=utf8$2,t.pool=pool_1,t.LongBits=longbits,t.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),t.global=t.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"==_typeof(e)},t.isset=t.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=_typeof(r)||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,r){var i=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(i.lo,i.hi,r):i.toNumber(Boolean(r))},t.merge=r,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=i,t.ProtocolError=i("ProtocolError"),t.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},t.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}}();var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};function writeByte(e,t,r){t[r]=255&e}function writeVarint32(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function writeFixed32(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer$1.create=create$1(),Writer$1.alloc=function(e){return new util$4.Array(e)},util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray)),Writer$1.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Op(e,t,r),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer$1.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer$1.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer$1.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer$1.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer$1.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function(e){return this._push(util$4.float.writeFloatLE,4,e)},Writer$1.prototype.double=function(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var i=0;i<e.length;++i)t[r+i]=e[i]};Writer$1.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(e)){var r=Writer$1.alloc(t=base64.length(e));base64.decode(e,r,0),e=r}return this.uint32(t)._push(writeBytes,t,e)},Writer$1.prototype.string=function(e){var t=utf8$1.length(e);return t?this.uint32(t)._push(utf8$1.write,t,e):this._push(writeByte,1,0)},Writer$1.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer$1.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},Writer$1.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}function writeStringBuffer(e,t,r){e.length<40?util$3.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&"set"===util$3.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var i=0;i<e.length;)t[r++]=e[i++]}},BufferWriter.prototype.bytes=function(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this},BufferWriter.prototype.string=function(e){var t=util$3.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this},BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create=function(){return util$2.Buffer?function(e){return(Reader$1.create=function(e){return util$2.Buffer.isBuffer(e)?new BufferReader$1(e):create_array(e)})(e)}:create_array},value;function readLongVarint(){var e=new LongBits(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.create=create(),Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice,Reader$1.prototype.uint32=(value=4294967295,function(){if(value=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value}),Reader$1.prototype.int32=function(){return 0|this.uint32()},Reader$1.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader$1.prototype.bool=function(){return 0!==this.uint32()},Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader$1.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},Reader$1.prototype.string=function(){var e=this.bytes();return utf8.read(e,0,e.length)},Reader$1.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create(),BufferReader$1._configure();var t=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader._configure();var rpc={},service=Service,util=minimal$1,exports$1;function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,r,i,n,o){if(!n)throw TypeError("request must be specified");var a=this;if(!o)return util.asPromise(e,a,t,r,i,n);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](n).finish(),(function(e,r){if(e)return a.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},exports$1=rpc,exports$1.Service=service;var roots={};!function(e){var t=indexMinimal;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=writer,t.BufferWriter=writer_buffer,t.Reader=reader,t.BufferReader=reader_buffer,t.util=minimal$1,t.rpc=rpc,t.roots=roots,t.configure=r,r()}();var minimal=indexMinimal,$Reader=minimal.Reader,$util=minimal.util,$root=minimal.roots.default||(minimal.roots.default={}),e;$root.proto_edu_v1=(e={},e.proto_sync=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_sync;e.pos<r;){var n=e.uint32();e.skipType(7&n)}return i},e}(),e.proto_sync_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sync_interval=0,e.prototype.room_extra_info_seq=0,e.prototype.user_list_seq=0,e.prototype.user_extra_info_seq=0,e.prototype.joinlive_seq=0,e.prototype.mod_list_seq=0,e.prototype.user_auth_seq=0,e.prototype.room_auth_seq=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_sync_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.sync_interval=e.uint32();break;case 2:i.room_extra_info_seq=e.uint32();break;case 3:i.user_list_seq=e.uint32();break;case 4:i.user_extra_info_seq=e.uint32();break;case 5:i.joinlive_seq=e.uint32();break;case 6:i.mod_list_seq=e.uint32();break;case 7:i.user_auth_seq=e.uint32();break;case 8:i.room_auth_seq=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_set_room=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mute=!1,e.prototype.silenced=!1,e.prototype.notice_info="",e.prototype.qaa_disable=!1,e.prototype.is_modify_mute=!1,e.prototype.is_modify_silenced=!1,e.prototype.is_modify_notice_info=!1,e.prototype.is_modify_qaa_disable=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_set_room;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mute=e.bool();break;case 2:i.silenced=e.bool();break;case 3:i.notice_info=e.string();break;case 4:i.qaa_disable=e.bool();break;case 5:i.is_modify_mute=e.bool();break;case 6:i.is_modify_silenced=e.bool();break;case 7:i.is_modify_notice_info=e.bool();break;case 8:i.is_modify_qaa_disable=e.bool();break;default:e.skipType(7&n)}}return i},e}(),e.proto_set_room_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_extra_info_seq=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_set_room_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.room_extra_info_seq=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_room=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_room;e.pos<r;){var n=e.uint32();e.skipType(7&n)}return i},e}(),e.proto_get_room_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_name="",e.prototype.mute=!1,e.prototype.silenced=!1,e.prototype.notice_info="",e.prototype.sync_interval=0,e.prototype.room_extra_info_seq=0,e.prototype.qaa_interval=0,e.prototype.qaa_disable=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_room_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.room_name=e.string();break;case 2:i.mute=e.bool();break;case 3:i.silenced=e.bool();break;case 4:i.notice_info=e.string();break;case 5:i.sync_interval=e.uint32();break;case 6:i.room_extra_info_seq=e.uint32();break;case 7:i.qaa_interval=e.uint32();break;case 8:i.qaa_disable=e.bool();break;default:e.skipType(7&n)}}return i},e}(),e.proto_set_user=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.avatar="",e.prototype.mute=!1,e.prototype.silenced=!1,e.prototype.raise_hand=!1,e.prototype.gift_count=0,e.prototype.permissions=0,e.prototype.group_code=0,e.prototype.group_name="",e.prototype.video=!1,e.prototype.is_modify_avatar=!1,e.prototype.is_modify_mute=!1,e.prototype.is_modify_silenced=!1,e.prototype.is_modify_raise_hand=!1,e.prototype.is_modify_gift_count=!1,e.prototype.is_modify_permissions=!1,e.prototype.is_modify_group_code=!1,e.prototype.is_modify_group_name=!1,e.prototype.is_modify_video=!1,e.prototype.role=0,e.prototype.nick_name="",e.prototype.wait=0,e.prototype.is_modify_role=!1,e.prototype.is_modify_nick_name=!1,e.prototype.is_modify_wait=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_set_user;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.id_name=e.string();break;case 2:i.avatar=e.string();break;case 3:i.mute=e.bool();break;case 4:i.silenced=e.bool();break;case 5:i.raise_hand=e.bool();break;case 6:i.gift_count=e.uint32();break;case 7:i.permissions=e.uint32();break;case 8:i.group_code=e.uint32();break;case 9:i.group_name=e.string();break;case 10:i.video=e.bool();break;case 11:i.is_modify_avatar=e.bool();break;case 12:i.is_modify_mute=e.bool();break;case 13:i.is_modify_silenced=e.bool();break;case 14:i.is_modify_raise_hand=e.bool();break;case 15:i.is_modify_gift_count=e.bool();break;case 16:i.is_modify_permissions=e.bool();break;case 17:i.is_modify_group_code=e.bool();break;case 18:i.is_modify_group_name=e.bool();break;case 19:i.is_modify_video=e.bool();break;case 20:i.role=e.uint32();break;case 21:i.nick_name=e.string();break;case 22:i.wait=e.uint32();break;case 23:i.is_modify_role=e.bool();break;case 24:i.is_modify_nick_name=e.bool();break;case 25:i.is_modify_wait=e.bool();break;default:e.skipType(7&n)}}return i},e}(),e.proto_set_user_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_set_user_rsp;e.pos<r;){var n=e.uint32();e.skipType(7&n)}return i},e}(),e.proto_get_user=function(){function e(e){if(this.id_name_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_user;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.id_name_list&&i.id_name_list.length||(i.id_name_list=[]),i.id_name_list.push(e.string());break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_user_rsp=function(){function e(e){if(this.user_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.user_list_seq=0,e.prototype.user_extra_info_seq=0,e.prototype.user_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_user_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.user_list_seq=e.uint32();break;case 2:i.user_extra_info_seq=e.uint32();break;case 3:i.user_list&&i.user_list.length||(i.user_list=[]),i.user_list.push($root.proto_edu_v1.proto_userlist_data.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_userlist=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mode=0,e.prototype.limit=0,e.prototype.marker="",e.prototype.filter=$util.Long?$util.Long.fromBits(0,0,!0):0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_userlist;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mode=e.uint32();break;case 2:i.limit=e.uint32();break;case 3:i.marker=e.string();break;case 4:i.filter=e.uint64();break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_userlist_rsp=function(){function e(e){if(this.user_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.user_list_seq=0,e.prototype.user_extra_info_seq=0,e.prototype.marker="",e.prototype.user_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_userlist_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.user_list_seq=e.uint32();break;case 2:i.user_extra_info_seq=e.uint32();break;case 3:i.marker=e.string();break;case 4:i.user_list&&i.user_list.length||(i.user_list=[]),i.user_list.push($root.proto_edu_v1.proto_userlist_data.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return i},e}(),e.proto_joinlive=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.last_seq=0,e.prototype.action=0,e.prototype.id_name="",e.prototype.joinlive_req=0,e.prototype.old_pos=0,e.prototype.new_pos=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_joinlive;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.last_seq=e.uint32();break;case 2:i.action=e.uint32();break;case 3:i.id_name=e.string();break;case 4:i.joinlive_req=e.uint32();break;case 5:i.old_pos=e.int32();break;case 6:i.new_pos=e.int32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_joinlive_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.last_seq=0,e.prototype.pos=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_joinlive_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.last_seq=e.uint32();break;case 2:i.pos=e.int32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_joinlive=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.limit=0,e.prototype.marker="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_joinlive;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.limit=e.uint32();break;case 2:i.marker=e.string();break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_joinlive_rsp=function(){function e(e){if(this.joinlive_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.last_seq=0,e.prototype.marker="",e.prototype.joinlive_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_joinlive_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.last_seq=e.uint32();break;case 2:i.marker=e.string();break;case 3:i.joinlive_list&&i.joinlive_list.length||(i.joinlive_list=[]),i.joinlive_list.push($root.proto_edu_v1.proto_joinlive_data.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return i},e}(),e.proto_create_mod=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.mod_title="",e.prototype.mod_type=0,e.prototype.mod_subtype=0,e.prototype.mod_pos="",e.prototype.mod_status=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.mod_content="",e.prototype.mod_extra="",e.prototype.mod_reserve=0,e.prototype.mod_delete_flag=0,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_create_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.mod_title=e.string();break;case 3:i.mod_type=e.uint32();break;case 4:i.mod_subtype=e.uint32();break;case 5:i.mod_pos=e.string();break;case 6:i.mod_status=e.uint64();break;case 7:i.mod_content=e.string();break;case 8:i.mod_extra=e.string();break;case 9:i.mod_reserve=e.uint32();break;case 10:i.mod_delete_flag=e.int32();break;case 11:i.mod_horizontal_percent=e.float();break;case 12:i.mod_vertical_percent=e.float();break;default:e.skipType(7&n)}}return i},e}(),e.proto_create_mod_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.mod_seq=0,e.prototype.mod_list_seq=0,e.prototype.mod_create_time=$util.Long?$util.Long.fromBits(0,0,!1):0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_create_mod_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.mod_seq=e.uint32();break;case 3:i.mod_list_seq=e.uint32();break;case 4:i.mod_create_time=e.int64();break;default:e.skipType(7&n)}}return i},e}(),e.proto_destroy_mod=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_destroy_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;default:e.skipType(7&n)}}return i},e}(),e.proto_destroy_mod_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.mod_list_seq=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_destroy_mod_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.mod_list_seq=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_modify_mod=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_seq=0,e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.mod_title="",e.prototype.mod_pos="",e.prototype.mod_status=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.mod_content="",e.prototype.mod_extra="",e.prototype.mod_reserve=0,e.prototype.is_modify_mod_title=!1,e.prototype.is_modify_mod_pos=!1,e.prototype.is_modify_mod_status=!1,e.prototype.is_modify_mod_content=!1,e.prototype.is_modify_mod_extra=!1,e.prototype.is_modify_mod_reserve=!1,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.is_modify_mod_horizontal_percent=!1,e.prototype.is_modify_mod_vertical_percent=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_modify_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_seq=e.uint32();break;case 2:i.mod_id=e.uint64();break;case 3:i.mod_title=e.string();break;case 4:i.mod_pos=e.string();break;case 5:i.mod_status=e.uint64();break;case 6:i.mod_content=e.string();break;case 7:i.mod_extra=e.string();break;case 8:i.mod_reserve=e.uint32();break;case 9:i.is_modify_mod_title=e.bool();break;case 10:i.is_modify_mod_pos=e.bool();break;case 11:i.is_modify_mod_status=e.bool();break;case 12:i.is_modify_mod_content=e.bool();break;case 13:i.is_modify_mod_extra=e.bool();break;case 14:i.is_modify_mod_reserve=e.bool();break;case 15:i.mod_horizontal_percent=e.float();break;case 16:i.mod_vertical_percent=e.float();break;case 17:i.is_modify_mod_horizontal_percent=e.bool();break;case 18:i.is_modify_mod_vertical_percent=e.bool();break;default:e.skipType(7&n)}}return i},e}(),e.proto_modify_mod_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.mod_seq=0,e.prototype.mod_list_seq=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_modify_mod_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.mod_seq=e.uint32();break;case 3:i.mod_list_seq=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_mod=function(){function e(e){if(this.mod_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:if(i.mod_id_list&&i.mod_id_list.length||(i.mod_id_list=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.mod_id_list.push(e.uint64());else i.mod_id_list.push(e.uint64());break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_mod_rsp=function(){function e(e){if(this.mod_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_mod_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_list&&i.mod_list.length||(i.mod_list=[]),i.mod_list.push($root.proto_edu_v1.proto_mod.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_mod_list=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_list_seq=0,e.prototype.limit=0,e.prototype.marker="",e.prototype.mod_type=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_mod_list;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_list_seq=e.uint32();break;case 2:i.limit=e.uint32();break;case 3:i.marker=e.string();break;case 4:i.mod_type=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_mod_list_rsp=function(){function e(e){if(this.mod_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_list_seq=0,e.prototype.marker="",e.prototype.mod_type=0,e.prototype.mod_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_mod_list_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_list_seq=e.uint32();break;case 2:i.marker=e.string();break;case 3:i.mod_type=e.uint32();break;case 4:i.mod_list&&i.mod_list.length||(i.mod_list=[]),i.mod_list.push($root.proto_edu_v1.proto_mod.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return i},e}(),e.proto_draw_graphics=function(){function e(e){if(this.draw_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.graphic_list_seq=0,e.prototype.draw_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_draw_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.graphic_list_seq=e.uint32();break;case 3:i.draw_list&&i.draw_list.length||(i.draw_list=[]),i.draw_list.push($root.proto_edu_v1.proto_draw.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return i},e}(),e.proto_draw_graphics_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.graphic_list_seq=0,e.prototype.commit_time=$util.Long?$util.Long.fromBits(0,0,!1):0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_draw_graphics_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.graphic_list_seq=e.uint32();break;case 3:i.commit_time=e.int64();break;default:e.skipType(7&n)}}return i},e}(),e.proto_draw_page_graphics=function(){function e(e){if(this.draw_pages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.draw_pages=$util.emptyArray,e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!0):0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_draw_page_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.draw_pages&&i.draw_pages.length||(i.draw_pages=[]),i.draw_pages.push($root.proto_edu_v1.proto_draw_page.decode(e,e.uint32()));break;case 3:i.timestamp=e.uint64();break;default:e.skipType(7&n)}}return i},e}(),e.proto_draw_page=function(){function e(e){if(this.draw_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.page=0,e.prototype.graphic_list_seq=0,e.prototype.draw_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_draw_page;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.page=e.uint32();break;case 2:i.graphic_list_seq=e.uint32();break;case 3:i.draw_list&&i.draw_list.length||(i.draw_list=[]),i.draw_list.push($root.proto_edu_v1.proto_draw.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return i},e}(),e.proto_draw_page_graphics_rsp=function(){function e(e){if(this.pages=[],this.graphic_list_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.pages=$util.emptyArray,e.prototype.graphic_list_seqs=$util.emptyArray,e.prototype.commit_time=$util.Long?$util.Long.fromBits(0,0,!1):0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_draw_page_graphics_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:if(i.pages&&i.pages.length||(i.pages=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.pages.push(e.uint32());else i.pages.push(e.uint32());break;case 3:if(i.graphic_list_seqs&&i.graphic_list_seqs.length||(i.graphic_list_seqs=[]),2==(7&n))for(var a=e.uint32()+e.pos;e.pos<a;)i.graphic_list_seqs.push(e.uint32());else i.graphic_list_seqs.push(e.uint32());break;case 4:i.commit_time=e.int64();break;default:e.skipType(7&n)}}return i},e}(),e.proto_draw=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.graphic_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.action=0,e.prototype.action_type=0,e.prototype.type=0,e.prototype.zorder=0,e.prototype.x=0,e.prototype.y=0,e.prototype.px=0,e.prototype.py=0,e.prototype.data=$util.newBuffer([]),e.prototype.size=0,e.prototype.color=0,e.prototype.width=0,e.prototype.height=0,e.prototype.attributes="",e.prototype.operate_id="",e.prototype.is_end_draw=!1,e.prototype.layer=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_draw;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.graphic_id=e.uint64();break;case 2:i.action=e.int32();break;case 3:i.action_type=e.int32();break;case 4:i.type=e.int32();break;case 5:i.zorder=e.int32();break;case 6:i.x=e.int32();break;case 7:i.y=e.int32();break;case 8:i.px=e.int32();break;case 9:i.py=e.int32();break;case 10:i.data=e.bytes();break;case 11:i.size=e.int32();break;case 12:i.color=e.uint32();break;case 13:i.width=e.int32();break;case 14:i.height=e.int32();break;case 15:i.attributes=e.string();break;case 16:i.operate_id=e.string();break;case 17:i.is_end_draw=e.bool();break;case 18:i.layer=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_clear_graphics=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.graphic_list_seq=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_clear_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.graphic_list_seq=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_clear_graphics_rsp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.graphic_list_seq=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_clear_graphics_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.graphic_list_seq=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_clear_page_graphics=function(){function e(e){if(this.layers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.layers=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_clear_page_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.timestamp=e.uint64();break;case 3:if(i.layers&&i.layers.length||(i.layers=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.layers.push(e.uint32());else i.layers.push(e.uint32());break;default:e.skipType(7&n)}}return i},e}(),e.proto_clear_page_graphics_rsp=function(){function e(e){if(this.pages=[],this.graphic_list_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.pages=$util.emptyArray,e.prototype.graphic_list_seqs=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_clear_page_graphics_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:if(i.pages&&i.pages.length||(i.pages=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.pages.push(e.uint32());else i.pages.push(e.uint32());break;case 3:if(i.graphic_list_seqs&&i.graphic_list_seqs.length||(i.graphic_list_seqs=[]),2==(7&n))for(var a=e.uint32()+e.pos;e.pos<a;)i.graphic_list_seqs.push(e.uint32());else i.graphic_list_seqs.push(e.uint32());break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_graphics=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.graphic_list_seq=0,e.prototype.limit=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.graphic_list_seq=e.uint32();break;case 3:i.limit=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_graphics_rsp=function(){function e(e){if(this.graphic_list=[],this.del_graphic_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.ret_graphic_list_seq=0,e.prototype.svr_graphic_list_seq=0,e.prototype.graphic_list=$util.emptyArray,e.prototype.del_graphic_id_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_graphics_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.ret_graphic_list_seq=e.uint32();break;case 2:i.svr_graphic_list_seq=e.uint32();break;case 3:i.graphic_list&&i.graphic_list.length||(i.graphic_list=[]),i.graphic_list.push($root.proto_edu_v1.proto_graphic.decode(e,e.uint32()));break;case 4:if(i.del_graphic_id_list&&i.del_graphic_id_list.length||(i.del_graphic_id_list=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.del_graphic_id_list.push(e.uint64());else i.del_graphic_id_list.push(e.uint64());break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_page_graphics=function(){function e(e){if(this.pages=[],this.graphic_list_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.pages=$util.emptyArray,e.prototype.graphic_list_seqs=$util.emptyArray,e.prototype.limit=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_page_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:if(i.pages&&i.pages.length||(i.pages=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.pages.push(e.uint32());else i.pages.push(e.uint32());break;case 3:if(i.graphic_list_seqs&&i.graphic_list_seqs.length||(i.graphic_list_seqs=[]),2==(7&n))for(var a=e.uint32()+e.pos;e.pos<a;)i.graphic_list_seqs.push(e.uint32());else i.graphic_list_seqs.push(e.uint32());break;case 4:i.limit=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_page_graphics_info=function(){function e(e){if(this.graphic_list=[],this.del_graphic_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.page=0,e.prototype.ret_graphic_list_seq=0,e.prototype.svr_graphic_list_seq=0,e.prototype.graphic_list=$util.emptyArray,e.prototype.del_graphic_id_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_page_graphics_info;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.page=e.uint32();break;case 2:i.ret_graphic_list_seq=e.uint32();break;case 3:i.svr_graphic_list_seq=e.uint32();break;case 4:i.graphic_list&&i.graphic_list.length||(i.graphic_list=[]),i.graphic_list.push($root.proto_edu_v1.proto_graphic.decode(e,e.uint32()));break;case 5:if(i.del_graphic_id_list&&i.del_graphic_id_list.length||(i.del_graphic_id_list=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.del_graphic_id_list.push(e.uint64());else i.del_graphic_id_list.push(e.uint64());break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_page_graphics_rsp=function(){function e(e){if(this.pages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.pages=$util.emptyArray,e.prototype.operate_expire_time=$util.Long?$util.Long.fromBits(0,0,!0):0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_page_graphics_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.pages&&i.pages.length||(i.pages=[]),i.pages.push($root.proto_edu_v1.proto_get_page_graphics_info.decode(e,e.uint32()));break;case 2:i.operate_expire_time=e.uint64();break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_user_auth_req=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_user_auth_req;e.pos<r;){var n=e.uint32();e.skipType(7&n)}return i},e}(),e.proto_get_user_auth_rsp=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.auth_seq=0,e.prototype.module_auth=$util.emptyArray,e.prototype.graphic_auth=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_user_auth_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.id_name=e.string();break;case 2:i.auth_seq=e.uint32();break;case 3:if(i.module_auth&&i.module_auth.length||(i.module_auth=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.module_auth.push(e.uint32());else i.module_auth.push(e.uint32());break;case 4:if(i.graphic_auth&&i.graphic_auth.length||(i.graphic_auth=[]),2==(7&n))for(var a=e.uint32()+e.pos;e.pos<a;)i.graphic_auth.push(e.uint32());else i.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return i},e}(),e.proto_get_room_auth_req=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_room_auth_req;e.pos<r;){var n=e.uint32();e.skipType(7&n)}return i},e}(),e.proto_get_room_auth_rsp=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.auth_seq=0,e.prototype.module_auth=$util.emptyArray,e.prototype.graphic_auth=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_get_room_auth_rsp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.auth_seq=e.uint32();break;case 2:if(i.module_auth&&i.module_auth.length||(i.module_auth=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.module_auth.push(e.uint32());else i.module_auth.push(e.uint32());break;case 3:if(i.graphic_auth&&i.graphic_auth.length||(i.graphic_auth=[]),2==(7&n))for(var a=e.uint32()+e.pos;e.pos<a;)i.graphic_auth.push(e.uint32());else i.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return i},e}(),e.proto_userlist_data=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.role=0,e.prototype.nick_name="",e.prototype.enter_time=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.avatar="",e.prototype.mute=!1,e.prototype.silenced=!1,e.prototype.raise_hand=!1,e.prototype.gift_count=0,e.prototype.permissions=0,e.prototype.group_code=0,e.prototype.group_name="",e.prototype.video=!1,e.prototype.wait=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_userlist_data;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.id_name=e.string();break;case 2:i.id=e.uint64();break;case 3:i.role=e.uint32();break;case 4:i.nick_name=e.string();break;case 5:i.enter_time=e.int64();break;case 6:i.avatar=e.string();break;case 7:i.mute=e.bool();break;case 8:i.silenced=e.bool();break;case 9:i.raise_hand=e.bool();break;case 10:i.gift_count=e.uint32();break;case 11:i.permissions=e.uint32();break;case 12:i.group_code=e.uint32();break;case 13:i.group_name=e.string();break;case 14:i.video=e.bool();break;case 15:i.wait=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_joinlive_data=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.nick_name="",e.prototype.role=0,e.prototype.joinlive_req=0,e.prototype.pos=0,e.prototype.join_type=0,e.prototype.state=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_joinlive_data;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.id_name=e.string();break;case 2:i.nick_name=e.string();break;case 3:i.role=e.uint32();break;case 4:i.joinlive_req=e.uint32();break;case 5:i.pos=e.int32();break;case 6:i.join_type=e.uint32();break;case 7:i.state=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.proto_mod=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.mod_seq=0,e.prototype.mod_title="",e.prototype.mod_type=0,e.prototype.mod_subtype=0,e.prototype.mod_pos="",e.prototype.mod_status=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.mod_content="",e.prototype.mod_extra="",e.prototype.mod_reserve=0,e.prototype.mod_create_time=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.graphic_list_seq=0,e.prototype.sync_interval=0,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.mod_seq=e.uint32();break;case 3:i.mod_title=e.string();break;case 4:i.mod_type=e.uint32();break;case 5:i.mod_subtype=e.uint32();break;case 6:i.mod_pos=e.string();break;case 7:i.mod_status=e.uint64();break;case 8:i.mod_content=e.string();break;case 9:i.mod_extra=e.string();break;case 10:i.mod_reserve=e.uint32();break;case 11:i.mod_create_time=e.int64();break;case 12:i.graphic_list_seq=e.uint32();break;case 13:i.sync_interval=e.uint32();break;case 14:i.mod_horizontal_percent=e.float();break;case 15:i.mod_vertical_percent=e.float();break;default:e.skipType(7&n)}}return i},e}(),e.proto_graphic=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.nick_name="",e.prototype.graphic_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.action_seq=0,e.prototype.type=0,e.prototype.zorder=0,e.prototype.x=0,e.prototype.y=0,e.prototype.data=$util.newBuffer([]),e.prototype.size=0,e.prototype.color=0,e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.width=0,e.prototype.height=0,e.prototype.attributes="",e.prototype.operate_id="",e.prototype.is_end_draw=!1,e.prototype.server_timestamp=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.creator_id="",e.prototype.layer=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.proto_graphic;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.id_name=e.string();break;case 2:i.nick_name=e.string();break;case 3:i.graphic_id=e.uint64();break;case 4:i.action_seq=e.uint32();break;case 5:i.type=e.int32();break;case 7:i.zorder=e.int32();break;case 8:i.x=e.int32();break;case 9:i.y=e.int32();break;case 10:i.data=e.bytes();break;case 11:i.size=e.int32();break;case 12:i.color=e.uint32();break;case 13:i.timestamp=e.uint64();break;case 14:i.width=e.int32();break;case 15:i.height=e.int32();break;case 16:i.attributes=e.string();break;case 17:i.operate_id=e.string();break;case 18:i.is_end_draw=e.bool();break;case 19:i.server_timestamp=e.uint64();break;case 20:i.creator_id=e.string();break;case 21:i.layer=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.user_auth=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.action_seq=0,e.prototype.module_auth=$util.emptyArray,e.prototype.graphic_auth=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.user_auth;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.id_name=e.string();break;case 2:i.action_seq=e.uint32();break;case 3:if(i.module_auth&&i.module_auth.length||(i.module_auth=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.module_auth.push(e.uint32());else i.module_auth.push(e.uint32());break;case 4:if(i.graphic_auth&&i.graphic_auth.length||(i.graphic_auth=[]),2==(7&n))for(var a=e.uint32()+e.pos;e.pos<a;)i.graphic_auth.push(e.uint32());else i.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return i},e}(),e.req_head=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.signature=$util.newBuffer([]),e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.seq=0,e.prototype.sdk_version=0,e.prototype.app_id=0,e.prototype.biz_type=0,e.prototype.id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.id_name="",e.prototype.room_id="",e.prototype.session_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.room_session_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.req_head;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.signature=e.bytes();break;case 2:i.timestamp=e.int64();break;case 3:i.seq=e.uint32();break;case 4:i.sdk_version=e.uint32();break;case 5:i.app_id=e.uint32();break;case 6:i.biz_type=e.uint32();break;case 7:i.id=e.uint64();break;case 8:i.id_name=e.string();break;case 9:i.room_id=e.string();break;case 10:i.session_id=e.uint64();break;case 11:i.room_session_id=e.uint64();break;default:e.skipType(7&n)}}return i},e}(),e.rsp_head=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.prototype.message="",e.prototype.seq=0,e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!1):0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.rsp_head;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.code=e.int32();break;case 2:i.message=e.string();break;case 3:i.seq=e.uint32();break;case 4:i.timestamp=e.int64();break;default:e.skipType(7&n)}}return i},e}(),e.E_PUSH_CMD=function(){var e={},t=Object.create(e);return t[e[0]="push_cmd_none"]=0,t[e[291001]="push_cmd_set_room"]=291001,t[e[291002]="push_cmd_set_user"]=291002,t[e[291003]="push_cmd_joinlive"]=291003,t[e[291101]="push_cmd_set_mod"]=291101,t[e[291201]="push_cmd_draw_graphics"]=291201,t[e[291202]="push_cmd_clear_graphics"]=291202,t[e[291203]="push_cmd_draw_page_graphics"]=291203,t[e[291204]="push_cmd_clear_page_graphics"]=291204,t[e[291401]="push_cmd_qaa"]=291401,t[e[291501]="push_cmd_set_user_auth"]=291501,t[e[291502]="push_cmd_set_room_auth"]=291502,t}(),e.push_set_room=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_id="",e.prototype.mute=!1,e.prototype.silenced=!1,e.prototype.notice_info="",e.prototype.room_extra_info_seq=0,e.prototype.qaa_disable=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_set_room;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.room_id=e.string();break;case 2:i.mute=e.bool();break;case 3:i.silenced=e.bool();break;case 4:i.notice_info=e.string();break;case 5:i.room_extra_info_seq=e.uint32();break;case 6:i.qaa_disable=e.bool();break;default:e.skipType(7&n)}}return i},e}(),e.push_set_user=function(){function e(e){if(this.action_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_id="",e.prototype.user_list_seq=0,e.prototype.user_edu_seq=0,e.prototype.action_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_set_user;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.room_id=e.string();break;case 2:i.user_list_seq=e.uint32();break;case 3:i.user_edu_seq=e.uint32();break;case 4:i.action_list&&i.action_list.length||(i.action_list=[]),i.action_list.push($root.proto_edu_v1.push_set_user_action.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return i},e}(),e.push_set_user_action=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.action=0,e.prototype.id_name="",e.prototype.id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.role=0,e.prototype.nick_name="",e.prototype.enter_time=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.avatar="",e.prototype.mute=!1,e.prototype.silenced=!1,e.prototype.raise_hand=!1,e.prototype.gift_count=0,e.prototype.permissions=0,e.prototype.group_code=0,e.prototype.group_name="",e.prototype.video=!1,e.prototype.is_modify_avatar=!1,e.prototype.is_modify_mute=!1,e.prototype.is_modify_silenced=!1,e.prototype.is_modify_raise_hand=!1,e.prototype.is_modify_gift_count=!1,e.prototype.is_modify_permissions=!1,e.prototype.is_modify_group_code=!1,e.prototype.is_modify_group_name=!1,e.prototype.is_modify_video=!1,e.prototype.wait=0,e.prototype.is_modify_role=!1,e.prototype.is_modify_nick_name=!1,e.prototype.is_modify_wait=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_set_user_action;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.action=e.uint32();break;case 2:i.id_name=e.string();break;case 3:i.id=e.uint64();break;case 4:i.role=e.uint32();break;case 5:i.nick_name=e.string();break;case 6:i.enter_time=e.int64();break;case 7:i.avatar=e.string();break;case 8:i.mute=e.bool();break;case 9:i.silenced=e.bool();break;case 10:i.raise_hand=e.bool();break;case 11:i.gift_count=e.uint32();break;case 12:i.permissions=e.uint32();break;case 13:i.group_code=e.uint32();break;case 14:i.group_name=e.string();break;case 15:i.video=e.bool();break;case 16:i.is_modify_avatar=e.bool();break;case 17:i.is_modify_mute=e.bool();break;case 18:i.is_modify_silenced=e.bool();break;case 19:i.is_modify_raise_hand=e.bool();break;case 20:i.is_modify_gift_count=e.bool();break;case 21:i.is_modify_permissions=e.bool();break;case 22:i.is_modify_group_code=e.bool();break;case 23:i.is_modify_group_name=e.bool();break;case 24:i.is_modify_video=e.bool();break;case 25:i.wait=e.uint32();break;case 26:i.is_modify_role=e.bool();break;case 27:i.is_modify_nick_name=e.bool();break;case 28:i.is_modify_wait=e.bool();break;default:e.skipType(7&n)}}return i},e}(),e.push_joinlive=function(){function e(e){if(this.action_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_id="",e.prototype.last_seq=0,e.prototype.action_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_joinlive;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.room_id=e.string();break;case 2:i.last_seq=e.uint32();break;case 3:i.action_list&&i.action_list.length||(i.action_list=[]),i.action_list.push($root.proto_edu_v1.push_joinlive_action.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return i},e}(),e.push_joinlive_action=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.action=0,e.prototype.id_name="",e.prototype.joinlive_req=0,e.prototype.old_pos=0,e.prototype.new_pos=0,e.prototype.nick_name="",e.prototype.role=0,e.prototype.join_type=0,e.prototype.state=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_joinlive_action;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.action=e.uint32();break;case 2:i.id_name=e.string();break;case 3:i.joinlive_req=e.uint32();break;case 4:i.old_pos=e.uint32();break;case 5:i.new_pos=e.uint32();break;case 6:i.nick_name=e.string();break;case 7:i.role=e.uint32();break;case 8:i.join_type=e.uint32();break;case 9:i.state=e.uint32();break;default:e.skipType(7&n)}}return i},e}(),e.push_set_mod=function(){function e(e){if(this.action_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_id="",e.prototype.mod_list_seq=0,e.prototype.action_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_set_mod;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.room_id=e.string();break;case 2:i.mod_list_seq=e.uint32();break;case 3:i.action_list&&i.action_list.length||(i.action_list=[]),i.action_list.push($root.proto_edu_v1.push_set_mod_action.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return i},e}(),e.push_set_mod_action=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.action=0,e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.mod_type=0,e.prototype.mod_subtype=0,e.prototype.mod_seq=0,e.prototype.mod_title="",e.prototype.mod_pos="",e.prototype.mod_status=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.mod_content="",e.prototype.mod_extra="",e.prototype.mod_reserve=0,e.prototype.mod_create_time=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.is_modify_mod_title=!1,e.prototype.is_modify_mod_pos=!1,e.prototype.is_modify_mod_status=!1,e.prototype.is_modify_mod_content=!1,e.prototype.is_modify_mod_extra=!1,e.prototype.is_modify_mod_reserve=!1,e.prototype.mod_horizontal_percent=0,e.prototype.mod_vertical_percent=0,e.prototype.is_modify_mod_horizontal_percent=!1,e.prototype.is_modify_mod_vertical_percent=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_set_mod_action;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.action=e.uint32();break;case 2:i.mod_id=e.uint64();break;case 3:i.mod_type=e.uint32();break;case 4:i.mod_subtype=e.uint32();break;case 5:i.mod_seq=e.uint32();break;case 6:i.mod_title=e.string();break;case 7:i.mod_pos=e.string();break;case 8:i.mod_status=e.uint64();break;case 9:i.mod_content=e.string();break;case 10:i.mod_extra=e.string();break;case 11:i.mod_reserve=e.uint32();break;case 12:i.mod_create_time=e.int64();break;case 13:i.is_modify_mod_title=e.bool();break;case 14:i.is_modify_mod_pos=e.bool();break;case 15:i.is_modify_mod_status=e.bool();break;case 16:i.is_modify_mod_content=e.bool();break;case 17:i.is_modify_mod_extra=e.bool();break;case 18:i.is_modify_mod_reserve=e.bool();break;case 19:i.mod_horizontal_percent=e.float();break;case 20:i.mod_vertical_percent=e.float();break;case 21:i.is_modify_mod_horizontal_percent=e.bool();break;case 22:i.is_modify_mod_vertical_percent=e.bool();break;default:e.skipType(7&n)}}return i},e}(),e.push_draw_graphics=function(){function e(e){if(this.graphic_list=[],this.del_graphic_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.action_seq=0,e.prototype.graphic_list=$util.emptyArray,e.prototype.del_graphic_id_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_draw_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.action_seq=e.uint32();break;case 3:i.graphic_list&&i.graphic_list.length||(i.graphic_list=[]),i.graphic_list.push($root.proto_edu_v1.proto_graphic.decode(e,e.uint32()));break;case 4:if(i.del_graphic_id_list&&i.del_graphic_id_list.length||(i.del_graphic_id_list=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.del_graphic_id_list.push(e.uint64());else i.del_graphic_id_list.push(e.uint64());break;default:e.skipType(7&n)}}return i},e}(),e.push_draw_page_graphics=function(){function e(e){if(this.page_graphics=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.page_graphics=$util.emptyArray,e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!0):0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_draw_page_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.page_graphics&&i.page_graphics.length||(i.page_graphics=[]),i.page_graphics.push($root.proto_edu_v1.push_draw_graphics_info.decode(e,e.uint32()));break;case 3:i.timestamp=e.uint64();break;default:e.skipType(7&n)}}return i},e}(),e.push_draw_graphics_info=function(){function e(e){if(this.graphic_list=[],this.del_graphic_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.page=0,e.prototype.action_seq=0,e.prototype.graphic_list=$util.emptyArray,e.prototype.del_graphic_id_list=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_draw_graphics_info;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.page=e.uint32();break;case 2:i.action_seq=e.uint32();break;case 3:i.graphic_list&&i.graphic_list.length||(i.graphic_list=[]),i.graphic_list.push($root.proto_edu_v1.proto_graphic.decode(e,e.uint32()));break;case 4:if(i.del_graphic_id_list&&i.del_graphic_id_list.length||(i.del_graphic_id_list=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.del_graphic_id_list.push(e.uint64());else i.del_graphic_id_list.push(e.uint64());break;default:e.skipType(7&n)}}return i},e}(),e.push_clear_graphics=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.action_seq=0,e.prototype.id_name="",e.prototype.nick_name="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_clear_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:i.action_seq=e.uint32();break;case 3:i.id_name=e.string();break;case 4:i.nick_name=e.string();break;default:e.skipType(7&n)}}return i},e}(),e.push_clear_page_graphics=function(){function e(e){if(this.pages=[],this.action_seqs=[],this.layers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.mod_id=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.pages=$util.emptyArray,e.prototype.action_seqs=$util.emptyArray,e.prototype.id_name="",e.prototype.nick_name="",e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.layers=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_clear_page_graphics;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.mod_id=e.uint64();break;case 2:if(i.pages&&i.pages.length||(i.pages=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.pages.push(e.uint32());else i.pages.push(e.uint32());break;case 3:if(i.action_seqs&&i.action_seqs.length||(i.action_seqs=[]),2==(7&n))for(var a=e.uint32()+e.pos;e.pos<a;)i.action_seqs.push(e.uint32());else i.action_seqs.push(e.uint32());break;case 4:i.id_name=e.string();break;case 5:i.nick_name=e.string();break;case 6:i.timestamp=e.uint64();break;case 7:if(i.layers&&i.layers.length||(i.layers=[]),2==(7&n))for(var s=e.uint32()+e.pos;e.pos<s;)i.layers.push(e.uint32());else i.layers.push(e.uint32());break;default:e.skipType(7&n)}}return i},e}(),e.push_qaa=function(){function e(e){if(this.qaa_data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.room_id="",e.prototype.qaa_data=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_qaa;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.room_id=e.string();break;case 2:i.qaa_data&&i.qaa_data.length||(i.qaa_data=[]),i.qaa_data.push($root.proto_edu_v1.push_qaa_data.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return i},e}(),e.push_qaa_data=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.nick_name="",e.prototype.role=0,e.prototype.qaa_id="",e.prototype.qaa_target_id="",e.prototype.qaa_category=0,e.prototype.qaa_content="",e.prototype.send_time=$util.Long?$util.Long.fromBits(0,0,!1):0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_qaa_data;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.id_name=e.string();break;case 2:i.nick_name=e.string();break;case 3:i.role=e.uint32();break;case 4:i.qaa_id=e.string();break;case 5:i.qaa_target_id=e.string();break;case 6:i.qaa_category=e.uint32();break;case 7:i.qaa_content=e.string();break;case 8:i.send_time=e.int64();break;default:e.skipType(7&n)}}return i},e}(),e.push_user_auth=function(){function e(e){if(this.user_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.user_auth=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_user_auth;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.user_auth&&i.user_auth.length||(i.user_auth=[]),i.user_auth.push($root.proto_edu_v1.push_user_auth_data.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return i},e}(),e.push_user_auth_data=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id_name="",e.prototype.auth_seq=0,e.prototype.module_auth=$util.emptyArray,e.prototype.graphic_auth=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_user_auth_data;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.id_name=e.string();break;case 2:i.auth_seq=e.uint32();break;case 3:if(i.module_auth&&i.module_auth.length||(i.module_auth=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.module_auth.push(e.uint32());else i.module_auth.push(e.uint32());break;case 4:if(i.graphic_auth&&i.graphic_auth.length||(i.graphic_auth=[]),2==(7&n))for(var a=e.uint32()+e.pos;e.pos<a;)i.graphic_auth.push(e.uint32());else i.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return i},e}(),e.push_room_auth=function(){function e(e){if(this.module_auth=[],this.graphic_auth=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.auth_seq=0,e.prototype.module_auth=$util.emptyArray,e.prototype.graphic_auth=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new $root.proto_edu_v1.push_room_auth;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:i.auth_seq=e.uint32();break;case 2:if(i.module_auth&&i.module_auth.length||(i.module_auth=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)i.module_auth.push(e.uint32());else i.module_auth.push(e.uint32());break;case 3:if(i.graphic_auth&&i.graphic_auth.length||(i.graphic_auth=[]),2==(7&n))for(var a=e.uint32()+e.pos;e.pos<a;)i.graphic_auth.push(e.uint32());else i.graphic_auth.push(e.uint32());break;default:e.skipType(7&n)}}return i},e}(),e);var Engine=function(){function e(e){this.playbackEvent=playbackEvent,this.layoutEngine=layoutEngine,this.$store=$store,this.whiteboardEngine=e.find((function(e){return e&&e.loginRoom})),this.expressEngine=this.whiteboardEngine,this.docEngine=e.find((function(e){return e&&e.uploadFile})),this.parseService=new Parse($store,$root)}return e.prototype.load=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){switch(r.label){case 0:return[4,this.parseService.load(e)];case 1:return r.sent(),this.playerEngine=new Player($store,this.whiteboardEngine,this.docEngine,this.playbackEvent),[4,this.playerEngine.init()];case 2:return r.sent(),(t=this.playbackEvent).actionCustomListener.apply(t,__spreadArray([ZegoEventName.loadComplete],[])),this.layoutEngine.setMode(LayoutMode.float),[2]}}))}))},e.prototype.unload=function(){var e,t;null===(e=this.playerEngine)||void 0===e||e.unInit(),null===(t=this.layoutEngine)||void 0===t||t.reload()},e.prototype.on=function(e,t){return this.playbackEvent.bindCustomListener(e,t)},e.prototype.off=function(e,t){return this.playbackEvent.deleteCustomListener(e,t)},e.prototype.setPlayView=function(e){this.$store.playView=e,this.layoutEngine.setPlayView(e)},e.prototype.clearPlayView=function(){this.$store.playView=null,this.layoutEngine.clearPlayView()},e.prototype.setLayoutMode=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return this.layoutEngine.setMode(e),[4,this.playerEngine.reloadWbView()];case 1:return t.sent(),[2]}}))}))},e.prototype.reloadView=function(){this.playerEngine.reloadWbView()},e.prototype.getCurrentLayoutMode=function(){return this.layoutEngine.currentMode},e.prototype.getCurrentProgress=function(){return this.playerEngine.playInfo.currentTime},e.prototype.getCurrentState=function(){return this.playerEngine.playInfo.status},e.prototype.getVolume=function(){return this.$store.playInfo.volume},e.prototype.start=function(){return this.playerEngine.start()},e.prototype.pause=function(){this.playerEngine.pause()},e.prototype.resume=function(){return this.playerEngine.resume()},e.prototype.stop=function(){this.playerEngine.stop()},e.prototype.setVolume=function(e){this.$store.playInfo.volume=e,this.playerEngine.setVolume()},e.prototype.seekTo=function(e){return this.playerEngine.seekTo(e)},e.prototype.getTotalDuration=function(){return this.playerEngine.playInfo.duringTime},e}();function styleInject(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var css_248z="[id^='zego-playback-content'] {\n    position: relative;\n    display: flex;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    background-color: #000;\n}\n\n[id^='zego-playback-whiteboard'] {\n    width: 100%;\n    height: 100%;\n    margin: 0 auto;\n    position: relative;\n}\n\n.zego-playback-whiteboard-mask {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block !important;\n    z-index: 1;\n}\n\n.zego-split-layout {\n    width: 100%;\n    height: 100%;\n}\n\n.zego-split-main {\n    display: flex;\n    width: 100%;\n    height: 100%;\n}\n\n.zego-split-item-1 {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.zego-split-item-2 {\n    width: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.zego-split-item-4 {\n    width: 50%;\n    height: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.zego-split-item-6 {\n    width: 33.33%;\n    height: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.zego-split-item-9 {\n    width: 33.33%;\n    height: 33.33%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.zego-horizontal-layout {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n\n.zego-horizontal-main {\n    display: flex;\n    align-items: center;\n    /*justify-content: center;*/\n    flex: 1;\n    height: 75%;\n    position: relative;\n}\n\n.zego-horizontal-ele {\n    display: flex;\n    height: 25%;\n}\n\n.zego-horizontal-item-4 {\n    width: 25%;\n    height: 100%;\n}\n\n.zego-horizontal-item-8 {\n    width: 12%;\n    height: 100%;\n}\n\n\n.zego-vertical-layout {\n    display: flex;\n    width: 100%;\n    height: 100%;\n}\n\n.zego-vertical-main {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n    flex: 1;\n    width: 80%;\n}\n\n\n.zego-vertical-ele {\n    width: 20%;\n    display: flex;\n    flex-direction: column;\n}\n\n.zego-vertical-item-4 {\n    width: 100%;\n    height: 25%;\n}\n\n.zego-vertical-item-8 {\n    width: 100%;\n    height: 12%;\n}\n\n.zego-float-layout {\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\n\n.zego-float-main {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.zego-float-ele {\n    position: absolute;\n    width: 100%;\n    height: 25%;\n    bottom: 0;\n    z-index: 1;\n}\n\n.zego-float-item {\n    width: 23.5%;\n    height: 100%;\n    float: right;\n    margin-right: 1.2%;\n}\n";styleInject(css_248z);var ZegoCloudRecord=function(){function e(){}return e.initPlaybackEngine=function(e){return this.playbackEngine||(this.playbackEngine=new Engine(e))},e.getVersion=function(){return"1.0.0"},e}();return ZegoCloudRecord}();
//# sourceMappingURL=ZegoRecorderEngine.js.map
